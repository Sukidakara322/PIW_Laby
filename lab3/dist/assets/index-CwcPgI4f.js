function OE(t,e){for(var n=0;n<e.length;n++){const i=e[n];if(typeof i!="string"&&!Array.isArray(i)){for(const r in i)if(r!=="default"&&!(r in t)){const a=Object.getOwnPropertyDescriptor(i,r);a&&Object.defineProperty(t,r,a.get?a:{enumerable:!0,get:()=>i[r]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const a of r)if(a.type==="childList")for(const s of a.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&i(s)}).observe(document,{childList:!0,subtree:!0});function n(r){const a={};return r.integrity&&(a.integrity=r.integrity),r.referrerPolicy&&(a.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?a.credentials="include":r.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(r){if(r.ep)return;r.ep=!0;const a=n(r);fetch(r.href,a)}})();function Um(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var NE={exports:{}},Th={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xw=Symbol.for("react.transitional.element"),Vw=Symbol.for("react.fragment");function ME(t,e,n){var i=null;if(n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),"key"in e){n={};for(var r in e)r!=="key"&&(n[r]=e[r])}else n=e;return e=n.ref,{$$typeof:xw,type:t,key:i,ref:e!==void 0?e:null,props:n}}Th.Fragment=Vw;Th.jsx=ME;Th.jsxs=ME;NE.exports=Th;var B=NE.exports,xE={exports:{}},fe={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var km=Symbol.for("react.transitional.element"),Pw=Symbol.for("react.portal"),Lw=Symbol.for("react.fragment"),Uw=Symbol.for("react.strict_mode"),kw=Symbol.for("react.profiler"),zw=Symbol.for("react.consumer"),jw=Symbol.for("react.context"),Bw=Symbol.for("react.forward_ref"),Hw=Symbol.for("react.suspense"),Fw=Symbol.for("react.memo"),VE=Symbol.for("react.lazy"),gy=Symbol.iterator;function qw(t){return t===null||typeof t!="object"?null:(t=gy&&t[gy]||t["@@iterator"],typeof t=="function"?t:null)}var PE={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},LE=Object.assign,UE={};function Qs(t,e,n){this.props=t,this.context=e,this.refs=UE,this.updater=n||PE}Qs.prototype.isReactComponent={};Qs.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Qs.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function kE(){}kE.prototype=Qs.prototype;function zm(t,e,n){this.props=t,this.context=e,this.refs=UE,this.updater=n||PE}var jm=zm.prototype=new kE;jm.constructor=zm;LE(jm,Qs.prototype);jm.isPureReactComponent=!0;var py=Array.isArray,Xe={H:null,A:null,T:null,S:null,V:null},zE=Object.prototype.hasOwnProperty;function Bm(t,e,n,i,r,a){return n=a.ref,{$$typeof:km,type:t,key:e,ref:n!==void 0?n:null,props:a}}function Gw(t,e){return Bm(t.type,e,void 0,void 0,void 0,t.props)}function Hm(t){return typeof t=="object"&&t!==null&&t.$$typeof===km}function Kw(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var yy=/\/+/g;function vf(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Kw(""+t.key):e.toString(36)}function vy(){}function Qw(t){switch(t.status){case"fulfilled":return t.value;case"rejected":throw t.reason;default:switch(typeof t.status=="string"?t.then(vy,vy):(t.status="pending",t.then(function(e){t.status==="pending"&&(t.status="fulfilled",t.value=e)},function(e){t.status==="pending"&&(t.status="rejected",t.reason=e)})),t.status){case"fulfilled":return t.value;case"rejected":throw t.reason}}throw t}function Qa(t,e,n,i,r){var a=typeof t;(a==="undefined"||a==="boolean")&&(t=null);var s=!1;if(t===null)s=!0;else switch(a){case"bigint":case"string":case"number":s=!0;break;case"object":switch(t.$$typeof){case km:case Pw:s=!0;break;case VE:return s=t._init,Qa(s(t._payload),e,n,i,r)}}if(s)return r=r(t),s=i===""?"."+vf(t,0):i,py(r)?(n="",s!=null&&(n=s.replace(yy,"$&/")+"/"),Qa(r,e,n,"",function(c){return c})):r!=null&&(Hm(r)&&(r=Gw(r,n+(r.key==null||t&&t.key===r.key?"":(""+r.key).replace(yy,"$&/")+"/")+s)),e.push(r)),1;s=0;var l=i===""?".":i+":";if(py(t))for(var u=0;u<t.length;u++)i=t[u],a=l+vf(i,u),s+=Qa(i,e,n,a,r);else if(u=qw(t),typeof u=="function")for(t=u.call(t),u=0;!(i=t.next()).done;)i=i.value,a=l+vf(i,u++),s+=Qa(i,e,n,a,r);else if(a==="object"){if(typeof t.then=="function")return Qa(Qw(t),e,n,i,r);throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.")}return s}function Iu(t,e,n){if(t==null)return t;var i=[],r=0;return Qa(t,i,"","",function(a){return e.call(n,a,r++)}),i}function Yw(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var _y=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var e=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(e))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)};function Xw(){}fe.Children={map:Iu,forEach:function(t,e,n){Iu(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Iu(t,function(){e++}),e},toArray:function(t){return Iu(t,function(e){return e})||[]},only:function(t){if(!Hm(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};fe.Component=Qs;fe.Fragment=Lw;fe.Profiler=kw;fe.PureComponent=zm;fe.StrictMode=Uw;fe.Suspense=Hw;fe.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Xe;fe.__COMPILER_RUNTIME={__proto__:null,c:function(t){return Xe.H.useMemoCache(t)}};fe.cache=function(t){return function(){return t.apply(null,arguments)}};fe.cloneElement=function(t,e,n){if(t==null)throw Error("The argument must be a React element, but you passed "+t+".");var i=LE({},t.props),r=t.key,a=void 0;if(e!=null)for(s in e.ref!==void 0&&(a=void 0),e.key!==void 0&&(r=""+e.key),e)!zE.call(e,s)||s==="key"||s==="__self"||s==="__source"||s==="ref"&&e.ref===void 0||(i[s]=e[s]);var s=arguments.length-2;if(s===1)i.children=n;else if(1<s){for(var l=Array(s),u=0;u<s;u++)l[u]=arguments[u+2];i.children=l}return Bm(t.type,r,void 0,void 0,a,i)};fe.createContext=function(t){return t={$$typeof:jw,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null},t.Provider=t,t.Consumer={$$typeof:zw,_context:t},t};fe.createElement=function(t,e,n){var i,r={},a=null;if(e!=null)for(i in e.key!==void 0&&(a=""+e.key),e)zE.call(e,i)&&i!=="key"&&i!=="__self"&&i!=="__source"&&(r[i]=e[i]);var s=arguments.length-2;if(s===1)r.children=n;else if(1<s){for(var l=Array(s),u=0;u<s;u++)l[u]=arguments[u+2];r.children=l}if(t&&t.defaultProps)for(i in s=t.defaultProps,s)r[i]===void 0&&(r[i]=s[i]);return Bm(t,a,void 0,void 0,null,r)};fe.createRef=function(){return{current:null}};fe.forwardRef=function(t){return{$$typeof:Bw,render:t}};fe.isValidElement=Hm;fe.lazy=function(t){return{$$typeof:VE,_payload:{_status:-1,_result:t},_init:Yw}};fe.memo=function(t,e){return{$$typeof:Fw,type:t,compare:e===void 0?null:e}};fe.startTransition=function(t){var e=Xe.T,n={};Xe.T=n;try{var i=t(),r=Xe.S;r!==null&&r(n,i),typeof i=="object"&&i!==null&&typeof i.then=="function"&&i.then(Xw,_y)}catch(a){_y(a)}finally{Xe.T=e}};fe.unstable_useCacheRefresh=function(){return Xe.H.useCacheRefresh()};fe.use=function(t){return Xe.H.use(t)};fe.useActionState=function(t,e,n){return Xe.H.useActionState(t,e,n)};fe.useCallback=function(t,e){return Xe.H.useCallback(t,e)};fe.useContext=function(t){return Xe.H.useContext(t)};fe.useDebugValue=function(){};fe.useDeferredValue=function(t,e){return Xe.H.useDeferredValue(t,e)};fe.useEffect=function(t,e,n){var i=Xe.H;if(typeof n=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return i.useEffect(t,e)};fe.useId=function(){return Xe.H.useId()};fe.useImperativeHandle=function(t,e,n){return Xe.H.useImperativeHandle(t,e,n)};fe.useInsertionEffect=function(t,e){return Xe.H.useInsertionEffect(t,e)};fe.useLayoutEffect=function(t,e){return Xe.H.useLayoutEffect(t,e)};fe.useMemo=function(t,e){return Xe.H.useMemo(t,e)};fe.useOptimistic=function(t,e){return Xe.H.useOptimistic(t,e)};fe.useReducer=function(t,e,n){return Xe.H.useReducer(t,e,n)};fe.useRef=function(t){return Xe.H.useRef(t)};fe.useState=function(t){return Xe.H.useState(t)};fe.useSyncExternalStore=function(t,e,n){return Xe.H.useSyncExternalStore(t,e,n)};fe.useTransition=function(){return Xe.H.useTransition()};fe.version="19.1.0";xE.exports=fe;var U=xE.exports;const jE=Um(U),$w=OE({__proto__:null,default:jE},[U]);var BE={exports:{}},Sh={},HE={exports:{}},FE={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(Q,re){var W=Q.length;Q.push(re);e:for(;0<W;){var Ie=W-1>>>1,Pe=Q[Ie];if(0<r(Pe,re))Q[Ie]=re,Q[W]=Pe,W=Ie;else break e}}function n(Q){return Q.length===0?null:Q[0]}function i(Q){if(Q.length===0)return null;var re=Q[0],W=Q.pop();if(W!==re){Q[0]=W;e:for(var Ie=0,Pe=Q.length,rn=Pe>>>1;Ie<rn;){var Ze=2*(Ie+1)-1,Le=Q[Ze],qt=Ze+1,et=Q[qt];if(0>r(Le,W))qt<Pe&&0>r(et,Le)?(Q[Ie]=et,Q[qt]=W,Ie=qt):(Q[Ie]=Le,Q[Ze]=W,Ie=Ze);else if(qt<Pe&&0>r(et,W))Q[Ie]=et,Q[qt]=W,Ie=qt;else break e}}return re}function r(Q,re){var W=Q.sortIndex-re.sortIndex;return W!==0?W:Q.id-re.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var s=Date,l=s.now();t.unstable_now=function(){return s.now()-l}}var u=[],c=[],f=1,m=null,g=3,y=!1,C=!1,O=!1,M=!1,T=typeof setTimeout=="function"?setTimeout:null,E=typeof clearTimeout=="function"?clearTimeout:null,b=typeof setImmediate<"u"?setImmediate:null;function N(Q){for(var re=n(c);re!==null;){if(re.callback===null)i(c);else if(re.startTime<=Q)i(c),re.sortIndex=re.expirationTime,e(u,re);else break;re=n(c)}}function j(Q){if(O=!1,N(Q),!C)if(n(u)!==null)C=!0,q||(q=!0,D());else{var re=n(c);re!==null&&ft(j,re.startTime-Q)}}var q=!1,p=-1,v=5,S=-1;function A(){return M?!0:!(t.unstable_now()-S<v)}function I(){if(M=!1,q){var Q=t.unstable_now();S=Q;var re=!0;try{e:{C=!1,O&&(O=!1,E(p),p=-1),y=!0;var W=g;try{t:{for(N(Q),m=n(u);m!==null&&!(m.expirationTime>Q&&A());){var Ie=m.callback;if(typeof Ie=="function"){m.callback=null,g=m.priorityLevel;var Pe=Ie(m.expirationTime<=Q);if(Q=t.unstable_now(),typeof Pe=="function"){m.callback=Pe,N(Q),re=!0;break t}m===n(u)&&i(u),N(Q)}else i(u);m=n(u)}if(m!==null)re=!0;else{var rn=n(c);rn!==null&&ft(j,rn.startTime-Q),re=!1}}break e}finally{m=null,g=W,y=!1}re=void 0}}finally{re?D():q=!1}}}var D;if(typeof b=="function")D=function(){b(I)};else if(typeof MessageChannel<"u"){var w=new MessageChannel,ze=w.port2;w.port1.onmessage=I,D=function(){ze.postMessage(null)}}else D=function(){T(I,0)};function ft(Q,re){p=T(function(){Q(t.unstable_now())},re)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(Q){Q.callback=null},t.unstable_forceFrameRate=function(Q){0>Q||125<Q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):v=0<Q?Math.floor(1e3/Q):5},t.unstable_getCurrentPriorityLevel=function(){return g},t.unstable_next=function(Q){switch(g){case 1:case 2:case 3:var re=3;break;default:re=g}var W=g;g=re;try{return Q()}finally{g=W}},t.unstable_requestPaint=function(){M=!0},t.unstable_runWithPriority=function(Q,re){switch(Q){case 1:case 2:case 3:case 4:case 5:break;default:Q=3}var W=g;g=Q;try{return re()}finally{g=W}},t.unstable_scheduleCallback=function(Q,re,W){var Ie=t.unstable_now();switch(typeof W=="object"&&W!==null?(W=W.delay,W=typeof W=="number"&&0<W?Ie+W:Ie):W=Ie,Q){case 1:var Pe=-1;break;case 2:Pe=250;break;case 5:Pe=1073741823;break;case 4:Pe=1e4;break;default:Pe=5e3}return Pe=W+Pe,Q={id:f++,callback:re,priorityLevel:Q,startTime:W,expirationTime:Pe,sortIndex:-1},W>Ie?(Q.sortIndex=W,e(c,Q),n(u)===null&&Q===n(c)&&(O?(E(p),p=-1):O=!0,ft(j,W-Ie))):(Q.sortIndex=Pe,e(u,Q),C||y||(C=!0,q||(q=!0,D()))),Q},t.unstable_shouldYield=A,t.unstable_wrapCallback=function(Q){var re=g;return function(){var W=g;g=re;try{return Q.apply(this,arguments)}finally{g=W}}}})(FE);HE.exports=FE;var Zw=HE.exports,qE={exports:{}},Yt={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ww=U;function GE(t){var e="https://react.dev/errors/"+t;if(1<arguments.length){e+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function Wi(){}var Qt={d:{f:Wi,r:function(){throw Error(GE(522))},D:Wi,C:Wi,L:Wi,m:Wi,X:Wi,S:Wi,M:Wi},p:0,findDOMNode:null},Jw=Symbol.for("react.portal");function eR(t,e,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Jw,key:i==null?null:""+i,children:t,containerInfo:e,implementation:n}}var qo=Ww.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function Ah(t,e){if(t==="font")return"";if(typeof e=="string")return e==="use-credentials"?e:""}Yt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Qt;Yt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)throw Error(GE(299));return eR(t,e,null,n)};Yt.flushSync=function(t){var e=qo.T,n=Qt.p;try{if(qo.T=null,Qt.p=2,t)return t()}finally{qo.T=e,Qt.p=n,Qt.d.f()}};Yt.preconnect=function(t,e){typeof t=="string"&&(e?(e=e.crossOrigin,e=typeof e=="string"?e==="use-credentials"?e:"":void 0):e=null,Qt.d.C(t,e))};Yt.prefetchDNS=function(t){typeof t=="string"&&Qt.d.D(t)};Yt.preinit=function(t,e){if(typeof t=="string"&&e&&typeof e.as=="string"){var n=e.as,i=Ah(n,e.crossOrigin),r=typeof e.integrity=="string"?e.integrity:void 0,a=typeof e.fetchPriority=="string"?e.fetchPriority:void 0;n==="style"?Qt.d.S(t,typeof e.precedence=="string"?e.precedence:void 0,{crossOrigin:i,integrity:r,fetchPriority:a}):n==="script"&&Qt.d.X(t,{crossOrigin:i,integrity:r,fetchPriority:a,nonce:typeof e.nonce=="string"?e.nonce:void 0})}};Yt.preinitModule=function(t,e){if(typeof t=="string")if(typeof e=="object"&&e!==null){if(e.as==null||e.as==="script"){var n=Ah(e.as,e.crossOrigin);Qt.d.M(t,{crossOrigin:n,integrity:typeof e.integrity=="string"?e.integrity:void 0,nonce:typeof e.nonce=="string"?e.nonce:void 0})}}else e==null&&Qt.d.M(t)};Yt.preload=function(t,e){if(typeof t=="string"&&typeof e=="object"&&e!==null&&typeof e.as=="string"){var n=e.as,i=Ah(n,e.crossOrigin);Qt.d.L(t,n,{crossOrigin:i,integrity:typeof e.integrity=="string"?e.integrity:void 0,nonce:typeof e.nonce=="string"?e.nonce:void 0,type:typeof e.type=="string"?e.type:void 0,fetchPriority:typeof e.fetchPriority=="string"?e.fetchPriority:void 0,referrerPolicy:typeof e.referrerPolicy=="string"?e.referrerPolicy:void 0,imageSrcSet:typeof e.imageSrcSet=="string"?e.imageSrcSet:void 0,imageSizes:typeof e.imageSizes=="string"?e.imageSizes:void 0,media:typeof e.media=="string"?e.media:void 0})}};Yt.preloadModule=function(t,e){if(typeof t=="string")if(e){var n=Ah(e.as,e.crossOrigin);Qt.d.m(t,{as:typeof e.as=="string"&&e.as!=="script"?e.as:void 0,crossOrigin:n,integrity:typeof e.integrity=="string"?e.integrity:void 0})}else Qt.d.m(t)};Yt.requestFormReset=function(t){Qt.d.r(t)};Yt.unstable_batchedUpdates=function(t,e){return t(e)};Yt.useFormState=function(t,e,n){return qo.H.useFormState(t,e,n)};Yt.useFormStatus=function(){return qo.H.useHostTransitionStatus()};Yt.version="19.1.0";function KE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(KE)}catch(t){console.error(t)}}KE(),qE.exports=Yt;var Fm=qE.exports;const tR=Um(Fm),nR=OE({__proto__:null,default:tR},[Fm]);/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Tt=Zw,QE=U,iR=Fm;function z(t){var e="https://react.dev/errors/"+t;if(1<arguments.length){e+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function YE(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Pl(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function XE(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Ey(t){if(Pl(t)!==t)throw Error(z(188))}function rR(t){var e=t.alternate;if(!e){if(e=Pl(t),e===null)throw Error(z(188));return e!==t?null:t}for(var n=t,i=e;;){var r=n.return;if(r===null)break;var a=r.alternate;if(a===null){if(i=r.return,i!==null){n=i;continue}break}if(r.child===a.child){for(a=r.child;a;){if(a===n)return Ey(r),t;if(a===i)return Ey(r),e;a=a.sibling}throw Error(z(188))}if(n.return!==i.return)n=r,i=a;else{for(var s=!1,l=r.child;l;){if(l===n){s=!0,n=r,i=a;break}if(l===i){s=!0,i=r,n=a;break}l=l.sibling}if(!s){for(l=a.child;l;){if(l===n){s=!0,n=a,i=r;break}if(l===i){s=!0,i=a,n=r;break}l=l.sibling}if(!s)throw Error(z(189))}}if(n.alternate!==i)throw Error(z(190))}if(n.tag!==3)throw Error(z(188));return n.stateNode.current===n?t:e}function $E(t){var e=t.tag;if(e===5||e===26||e===27||e===6)return t;for(t=t.child;t!==null;){if(e=$E(t),e!==null)return e;t=t.sibling}return null}var qe=Object.assign,aR=Symbol.for("react.element"),Cu=Symbol.for("react.transitional.element"),Po=Symbol.for("react.portal"),ts=Symbol.for("react.fragment"),ZE=Symbol.for("react.strict_mode"),dd=Symbol.for("react.profiler"),sR=Symbol.for("react.provider"),WE=Symbol.for("react.consumer"),Si=Symbol.for("react.context"),qm=Symbol.for("react.forward_ref"),md=Symbol.for("react.suspense"),gd=Symbol.for("react.suspense_list"),Gm=Symbol.for("react.memo"),ir=Symbol.for("react.lazy"),pd=Symbol.for("react.activity"),oR=Symbol.for("react.memo_cache_sentinel"),Ty=Symbol.iterator;function bo(t){return t===null||typeof t!="object"?null:(t=Ty&&t[Ty]||t["@@iterator"],typeof t=="function"?t:null)}var lR=Symbol.for("react.client.reference");function yd(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===lR?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case ts:return"Fragment";case dd:return"Profiler";case ZE:return"StrictMode";case md:return"Suspense";case gd:return"SuspenseList";case pd:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case Po:return"Portal";case Si:return(t.displayName||"Context")+".Provider";case WE:return(t._context.displayName||"Context")+".Consumer";case qm:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Gm:return e=t.displayName||null,e!==null?e:yd(t.type)||"Memo";case ir:e=t._payload,t=t._init;try{return yd(t(e))}catch{}}return null}var Lo=Array.isArray,se=QE.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Re=iR.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ua={pending:!1,data:null,method:null,action:null},vd=[],ns=-1;function ui(t){return{current:t}}function Rt(t){0>ns||(t.current=vd[ns],vd[ns]=null,ns--)}function $e(t,e){ns++,vd[ns]=t.current,t.current=e}var ei=ui(null),cl=ui(null),vr=ui(null),Ec=ui(null);function Tc(t,e){switch($e(vr,e),$e(cl,t),$e(ei,null),e.nodeType){case 9:case 11:t=(t=e.documentElement)&&(t=t.namespaceURI)?Rv(t):0;break;default:if(t=e.tagName,e=e.namespaceURI)e=Rv(e),t=gS(e,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}Rt(ei),$e(ei,t)}function ws(){Rt(ei),Rt(cl),Rt(vr)}function _d(t){t.memoizedState!==null&&$e(Ec,t);var e=ei.current,n=gS(e,t.type);e!==n&&($e(cl,t),$e(ei,n))}function Sc(t){cl.current===t&&(Rt(ei),Rt(cl)),Ec.current===t&&(Rt(Ec),El._currentValue=ua)}var Ed=Object.prototype.hasOwnProperty,Km=Tt.unstable_scheduleCallback,_f=Tt.unstable_cancelCallback,uR=Tt.unstable_shouldYield,cR=Tt.unstable_requestPaint,ti=Tt.unstable_now,hR=Tt.unstable_getCurrentPriorityLevel,JE=Tt.unstable_ImmediatePriority,e0=Tt.unstable_UserBlockingPriority,Ac=Tt.unstable_NormalPriority,fR=Tt.unstable_LowPriority,t0=Tt.unstable_IdlePriority,dR=Tt.log,mR=Tt.unstable_setDisableYieldValue,Ll=null,mn=null;function fr(t){if(typeof dR=="function"&&mR(t),mn&&typeof mn.setStrictMode=="function")try{mn.setStrictMode(Ll,t)}catch{}}var gn=Math.clz32?Math.clz32:yR,gR=Math.log,pR=Math.LN2;function yR(t){return t>>>=0,t===0?32:31-(gR(t)/pR|0)|0}var Du=256,Ou=4194304;function ea(t){var e=t&42;if(e!==0)return e;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function bh(t,e,n){var i=t.pendingLanes;if(i===0)return 0;var r=0,a=t.suspendedLanes,s=t.pingedLanes;t=t.warmLanes;var l=i&134217727;return l!==0?(i=l&~a,i!==0?r=ea(i):(s&=l,s!==0?r=ea(s):n||(n=l&~t,n!==0&&(r=ea(n))))):(l=i&~a,l!==0?r=ea(l):s!==0?r=ea(s):n||(n=i&~t,n!==0&&(r=ea(n)))),r===0?0:e!==0&&e!==r&&!(e&a)&&(a=r&-r,n=e&-e,a>=n||a===32&&(n&4194048)!==0)?e:r}function Ul(t,e){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&e)===0}function vR(t,e){switch(t){case 1:case 2:case 4:case 8:case 64:return e+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function n0(){var t=Du;return Du<<=1,!(Du&4194048)&&(Du=256),t}function i0(){var t=Ou;return Ou<<=1,!(Ou&62914560)&&(Ou=4194304),t}function Ef(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function kl(t,e){t.pendingLanes|=e,e!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function _R(t,e,n,i,r,a){var s=t.pendingLanes;t.pendingLanes=n,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=n,t.entangledLanes&=n,t.errorRecoveryDisabledLanes&=n,t.shellSuspendCounter=0;var l=t.entanglements,u=t.expirationTimes,c=t.hiddenUpdates;for(n=s&~n;0<n;){var f=31-gn(n),m=1<<f;l[f]=0,u[f]=-1;var g=c[f];if(g!==null)for(c[f]=null,f=0;f<g.length;f++){var y=g[f];y!==null&&(y.lane&=-536870913)}n&=~m}i!==0&&r0(t,i,0),a!==0&&r===0&&t.tag!==0&&(t.suspendedLanes|=a&~(s&~e))}function r0(t,e,n){t.pendingLanes|=e,t.suspendedLanes&=~e;var i=31-gn(e);t.entangledLanes|=e,t.entanglements[i]=t.entanglements[i]|1073741824|n&4194090}function a0(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var i=31-gn(n),r=1<<i;r&e|t[i]&e&&(t[i]|=e),n&=~r}}function Qm(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function Ym(t){return t&=-t,2<t?8<t?t&134217727?32:268435456:8:2}function s0(){var t=Re.p;return t!==0?t:(t=window.event,t===void 0?32:wS(t.type))}function ER(t,e){var n=Re.p;try{return Re.p=t,e()}finally{Re.p=n}}var jr=Math.random().toString(36).slice(2),jt="__reactFiber$"+jr,tn="__reactProps$"+jr,Ys="__reactContainer$"+jr,Td="__reactEvents$"+jr,TR="__reactListeners$"+jr,SR="__reactHandles$"+jr,Sy="__reactResources$"+jr,zl="__reactMarker$"+jr;function Xm(t){delete t[jt],delete t[tn],delete t[Td],delete t[TR],delete t[SR]}function is(t){var e=t[jt];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Ys]||n[jt]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Dv(t);t!==null;){if(n=t[jt])return n;t=Dv(t)}return e}t=n,n=t.parentNode}return null}function Xs(t){if(t=t[jt]||t[Ys]){var e=t.tag;if(e===5||e===6||e===13||e===26||e===27||e===3)return t}return null}function Uo(t){var e=t.tag;if(e===5||e===26||e===27||e===6)return t.stateNode;throw Error(z(33))}function ds(t){var e=t[Sy];return e||(e=t[Sy]={hoistableStyles:new Map,hoistableScripts:new Map}),e}function bt(t){t[zl]=!0}var o0=new Set,l0={};function Ia(t,e){Rs(t,e),Rs(t+"Capture",e)}function Rs(t,e){for(l0[t]=e,t=0;t<e.length;t++)o0.add(e[t])}var AR=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ay={},by={};function bR(t){return Ed.call(by,t)?!0:Ed.call(Ay,t)?!1:AR.test(t)?by[t]=!0:(Ay[t]=!0,!1)}function $u(t,e,n){if(bR(e))if(n===null)t.removeAttribute(e);else{switch(typeof n){case"undefined":case"function":case"symbol":t.removeAttribute(e);return;case"boolean":var i=e.toLowerCase().slice(0,5);if(i!=="data-"&&i!=="aria-"){t.removeAttribute(e);return}}t.setAttribute(e,""+n)}}function Nu(t,e,n){if(n===null)t.removeAttribute(e);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(e);return}t.setAttribute(e,""+n)}}function vi(t,e,n,i){if(i===null)t.removeAttribute(n);else{switch(typeof i){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(n);return}t.setAttributeNS(e,n,""+i)}}var Tf,wy;function Ya(t){if(Tf===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Tf=e&&e[1]||"",wy=-1<n.stack.indexOf(`
    at`)?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Tf+t+wy}var Sf=!1;function Af(t,e){if(!t||Sf)return"";Sf=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var i={DetermineComponentFrameRoot:function(){try{if(e){var m=function(){throw Error()};if(Object.defineProperty(m.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(m,[])}catch(y){var g=y}Reflect.construct(t,[],m)}else{try{m.call()}catch(y){g=y}t.call(m.prototype)}}else{try{throw Error()}catch(y){g=y}(m=t())&&typeof m.catch=="function"&&m.catch(function(){})}}catch(y){if(y&&g&&typeof y.stack=="string")return[y.stack,g.stack]}return[null,null]}};i.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var r=Object.getOwnPropertyDescriptor(i.DetermineComponentFrameRoot,"name");r&&r.configurable&&Object.defineProperty(i.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var a=i.DetermineComponentFrameRoot(),s=a[0],l=a[1];if(s&&l){var u=s.split(`
`),c=l.split(`
`);for(r=i=0;i<u.length&&!u[i].includes("DetermineComponentFrameRoot");)i++;for(;r<c.length&&!c[r].includes("DetermineComponentFrameRoot");)r++;if(i===u.length||r===c.length)for(i=u.length-1,r=c.length-1;1<=i&&0<=r&&u[i]!==c[r];)r--;for(;1<=i&&0<=r;i--,r--)if(u[i]!==c[r]){if(i!==1||r!==1)do if(i--,r--,0>r||u[i]!==c[r]){var f=`
`+u[i].replace(" at new "," at ");return t.displayName&&f.includes("<anonymous>")&&(f=f.replace("<anonymous>",t.displayName)),f}while(1<=i&&0<=r);break}}}finally{Sf=!1,Error.prepareStackTrace=n}return(n=t?t.displayName||t.name:"")?Ya(n):""}function wR(t){switch(t.tag){case 26:case 27:case 5:return Ya(t.type);case 16:return Ya("Lazy");case 13:return Ya("Suspense");case 19:return Ya("SuspenseList");case 0:case 15:return Af(t.type,!1);case 11:return Af(t.type.render,!1);case 1:return Af(t.type,!0);case 31:return Ya("Activity");default:return""}}function Ry(t){try{var e="";do e+=wR(t),t=t.return;while(t);return e}catch(n){return`
Error generating stack: `+n.message+`
`+n.stack}}function bn(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function u0(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function RR(t){var e=u0(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),i=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var r=n.get,a=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return r.call(this)},set:function(s){i=""+s,a.call(this,s)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(s){i=""+s},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function bc(t){t._valueTracker||(t._valueTracker=RR(t))}function c0(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),i="";return t&&(i=u0(t)?t.checked?"true":"false":t.value),t=i,t!==n?(e.setValue(t),!0):!1}function wc(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var IR=/[\n"\\]/g;function In(t){return t.replace(IR,function(e){return"\\"+e.charCodeAt(0).toString(16)+" "})}function Sd(t,e,n,i,r,a,s,l){t.name="",s!=null&&typeof s!="function"&&typeof s!="symbol"&&typeof s!="boolean"?t.type=s:t.removeAttribute("type"),e!=null?s==="number"?(e===0&&t.value===""||t.value!=e)&&(t.value=""+bn(e)):t.value!==""+bn(e)&&(t.value=""+bn(e)):s!=="submit"&&s!=="reset"||t.removeAttribute("value"),e!=null?Ad(t,s,bn(e)):n!=null?Ad(t,s,bn(n)):i!=null&&t.removeAttribute("value"),r==null&&a!=null&&(t.defaultChecked=!!a),r!=null&&(t.checked=r&&typeof r!="function"&&typeof r!="symbol"),l!=null&&typeof l!="function"&&typeof l!="symbol"&&typeof l!="boolean"?t.name=""+bn(l):t.removeAttribute("name")}function h0(t,e,n,i,r,a,s,l){if(a!=null&&typeof a!="function"&&typeof a!="symbol"&&typeof a!="boolean"&&(t.type=a),e!=null||n!=null){if(!(a!=="submit"&&a!=="reset"||e!=null))return;n=n!=null?""+bn(n):"",e=e!=null?""+bn(e):n,l||e===t.value||(t.value=e),t.defaultValue=e}i=i??r,i=typeof i!="function"&&typeof i!="symbol"&&!!i,t.checked=l?t.checked:!!i,t.defaultChecked=!!i,s!=null&&typeof s!="function"&&typeof s!="symbol"&&typeof s!="boolean"&&(t.name=s)}function Ad(t,e,n){e==="number"&&wc(t.ownerDocument)===t||t.defaultValue===""+n||(t.defaultValue=""+n)}function ms(t,e,n,i){if(t=t.options,e){e={};for(var r=0;r<n.length;r++)e["$"+n[r]]=!0;for(n=0;n<t.length;n++)r=e.hasOwnProperty("$"+t[n].value),t[n].selected!==r&&(t[n].selected=r),r&&i&&(t[n].defaultSelected=!0)}else{for(n=""+bn(n),e=null,r=0;r<t.length;r++){if(t[r].value===n){t[r].selected=!0,i&&(t[r].defaultSelected=!0);return}e!==null||t[r].disabled||(e=t[r])}e!==null&&(e.selected=!0)}}function f0(t,e,n){if(e!=null&&(e=""+bn(e),e!==t.value&&(t.value=e),n==null)){t.defaultValue!==e&&(t.defaultValue=e);return}t.defaultValue=n!=null?""+bn(n):""}function d0(t,e,n,i){if(e==null){if(i!=null){if(n!=null)throw Error(z(92));if(Lo(i)){if(1<i.length)throw Error(z(93));i=i[0]}n=i}n==null&&(n=""),e=n}n=bn(e),t.defaultValue=n,i=t.textContent,i===n&&i!==""&&i!==null&&(t.value=i)}function Is(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var CR=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Iy(t,e,n){var i=e.indexOf("--")===0;n==null||typeof n=="boolean"||n===""?i?t.setProperty(e,""):e==="float"?t.cssFloat="":t[e]="":i?t.setProperty(e,n):typeof n!="number"||n===0||CR.has(e)?e==="float"?t.cssFloat=n:t[e]=(""+n).trim():t[e]=n+"px"}function m0(t,e,n){if(e!=null&&typeof e!="object")throw Error(z(62));if(t=t.style,n!=null){for(var i in n)!n.hasOwnProperty(i)||e!=null&&e.hasOwnProperty(i)||(i.indexOf("--")===0?t.setProperty(i,""):i==="float"?t.cssFloat="":t[i]="");for(var r in e)i=e[r],e.hasOwnProperty(r)&&n[r]!==i&&Iy(t,r,i)}else for(var a in e)e.hasOwnProperty(a)&&Iy(t,a,e[a])}function $m(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var DR=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),OR=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Zu(t){return OR.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}var bd=null;function Zm(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var rs=null,gs=null;function Cy(t){var e=Xs(t);if(e&&(t=e.stateNode)){var n=t[tn]||null;e:switch(t=e.stateNode,e.type){case"input":if(Sd(t,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+In(""+e)+'"][type="radio"]'),e=0;e<n.length;e++){var i=n[e];if(i!==t&&i.form===t.form){var r=i[tn]||null;if(!r)throw Error(z(90));Sd(i,r.value,r.defaultValue,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name)}}for(e=0;e<n.length;e++)i=n[e],i.form===t.form&&c0(i)}break e;case"textarea":f0(t,n.value,n.defaultValue);break e;case"select":e=n.value,e!=null&&ms(t,!!n.multiple,e,!1)}}}var bf=!1;function g0(t,e,n){if(bf)return t(e,n);bf=!0;try{var i=t(e);return i}finally{if(bf=!1,(rs!==null||gs!==null)&&(Vh(),rs&&(e=rs,t=gs,gs=rs=null,Cy(e),t)))for(e=0;e<t.length;e++)Cy(t[e])}}function hl(t,e){var n=t.stateNode;if(n===null)return null;var i=n[tn]||null;if(i===null)return null;n=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(t=t.type,i=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!i;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(z(231,e,typeof n));return n}var xi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),wd=!1;if(xi)try{var wo={};Object.defineProperty(wo,"passive",{get:function(){wd=!0}}),window.addEventListener("test",wo,wo),window.removeEventListener("test",wo,wo)}catch{wd=!1}var dr=null,Wm=null,Wu=null;function p0(){if(Wu)return Wu;var t,e=Wm,n=e.length,i,r="value"in dr?dr.value:dr.textContent,a=r.length;for(t=0;t<n&&e[t]===r[t];t++);var s=n-t;for(i=1;i<=s&&e[n-i]===r[a-i];i++);return Wu=r.slice(t,1<i?1-i:void 0)}function Ju(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Mu(){return!0}function Dy(){return!1}function nn(t){function e(n,i,r,a,s){this._reactName=n,this._targetInst=r,this.type=i,this.nativeEvent=a,this.target=s,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(a):a[l]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?Mu:Dy,this.isPropagationStopped=Dy,this}return qe(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Mu)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Mu)},persist:function(){},isPersistent:Mu}),e}var Ca={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},wh=nn(Ca),jl=qe({},Ca,{view:0,detail:0}),NR=nn(jl),wf,Rf,Ro,Rh=qe({},jl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Jm,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ro&&(Ro&&t.type==="mousemove"?(wf=t.screenX-Ro.screenX,Rf=t.screenY-Ro.screenY):Rf=wf=0,Ro=t),wf)},movementY:function(t){return"movementY"in t?t.movementY:Rf}}),Oy=nn(Rh),MR=qe({},Rh,{dataTransfer:0}),xR=nn(MR),VR=qe({},jl,{relatedTarget:0}),If=nn(VR),PR=qe({},Ca,{animationName:0,elapsedTime:0,pseudoElement:0}),LR=nn(PR),UR=qe({},Ca,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),kR=nn(UR),zR=qe({},Ca,{data:0}),Ny=nn(zR),jR={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},BR={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},HR={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function FR(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=HR[t])?!!e[t]:!1}function Jm(){return FR}var qR=qe({},jl,{key:function(t){if(t.key){var e=jR[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Ju(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?BR[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Jm,charCode:function(t){return t.type==="keypress"?Ju(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Ju(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),GR=nn(qR),KR=qe({},Rh,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),My=nn(KR),QR=qe({},jl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Jm}),YR=nn(QR),XR=qe({},Ca,{propertyName:0,elapsedTime:0,pseudoElement:0}),$R=nn(XR),ZR=qe({},Rh,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),WR=nn(ZR),JR=qe({},Ca,{newState:0,oldState:0}),e1=nn(JR),t1=[9,13,27,32],eg=xi&&"CompositionEvent"in window,Go=null;xi&&"documentMode"in document&&(Go=document.documentMode);var n1=xi&&"TextEvent"in window&&!Go,y0=xi&&(!eg||Go&&8<Go&&11>=Go),xy=" ",Vy=!1;function v0(t,e){switch(t){case"keyup":return t1.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function _0(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var as=!1;function i1(t,e){switch(t){case"compositionend":return _0(e);case"keypress":return e.which!==32?null:(Vy=!0,xy);case"textInput":return t=e.data,t===xy&&Vy?null:t;default:return null}}function r1(t,e){if(as)return t==="compositionend"||!eg&&v0(t,e)?(t=p0(),Wu=Wm=dr=null,as=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return y0&&e.locale!=="ko"?null:e.data;default:return null}}var a1={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Py(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!a1[t.type]:e==="textarea"}function E0(t,e,n,i){rs?gs?gs.push(i):gs=[i]:rs=i,e=Fc(e,"onChange"),0<e.length&&(n=new wh("onChange","change",null,n,i),t.push({event:n,listeners:e}))}var Ko=null,fl=null;function s1(t){fS(t,0)}function Ih(t){var e=Uo(t);if(c0(e))return t}function Ly(t,e){if(t==="change")return e}var T0=!1;if(xi){var Cf;if(xi){var Df="oninput"in document;if(!Df){var Uy=document.createElement("div");Uy.setAttribute("oninput","return;"),Df=typeof Uy.oninput=="function"}Cf=Df}else Cf=!1;T0=Cf&&(!document.documentMode||9<document.documentMode)}function ky(){Ko&&(Ko.detachEvent("onpropertychange",S0),fl=Ko=null)}function S0(t){if(t.propertyName==="value"&&Ih(fl)){var e=[];E0(e,fl,t,Zm(t)),g0(s1,e)}}function o1(t,e,n){t==="focusin"?(ky(),Ko=e,fl=n,Ko.attachEvent("onpropertychange",S0)):t==="focusout"&&ky()}function l1(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Ih(fl)}function u1(t,e){if(t==="click")return Ih(e)}function c1(t,e){if(t==="input"||t==="change")return Ih(e)}function h1(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var _n=typeof Object.is=="function"?Object.is:h1;function dl(t,e){if(_n(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var r=n[i];if(!Ed.call(e,r)||!_n(t[r],e[r]))return!1}return!0}function zy(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function jy(t,e){var n=zy(t);t=0;for(var i;n;){if(n.nodeType===3){if(i=t+n.textContent.length,t<=e&&i>=e)return{node:n,offset:e-t};t=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=zy(n)}}function A0(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?A0(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function b0(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var e=wc(t.document);e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=wc(t.document)}return e}function tg(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}var f1=xi&&"documentMode"in document&&11>=document.documentMode,ss=null,Rd=null,Qo=null,Id=!1;function By(t,e,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Id||ss==null||ss!==wc(i)||(i=ss,"selectionStart"in i&&tg(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),Qo&&dl(Qo,i)||(Qo=i,i=Fc(Rd,"onSelect"),0<i.length&&(e=new wh("onSelect","select",null,e,n),t.push({event:e,listeners:i}),e.target=ss)))}function Jr(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var os={animationend:Jr("Animation","AnimationEnd"),animationiteration:Jr("Animation","AnimationIteration"),animationstart:Jr("Animation","AnimationStart"),transitionrun:Jr("Transition","TransitionRun"),transitionstart:Jr("Transition","TransitionStart"),transitioncancel:Jr("Transition","TransitionCancel"),transitionend:Jr("Transition","TransitionEnd")},Of={},w0={};xi&&(w0=document.createElement("div").style,"AnimationEvent"in window||(delete os.animationend.animation,delete os.animationiteration.animation,delete os.animationstart.animation),"TransitionEvent"in window||delete os.transitionend.transition);function Da(t){if(Of[t])return Of[t];if(!os[t])return t;var e=os[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in w0)return Of[t]=e[n];return t}var R0=Da("animationend"),I0=Da("animationiteration"),C0=Da("animationstart"),d1=Da("transitionrun"),m1=Da("transitionstart"),g1=Da("transitioncancel"),D0=Da("transitionend"),O0=new Map,Cd="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Cd.push("scrollEnd");function Fn(t,e){O0.set(t,e),Ia(e,[t])}var Hy=new WeakMap;function Cn(t,e){if(typeof t=="object"&&t!==null){var n=Hy.get(t);return n!==void 0?n:(e={value:t,source:e,stack:Ry(e)},Hy.set(t,e),e)}return{value:t,source:e,stack:Ry(e)}}var An=[],ls=0,ng=0;function Ch(){for(var t=ls,e=ng=ls=0;e<t;){var n=An[e];An[e++]=null;var i=An[e];An[e++]=null;var r=An[e];An[e++]=null;var a=An[e];if(An[e++]=null,i!==null&&r!==null){var s=i.pending;s===null?r.next=r:(r.next=s.next,s.next=r),i.pending=r}a!==0&&N0(n,r,a)}}function Dh(t,e,n,i){An[ls++]=t,An[ls++]=e,An[ls++]=n,An[ls++]=i,ng|=i,t.lanes|=i,t=t.alternate,t!==null&&(t.lanes|=i)}function ig(t,e,n,i){return Dh(t,e,n,i),Rc(t)}function $s(t,e){return Dh(t,null,null,e),Rc(t)}function N0(t,e,n){t.lanes|=n;var i=t.alternate;i!==null&&(i.lanes|=n);for(var r=!1,a=t.return;a!==null;)a.childLanes|=n,i=a.alternate,i!==null&&(i.childLanes|=n),a.tag===22&&(t=a.stateNode,t===null||t._visibility&1||(r=!0)),t=a,a=a.return;return t.tag===3?(a=t.stateNode,r&&e!==null&&(r=31-gn(n),t=a.hiddenUpdates,i=t[r],i===null?t[r]=[e]:i.push(e),e.lane=n|536870912),a):null}function Rc(t){if(50<il)throw il=0,Xd=null,Error(z(185));for(var e=t.return;e!==null;)t=e,e=t.return;return t.tag===3?t.stateNode:null}var us={};function p1(t,e,n,i){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function fn(t,e,n,i){return new p1(t,e,n,i)}function rg(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Di(t,e){var n=t.alternate;return n===null?(n=fn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&65011712,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n.refCleanup=t.refCleanup,n}function M0(t,e){t.flags&=65011714;var n=t.alternate;return n===null?(t.childLanes=0,t.lanes=e,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,t.type=n.type,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),t}function ec(t,e,n,i,r,a){var s=0;if(i=t,typeof t=="function")rg(t)&&(s=1);else if(typeof t=="string")s=vI(t,n,ei.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case pd:return t=fn(31,n,e,r),t.elementType=pd,t.lanes=a,t;case ts:return ca(n.children,r,a,e);case ZE:s=8,r|=24;break;case dd:return t=fn(12,n,e,r|2),t.elementType=dd,t.lanes=a,t;case md:return t=fn(13,n,e,r),t.elementType=md,t.lanes=a,t;case gd:return t=fn(19,n,e,r),t.elementType=gd,t.lanes=a,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case sR:case Si:s=10;break e;case WE:s=9;break e;case qm:s=11;break e;case Gm:s=14;break e;case ir:s=16,i=null;break e}s=29,n=Error(z(130,t===null?"null":typeof t,"")),i=null}return e=fn(s,n,e,r),e.elementType=t,e.type=i,e.lanes=a,e}function ca(t,e,n,i){return t=fn(7,t,i,e),t.lanes=n,t}function Nf(t,e,n){return t=fn(6,t,null,e),t.lanes=n,t}function Mf(t,e,n){return e=fn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}var cs=[],hs=0,Ic=null,Cc=0,wn=[],Rn=0,ha=null,Ai=1,bi="";function ta(t,e){cs[hs++]=Cc,cs[hs++]=Ic,Ic=t,Cc=e}function x0(t,e,n){wn[Rn++]=Ai,wn[Rn++]=bi,wn[Rn++]=ha,ha=t;var i=Ai;t=bi;var r=32-gn(i)-1;i&=~(1<<r),n+=1;var a=32-gn(e)+r;if(30<a){var s=r-r%5;a=(i&(1<<s)-1).toString(32),i>>=s,r-=s,Ai=1<<32-gn(e)+r|n<<r|i,bi=a+t}else Ai=1<<a|n<<r|i,bi=t}function ag(t){t.return!==null&&(ta(t,1),x0(t,1,0))}function sg(t){for(;t===Ic;)Ic=cs[--hs],cs[hs]=null,Cc=cs[--hs],cs[hs]=null;for(;t===ha;)ha=wn[--Rn],wn[Rn]=null,bi=wn[--Rn],wn[Rn]=null,Ai=wn[--Rn],wn[Rn]=null}var Kt=null,nt=null,we=!1,fa=null,Zn=!1,Dd=Error(z(519));function ya(t){var e=Error(z(418,""));throw ml(Cn(e,t)),Dd}function Fy(t){var e=t.stateNode,n=t.type,i=t.memoizedProps;switch(e[jt]=t,e[tn]=i,n){case"dialog":pe("cancel",e),pe("close",e);break;case"iframe":case"object":case"embed":pe("load",e);break;case"video":case"audio":for(n=0;n<yl.length;n++)pe(yl[n],e);break;case"source":pe("error",e);break;case"img":case"image":case"link":pe("error",e),pe("load",e);break;case"details":pe("toggle",e);break;case"input":pe("invalid",e),h0(e,i.value,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name,!0),bc(e);break;case"select":pe("invalid",e);break;case"textarea":pe("invalid",e),d0(e,i.value,i.defaultValue,i.children),bc(e)}n=i.children,typeof n!="string"&&typeof n!="number"&&typeof n!="bigint"||e.textContent===""+n||i.suppressHydrationWarning===!0||mS(e.textContent,n)?(i.popover!=null&&(pe("beforetoggle",e),pe("toggle",e)),i.onScroll!=null&&pe("scroll",e),i.onScrollEnd!=null&&pe("scrollend",e),i.onClick!=null&&(e.onclick=Uh),e=!0):e=!1,e||ya(t)}function qy(t){for(Kt=t.return;Kt;)switch(Kt.tag){case 5:case 13:Zn=!1;return;case 27:case 3:Zn=!0;return;default:Kt=Kt.return}}function Io(t){if(t!==Kt)return!1;if(!we)return qy(t),we=!0,!1;var e=t.tag,n;if((n=e!==3&&e!==27)&&((n=e===5)&&(n=t.type,n=!(n!=="form"&&n!=="button")||tm(t.type,t.memoizedProps)),n=!n),n&&nt&&ya(t),qy(t),e===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(z(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8)if(n=t.data,n==="/$"){if(e===0){nt=jn(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++;t=t.nextSibling}nt=null}}else e===27?(e=nt,Br(t.type)?(t=rm,rm=null,nt=t):nt=e):nt=Kt?jn(t.stateNode.nextSibling):null;return!0}function Bl(){nt=Kt=null,we=!1}function Gy(){var t=fa;return t!==null&&(Wt===null?Wt=t:Wt.push.apply(Wt,t),fa=null),t}function ml(t){fa===null?fa=[t]:fa.push(t)}var Od=ui(null),Oa=null,wi=null;function ar(t,e,n){$e(Od,e._currentValue),e._currentValue=n}function Oi(t){t._currentValue=Od.current,Rt(Od)}function Nd(t,e,n){for(;t!==null;){var i=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),t===n)break;t=t.return}}function Md(t,e,n,i){var r=t.child;for(r!==null&&(r.return=t);r!==null;){var a=r.dependencies;if(a!==null){var s=r.child;a=a.firstContext;e:for(;a!==null;){var l=a;a=r;for(var u=0;u<e.length;u++)if(l.context===e[u]){a.lanes|=n,l=a.alternate,l!==null&&(l.lanes|=n),Nd(a.return,n,t),i||(s=null);break e}a=l.next}}else if(r.tag===18){if(s=r.return,s===null)throw Error(z(341));s.lanes|=n,a=s.alternate,a!==null&&(a.lanes|=n),Nd(s,n,t),s=null}else s=r.child;if(s!==null)s.return=r;else for(s=r;s!==null;){if(s===t){s=null;break}if(r=s.sibling,r!==null){r.return=s.return,s=r;break}s=s.return}r=s}}function Hl(t,e,n,i){t=null;for(var r=e,a=!1;r!==null;){if(!a){if(r.flags&524288)a=!0;else if(r.flags&262144)break}if(r.tag===10){var s=r.alternate;if(s===null)throw Error(z(387));if(s=s.memoizedProps,s!==null){var l=r.type;_n(r.pendingProps.value,s.value)||(t!==null?t.push(l):t=[l])}}else if(r===Ec.current){if(s=r.alternate,s===null)throw Error(z(387));s.memoizedState.memoizedState!==r.memoizedState.memoizedState&&(t!==null?t.push(El):t=[El])}r=r.return}t!==null&&Md(e,t,n,i),e.flags|=262144}function Dc(t){for(t=t.firstContext;t!==null;){if(!_n(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function va(t){Oa=t,wi=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function Bt(t){return V0(Oa,t)}function xu(t,e){return Oa===null&&va(t),V0(t,e)}function V0(t,e){var n=e._currentValue;if(e={context:e,memoizedValue:n,next:null},wi===null){if(t===null)throw Error(z(308));wi=e,t.dependencies={lanes:0,firstContext:e},t.flags|=524288}else wi=wi.next=e;return n}var y1=typeof AbortController<"u"?AbortController:function(){var t=[],e=this.signal={aborted:!1,addEventListener:function(n,i){t.push(i)}};this.abort=function(){e.aborted=!0,t.forEach(function(n){return n()})}},v1=Tt.unstable_scheduleCallback,_1=Tt.unstable_NormalPriority,pt={$$typeof:Si,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function og(){return{controller:new y1,data:new Map,refCount:0}}function Fl(t){t.refCount--,t.refCount===0&&v1(_1,function(){t.controller.abort()})}var Yo=null,xd=0,Cs=0,ps=null;function E1(t,e){if(Yo===null){var n=Yo=[];xd=0,Cs=Og(),ps={status:"pending",value:void 0,then:function(i){n.push(i)}}}return xd++,e.then(Ky,Ky),e}function Ky(){if(--xd===0&&Yo!==null){ps!==null&&(ps.status="fulfilled");var t=Yo;Yo=null,Cs=0,ps=null;for(var e=0;e<t.length;e++)(0,t[e])()}}function T1(t,e){var n=[],i={status:"pending",value:null,reason:null,then:function(r){n.push(r)}};return t.then(function(){i.status="fulfilled",i.value=e;for(var r=0;r<n.length;r++)(0,n[r])(e)},function(r){for(i.status="rejected",i.reason=r,r=0;r<n.length;r++)(0,n[r])(void 0)}),i}var Qy=se.S;se.S=function(t,e){typeof e=="object"&&e!==null&&typeof e.then=="function"&&E1(t,e),Qy!==null&&Qy(t,e)};var da=ui(null);function lg(){var t=da.current;return t!==null?t:Be.pooledCache}function tc(t,e){e===null?$e(da,da.current):$e(da,e.pool)}function P0(){var t=lg();return t===null?null:{parent:pt._currentValue,pool:t}}var ql=Error(z(460)),L0=Error(z(474)),Oh=Error(z(542)),Vd={then:function(){}};function Yy(t){return t=t.status,t==="fulfilled"||t==="rejected"}function Vu(){}function U0(t,e,n){switch(n=t[n],n===void 0?t.push(e):n!==e&&(e.then(Vu,Vu),e=n),e.status){case"fulfilled":return e.value;case"rejected":throw t=e.reason,$y(t),t;default:if(typeof e.status=="string")e.then(Vu,Vu);else{if(t=Be,t!==null&&100<t.shellSuspendCounter)throw Error(z(482));t=e,t.status="pending",t.then(function(i){if(e.status==="pending"){var r=e;r.status="fulfilled",r.value=i}},function(i){if(e.status==="pending"){var r=e;r.status="rejected",r.reason=i}})}switch(e.status){case"fulfilled":return e.value;case"rejected":throw t=e.reason,$y(t),t}throw Xo=e,ql}}var Xo=null;function Xy(){if(Xo===null)throw Error(z(459));var t=Xo;return Xo=null,t}function $y(t){if(t===ql||t===Oh)throw Error(z(483))}var rr=!1;function ug(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Pd(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function _r(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function Er(t,e,n){var i=t.updateQueue;if(i===null)return null;if(i=i.shared,Me&2){var r=i.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),i.pending=e,e=Rc(t),N0(t,null,n),e}return Dh(t,i,e,n),Rc(t)}function $o(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194048)!==0)){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,a0(t,n)}}function xf(t,e){var n=t.updateQueue,i=t.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var r=null,a=null;if(n=n.firstBaseUpdate,n!==null){do{var s={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};a===null?r=a=s:a=a.next=s,n=n.next}while(n!==null);a===null?r=a=e:a=a.next=e}else r=a=e;n={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:a,shared:i.shared,callbacks:i.callbacks},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}var Ld=!1;function Zo(){if(Ld){var t=ps;if(t!==null)throw t}}function Wo(t,e,n,i){Ld=!1;var r=t.updateQueue;rr=!1;var a=r.firstBaseUpdate,s=r.lastBaseUpdate,l=r.shared.pending;if(l!==null){r.shared.pending=null;var u=l,c=u.next;u.next=null,s===null?a=c:s.next=c,s=u;var f=t.alternate;f!==null&&(f=f.updateQueue,l=f.lastBaseUpdate,l!==s&&(l===null?f.firstBaseUpdate=c:l.next=c,f.lastBaseUpdate=u))}if(a!==null){var m=r.baseState;s=0,f=c=u=null,l=a;do{var g=l.lane&-536870913,y=g!==l.lane;if(y?(Ae&g)===g:(i&g)===g){g!==0&&g===Cs&&(Ld=!0),f!==null&&(f=f.next={lane:0,tag:l.tag,payload:l.payload,callback:null,next:null});e:{var C=t,O=l;g=e;var M=n;switch(O.tag){case 1:if(C=O.payload,typeof C=="function"){m=C.call(M,m,g);break e}m=C;break e;case 3:C.flags=C.flags&-65537|128;case 0:if(C=O.payload,g=typeof C=="function"?C.call(M,m,g):C,g==null)break e;m=qe({},m,g);break e;case 2:rr=!0}}g=l.callback,g!==null&&(t.flags|=64,y&&(t.flags|=8192),y=r.callbacks,y===null?r.callbacks=[g]:y.push(g))}else y={lane:g,tag:l.tag,payload:l.payload,callback:l.callback,next:null},f===null?(c=f=y,u=m):f=f.next=y,s|=g;if(l=l.next,l===null){if(l=r.shared.pending,l===null)break;y=l,l=y.next,y.next=null,r.lastBaseUpdate=y,r.shared.pending=null}}while(!0);f===null&&(u=m),r.baseState=u,r.firstBaseUpdate=c,r.lastBaseUpdate=f,a===null&&(r.shared.lanes=0),xr|=s,t.lanes=s,t.memoizedState=m}}function k0(t,e){if(typeof t!="function")throw Error(z(191,t));t.call(e)}function z0(t,e){var n=t.callbacks;if(n!==null)for(t.callbacks=null,t=0;t<n.length;t++)k0(n[t],e)}var Ds=ui(null),Oc=ui(0);function Zy(t,e){t=Li,$e(Oc,t),$e(Ds,e),Li=t|e.baseLanes}function Ud(){$e(Oc,Li),$e(Ds,Ds.current)}function cg(){Li=Oc.current,Rt(Ds),Rt(Oc)}var Nr=0,me=null,Ve=null,ct=null,Nc=!1,ys=!1,_a=!1,Mc=0,gl=0,vs=null,S1=0;function rt(){throw Error(z(321))}function hg(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!_n(t[n],e[n]))return!1;return!0}function fg(t,e,n,i,r,a){return Nr=a,me=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,se.H=t===null||t.memoizedState===null?pT:yT,_a=!1,a=n(i,r),_a=!1,ys&&(a=B0(e,n,i,r)),j0(t),a}function j0(t){se.H=xc;var e=Ve!==null&&Ve.next!==null;if(Nr=0,ct=Ve=me=null,Nc=!1,gl=0,vs=null,e)throw Error(z(300));t===null||wt||(t=t.dependencies,t!==null&&Dc(t)&&(wt=!0))}function B0(t,e,n,i){me=t;var r=0;do{if(ys&&(vs=null),gl=0,ys=!1,25<=r)throw Error(z(301));if(r+=1,ct=Ve=null,t.updateQueue!=null){var a=t.updateQueue;a.lastEffect=null,a.events=null,a.stores=null,a.memoCache!=null&&(a.memoCache.index=0)}se.H=D1,a=e(n,i)}while(ys);return a}function A1(){var t=se.H,e=t.useState()[0];return e=typeof e.then=="function"?Gl(e):e,t=t.useState()[0],(Ve!==null?Ve.memoizedState:null)!==t&&(me.flags|=1024),e}function dg(){var t=Mc!==0;return Mc=0,t}function mg(t,e,n){e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~n}function gg(t){if(Nc){for(t=t.memoizedState;t!==null;){var e=t.queue;e!==null&&(e.pending=null),t=t.next}Nc=!1}Nr=0,ct=Ve=me=null,ys=!1,gl=Mc=0,vs=null}function Xt(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ct===null?me.memoizedState=ct=t:ct=ct.next=t,ct}function ht(){if(Ve===null){var t=me.alternate;t=t!==null?t.memoizedState:null}else t=Ve.next;var e=ct===null?me.memoizedState:ct.next;if(e!==null)ct=e,Ve=t;else{if(t===null)throw me.alternate===null?Error(z(467)):Error(z(310));Ve=t,t={memoizedState:Ve.memoizedState,baseState:Ve.baseState,baseQueue:Ve.baseQueue,queue:Ve.queue,next:null},ct===null?me.memoizedState=ct=t:ct=ct.next=t}return ct}function pg(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Gl(t){var e=gl;return gl+=1,vs===null&&(vs=[]),t=U0(vs,t,e),e=me,(ct===null?e.memoizedState:ct.next)===null&&(e=e.alternate,se.H=e===null||e.memoizedState===null?pT:yT),t}function Nh(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return Gl(t);if(t.$$typeof===Si)return Bt(t)}throw Error(z(438,String(t)))}function yg(t){var e=null,n=me.updateQueue;if(n!==null&&(e=n.memoCache),e==null){var i=me.alternate;i!==null&&(i=i.updateQueue,i!==null&&(i=i.memoCache,i!=null&&(e={data:i.data.map(function(r){return r.slice()}),index:0})))}if(e==null&&(e={data:[],index:0}),n===null&&(n=pg(),me.updateQueue=n),n.memoCache=e,n=e.data[e.index],n===void 0)for(n=e.data[e.index]=Array(t),i=0;i<t;i++)n[i]=oR;return e.index++,n}function Vi(t,e){return typeof e=="function"?e(t):e}function nc(t){var e=ht();return vg(e,Ve,t)}function vg(t,e,n){var i=t.queue;if(i===null)throw Error(z(311));i.lastRenderedReducer=n;var r=t.baseQueue,a=i.pending;if(a!==null){if(r!==null){var s=r.next;r.next=a.next,a.next=s}e.baseQueue=r=a,i.pending=null}if(a=t.baseState,r===null)t.memoizedState=a;else{e=r.next;var l=s=null,u=null,c=e,f=!1;do{var m=c.lane&-536870913;if(m!==c.lane?(Ae&m)===m:(Nr&m)===m){var g=c.revertLane;if(g===0)u!==null&&(u=u.next={lane:0,revertLane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),m===Cs&&(f=!0);else if((Nr&g)===g){c=c.next,g===Cs&&(f=!0);continue}else m={lane:0,revertLane:c.revertLane,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null},u===null?(l=u=m,s=a):u=u.next=m,me.lanes|=g,xr|=g;m=c.action,_a&&n(a,m),a=c.hasEagerState?c.eagerState:n(a,m)}else g={lane:m,revertLane:c.revertLane,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null},u===null?(l=u=g,s=a):u=u.next=g,me.lanes|=m,xr|=m;c=c.next}while(c!==null&&c!==e);if(u===null?s=a:u.next=l,!_n(a,t.memoizedState)&&(wt=!0,f&&(n=ps,n!==null)))throw n;t.memoizedState=a,t.baseState=s,t.baseQueue=u,i.lastRenderedState=a}return r===null&&(i.lanes=0),[t.memoizedState,i.dispatch]}function Vf(t){var e=ht(),n=e.queue;if(n===null)throw Error(z(311));n.lastRenderedReducer=t;var i=n.dispatch,r=n.pending,a=e.memoizedState;if(r!==null){n.pending=null;var s=r=r.next;do a=t(a,s.action),s=s.next;while(s!==r);_n(a,e.memoizedState)||(wt=!0),e.memoizedState=a,e.baseQueue===null&&(e.baseState=a),n.lastRenderedState=a}return[a,i]}function H0(t,e,n){var i=me,r=ht(),a=we;if(a){if(n===void 0)throw Error(z(407));n=n()}else n=e();var s=!_n((Ve||r).memoizedState,n);s&&(r.memoizedState=n,wt=!0),r=r.queue;var l=G0.bind(null,i,r,t);if(Kl(2048,8,l,[t]),r.getSnapshot!==e||s||ct!==null&&ct.memoizedState.tag&1){if(i.flags|=2048,Os(9,Mh(),q0.bind(null,i,r,n,e),null),Be===null)throw Error(z(349));a||Nr&124||F0(i,e,n)}return n}function F0(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=me.updateQueue,e===null?(e=pg(),me.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function q0(t,e,n,i){e.value=n,e.getSnapshot=i,K0(e)&&Q0(t)}function G0(t,e,n){return n(function(){K0(e)&&Q0(t)})}function K0(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!_n(t,n)}catch{return!0}}function Q0(t){var e=$s(t,2);e!==null&&yn(e,t,2)}function kd(t){var e=Xt();if(typeof t=="function"){var n=t;if(t=n(),_a){fr(!0);try{n()}finally{fr(!1)}}}return e.memoizedState=e.baseState=t,e.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Vi,lastRenderedState:t},e}function Y0(t,e,n,i){return t.baseState=n,vg(t,Ve,typeof i=="function"?i:Vi)}function b1(t,e,n,i,r){if(xh(t))throw Error(z(485));if(t=e.action,t!==null){var a={payload:r,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(s){a.listeners.push(s)}};se.T!==null?n(!0):a.isTransition=!1,i(a),n=e.pending,n===null?(a.next=e.pending=a,X0(e,a)):(a.next=n.next,e.pending=n.next=a)}}function X0(t,e){var n=e.action,i=e.payload,r=t.state;if(e.isTransition){var a=se.T,s={};se.T=s;try{var l=n(r,i),u=se.S;u!==null&&u(s,l),Wy(t,e,l)}catch(c){zd(t,e,c)}finally{se.T=a}}else try{a=n(r,i),Wy(t,e,a)}catch(c){zd(t,e,c)}}function Wy(t,e,n){n!==null&&typeof n=="object"&&typeof n.then=="function"?n.then(function(i){Jy(t,e,i)},function(i){return zd(t,e,i)}):Jy(t,e,n)}function Jy(t,e,n){e.status="fulfilled",e.value=n,$0(e),t.state=n,e=t.pending,e!==null&&(n=e.next,n===e?t.pending=null:(n=n.next,e.next=n,X0(t,n)))}function zd(t,e,n){var i=t.pending;if(t.pending=null,i!==null){i=i.next;do e.status="rejected",e.reason=n,$0(e),e=e.next;while(e!==i)}t.action=null}function $0(t){t=t.listeners;for(var e=0;e<t.length;e++)(0,t[e])()}function Z0(t,e){return e}function ev(t,e){if(we){var n=Be.formState;if(n!==null){e:{var i=me;if(we){if(nt){t:{for(var r=nt,a=Zn;r.nodeType!==8;){if(!a){r=null;break t}if(r=jn(r.nextSibling),r===null){r=null;break t}}a=r.data,r=a==="F!"||a==="F"?r:null}if(r){nt=jn(r.nextSibling),i=r.data==="F!";break e}}ya(i)}i=!1}i&&(e=n[0])}}return n=Xt(),n.memoizedState=n.baseState=e,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Z0,lastRenderedState:e},n.queue=i,n=dT.bind(null,me,i),i.dispatch=n,i=kd(!1),a=Sg.bind(null,me,!1,i.queue),i=Xt(),r={state:e,dispatch:null,action:t,pending:null},i.queue=r,n=b1.bind(null,me,r,a,n),r.dispatch=n,i.memoizedState=t,[e,n,!1]}function tv(t){var e=ht();return W0(e,Ve,t)}function W0(t,e,n){if(e=vg(t,e,Z0)[0],t=nc(Vi)[0],typeof e=="object"&&e!==null&&typeof e.then=="function")try{var i=Gl(e)}catch(s){throw s===ql?Oh:s}else i=e;e=ht();var r=e.queue,a=r.dispatch;return n!==e.memoizedState&&(me.flags|=2048,Os(9,Mh(),w1.bind(null,r,n),null)),[i,a,t]}function w1(t,e){t.action=e}function nv(t){var e=ht(),n=Ve;if(n!==null)return W0(e,n,t);ht(),e=e.memoizedState,n=ht();var i=n.queue.dispatch;return n.memoizedState=t,[e,i,!1]}function Os(t,e,n,i){return t={tag:t,create:n,deps:i,inst:e,next:null},e=me.updateQueue,e===null&&(e=pg(),me.updateQueue=e),n=e.lastEffect,n===null?e.lastEffect=t.next=t:(i=n.next,n.next=t,t.next=i,e.lastEffect=t),t}function Mh(){return{destroy:void 0,resource:void 0}}function J0(){return ht().memoizedState}function ic(t,e,n,i){var r=Xt();i=i===void 0?null:i,me.flags|=t,r.memoizedState=Os(1|e,Mh(),n,i)}function Kl(t,e,n,i){var r=ht();i=i===void 0?null:i;var a=r.memoizedState.inst;Ve!==null&&i!==null&&hg(i,Ve.memoizedState.deps)?r.memoizedState=Os(e,a,n,i):(me.flags|=t,r.memoizedState=Os(1|e,a,n,i))}function iv(t,e){ic(8390656,8,t,e)}function eT(t,e){Kl(2048,8,t,e)}function tT(t,e){return Kl(4,2,t,e)}function nT(t,e){return Kl(4,4,t,e)}function iT(t,e){if(typeof e=="function"){t=t();var n=e(t);return function(){typeof n=="function"?n():e(null)}}if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function rT(t,e,n){n=n!=null?n.concat([t]):null,Kl(4,4,iT.bind(null,e,t),n)}function _g(){}function aT(t,e){var n=ht();e=e===void 0?null:e;var i=n.memoizedState;return e!==null&&hg(e,i[1])?i[0]:(n.memoizedState=[t,e],t)}function sT(t,e){var n=ht();e=e===void 0?null:e;var i=n.memoizedState;if(e!==null&&hg(e,i[1]))return i[0];if(i=t(),_a){fr(!0);try{t()}finally{fr(!1)}}return n.memoizedState=[i,e],i}function Eg(t,e,n){return n===void 0||Nr&1073741824?t.memoizedState=e:(t.memoizedState=n,t=$T(),me.lanes|=t,xr|=t,n)}function oT(t,e,n,i){return _n(n,e)?n:Ds.current!==null?(t=Eg(t,n,i),_n(t,e)||(wt=!0),t):Nr&42?(t=$T(),me.lanes|=t,xr|=t,e):(wt=!0,t.memoizedState=n)}function lT(t,e,n,i,r){var a=Re.p;Re.p=a!==0&&8>a?a:8;var s=se.T,l={};se.T=l,Sg(t,!1,e,n);try{var u=r(),c=se.S;if(c!==null&&c(l,u),u!==null&&typeof u=="object"&&typeof u.then=="function"){var f=T1(u,i);Jo(t,e,f,pn(t))}else Jo(t,e,i,pn(t))}catch(m){Jo(t,e,{then:function(){},status:"rejected",reason:m},pn())}finally{Re.p=a,se.T=s}}function R1(){}function jd(t,e,n,i){if(t.tag!==5)throw Error(z(476));var r=uT(t).queue;lT(t,r,e,ua,n===null?R1:function(){return cT(t),n(i)})}function uT(t){var e=t.memoizedState;if(e!==null)return e;e={memoizedState:ua,baseState:ua,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Vi,lastRenderedState:ua},next:null};var n={};return e.next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Vi,lastRenderedState:n},next:null},t.memoizedState=e,t=t.alternate,t!==null&&(t.memoizedState=e),e}function cT(t){var e=uT(t).next.queue;Jo(t,e,{},pn())}function Tg(){return Bt(El)}function hT(){return ht().memoizedState}function fT(){return ht().memoizedState}function I1(t){for(var e=t.return;e!==null;){switch(e.tag){case 24:case 3:var n=pn();t=_r(n);var i=Er(e,t,n);i!==null&&(yn(i,e,n),$o(i,e,n)),e={cache:og()},t.payload=e;return}e=e.return}}function C1(t,e,n){var i=pn();n={lane:i,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null},xh(t)?mT(e,n):(n=ig(t,e,n,i),n!==null&&(yn(n,t,i),gT(n,e,i)))}function dT(t,e,n){var i=pn();Jo(t,e,n,i)}function Jo(t,e,n,i){var r={lane:i,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null};if(xh(t))mT(e,r);else{var a=t.alternate;if(t.lanes===0&&(a===null||a.lanes===0)&&(a=e.lastRenderedReducer,a!==null))try{var s=e.lastRenderedState,l=a(s,n);if(r.hasEagerState=!0,r.eagerState=l,_n(l,s))return Dh(t,e,r,0),Be===null&&Ch(),!1}catch{}finally{}if(n=ig(t,e,r,i),n!==null)return yn(n,t,i),gT(n,e,i),!0}return!1}function Sg(t,e,n,i){if(i={lane:2,revertLane:Og(),action:i,hasEagerState:!1,eagerState:null,next:null},xh(t)){if(e)throw Error(z(479))}else e=ig(t,n,i,2),e!==null&&yn(e,t,2)}function xh(t){var e=t.alternate;return t===me||e!==null&&e===me}function mT(t,e){ys=Nc=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function gT(t,e,n){if(n&4194048){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,a0(t,n)}}var xc={readContext:Bt,use:Nh,useCallback:rt,useContext:rt,useEffect:rt,useImperativeHandle:rt,useLayoutEffect:rt,useInsertionEffect:rt,useMemo:rt,useReducer:rt,useRef:rt,useState:rt,useDebugValue:rt,useDeferredValue:rt,useTransition:rt,useSyncExternalStore:rt,useId:rt,useHostTransitionStatus:rt,useFormState:rt,useActionState:rt,useOptimistic:rt,useMemoCache:rt,useCacheRefresh:rt},pT={readContext:Bt,use:Nh,useCallback:function(t,e){return Xt().memoizedState=[t,e===void 0?null:e],t},useContext:Bt,useEffect:iv,useImperativeHandle:function(t,e,n){n=n!=null?n.concat([t]):null,ic(4194308,4,iT.bind(null,e,t),n)},useLayoutEffect:function(t,e){return ic(4194308,4,t,e)},useInsertionEffect:function(t,e){ic(4,2,t,e)},useMemo:function(t,e){var n=Xt();e=e===void 0?null:e;var i=t();if(_a){fr(!0);try{t()}finally{fr(!1)}}return n.memoizedState=[i,e],i},useReducer:function(t,e,n){var i=Xt();if(n!==void 0){var r=n(e);if(_a){fr(!0);try{n(e)}finally{fr(!1)}}}else r=e;return i.memoizedState=i.baseState=r,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:r},i.queue=t,t=t.dispatch=C1.bind(null,me,t),[i.memoizedState,t]},useRef:function(t){var e=Xt();return t={current:t},e.memoizedState=t},useState:function(t){t=kd(t);var e=t.queue,n=dT.bind(null,me,e);return e.dispatch=n,[t.memoizedState,n]},useDebugValue:_g,useDeferredValue:function(t,e){var n=Xt();return Eg(n,t,e)},useTransition:function(){var t=kd(!1);return t=lT.bind(null,me,t.queue,!0,!1),Xt().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,e,n){var i=me,r=Xt();if(we){if(n===void 0)throw Error(z(407));n=n()}else{if(n=e(),Be===null)throw Error(z(349));Ae&124||F0(i,e,n)}r.memoizedState=n;var a={value:n,getSnapshot:e};return r.queue=a,iv(G0.bind(null,i,a,t),[t]),i.flags|=2048,Os(9,Mh(),q0.bind(null,i,a,n,e),null),n},useId:function(){var t=Xt(),e=Be.identifierPrefix;if(we){var n=bi,i=Ai;n=(i&~(1<<32-gn(i)-1)).toString(32)+n,e="«"+e+"R"+n,n=Mc++,0<n&&(e+="H"+n.toString(32)),e+="»"}else n=S1++,e="«"+e+"r"+n.toString(32)+"»";return t.memoizedState=e},useHostTransitionStatus:Tg,useFormState:ev,useActionState:ev,useOptimistic:function(t){var e=Xt();e.memoizedState=e.baseState=t;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return e.queue=n,e=Sg.bind(null,me,!0,n),n.dispatch=e,[t,e]},useMemoCache:yg,useCacheRefresh:function(){return Xt().memoizedState=I1.bind(null,me)}},yT={readContext:Bt,use:Nh,useCallback:aT,useContext:Bt,useEffect:eT,useImperativeHandle:rT,useInsertionEffect:tT,useLayoutEffect:nT,useMemo:sT,useReducer:nc,useRef:J0,useState:function(){return nc(Vi)},useDebugValue:_g,useDeferredValue:function(t,e){var n=ht();return oT(n,Ve.memoizedState,t,e)},useTransition:function(){var t=nc(Vi)[0],e=ht().memoizedState;return[typeof t=="boolean"?t:Gl(t),e]},useSyncExternalStore:H0,useId:hT,useHostTransitionStatus:Tg,useFormState:tv,useActionState:tv,useOptimistic:function(t,e){var n=ht();return Y0(n,Ve,t,e)},useMemoCache:yg,useCacheRefresh:fT},D1={readContext:Bt,use:Nh,useCallback:aT,useContext:Bt,useEffect:eT,useImperativeHandle:rT,useInsertionEffect:tT,useLayoutEffect:nT,useMemo:sT,useReducer:Vf,useRef:J0,useState:function(){return Vf(Vi)},useDebugValue:_g,useDeferredValue:function(t,e){var n=ht();return Ve===null?Eg(n,t,e):oT(n,Ve.memoizedState,t,e)},useTransition:function(){var t=Vf(Vi)[0],e=ht().memoizedState;return[typeof t=="boolean"?t:Gl(t),e]},useSyncExternalStore:H0,useId:hT,useHostTransitionStatus:Tg,useFormState:nv,useActionState:nv,useOptimistic:function(t,e){var n=ht();return Ve!==null?Y0(n,Ve,t,e):(n.baseState=t,[t,n.queue.dispatch])},useMemoCache:yg,useCacheRefresh:fT},_s=null,pl=0;function Pu(t){var e=pl;return pl+=1,_s===null&&(_s=[]),U0(_s,t,e)}function Co(t,e){e=e.props.ref,t.ref=e!==void 0?e:null}function Lu(t,e){throw e.$$typeof===aR?Error(z(525)):(t=Object.prototype.toString.call(e),Error(z(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)))}function rv(t){var e=t._init;return e(t._payload)}function vT(t){function e(T,E){if(t){var b=T.deletions;b===null?(T.deletions=[E],T.flags|=16):b.push(E)}}function n(T,E){if(!t)return null;for(;E!==null;)e(T,E),E=E.sibling;return null}function i(T){for(var E=new Map;T!==null;)T.key!==null?E.set(T.key,T):E.set(T.index,T),T=T.sibling;return E}function r(T,E){return T=Di(T,E),T.index=0,T.sibling=null,T}function a(T,E,b){return T.index=b,t?(b=T.alternate,b!==null?(b=b.index,b<E?(T.flags|=67108866,E):b):(T.flags|=67108866,E)):(T.flags|=1048576,E)}function s(T){return t&&T.alternate===null&&(T.flags|=67108866),T}function l(T,E,b,N){return E===null||E.tag!==6?(E=Nf(b,T.mode,N),E.return=T,E):(E=r(E,b),E.return=T,E)}function u(T,E,b,N){var j=b.type;return j===ts?f(T,E,b.props.children,N,b.key):E!==null&&(E.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===ir&&rv(j)===E.type)?(E=r(E,b.props),Co(E,b),E.return=T,E):(E=ec(b.type,b.key,b.props,null,T.mode,N),Co(E,b),E.return=T,E)}function c(T,E,b,N){return E===null||E.tag!==4||E.stateNode.containerInfo!==b.containerInfo||E.stateNode.implementation!==b.implementation?(E=Mf(b,T.mode,N),E.return=T,E):(E=r(E,b.children||[]),E.return=T,E)}function f(T,E,b,N,j){return E===null||E.tag!==7?(E=ca(b,T.mode,N,j),E.return=T,E):(E=r(E,b),E.return=T,E)}function m(T,E,b){if(typeof E=="string"&&E!==""||typeof E=="number"||typeof E=="bigint")return E=Nf(""+E,T.mode,b),E.return=T,E;if(typeof E=="object"&&E!==null){switch(E.$$typeof){case Cu:return b=ec(E.type,E.key,E.props,null,T.mode,b),Co(b,E),b.return=T,b;case Po:return E=Mf(E,T.mode,b),E.return=T,E;case ir:var N=E._init;return E=N(E._payload),m(T,E,b)}if(Lo(E)||bo(E))return E=ca(E,T.mode,b,null),E.return=T,E;if(typeof E.then=="function")return m(T,Pu(E),b);if(E.$$typeof===Si)return m(T,xu(T,E),b);Lu(T,E)}return null}function g(T,E,b,N){var j=E!==null?E.key:null;if(typeof b=="string"&&b!==""||typeof b=="number"||typeof b=="bigint")return j!==null?null:l(T,E,""+b,N);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Cu:return b.key===j?u(T,E,b,N):null;case Po:return b.key===j?c(T,E,b,N):null;case ir:return j=b._init,b=j(b._payload),g(T,E,b,N)}if(Lo(b)||bo(b))return j!==null?null:f(T,E,b,N,null);if(typeof b.then=="function")return g(T,E,Pu(b),N);if(b.$$typeof===Si)return g(T,E,xu(T,b),N);Lu(T,b)}return null}function y(T,E,b,N,j){if(typeof N=="string"&&N!==""||typeof N=="number"||typeof N=="bigint")return T=T.get(b)||null,l(E,T,""+N,j);if(typeof N=="object"&&N!==null){switch(N.$$typeof){case Cu:return T=T.get(N.key===null?b:N.key)||null,u(E,T,N,j);case Po:return T=T.get(N.key===null?b:N.key)||null,c(E,T,N,j);case ir:var q=N._init;return N=q(N._payload),y(T,E,b,N,j)}if(Lo(N)||bo(N))return T=T.get(b)||null,f(E,T,N,j,null);if(typeof N.then=="function")return y(T,E,b,Pu(N),j);if(N.$$typeof===Si)return y(T,E,b,xu(E,N),j);Lu(E,N)}return null}function C(T,E,b,N){for(var j=null,q=null,p=E,v=E=0,S=null;p!==null&&v<b.length;v++){p.index>v?(S=p,p=null):S=p.sibling;var A=g(T,p,b[v],N);if(A===null){p===null&&(p=S);break}t&&p&&A.alternate===null&&e(T,p),E=a(A,E,v),q===null?j=A:q.sibling=A,q=A,p=S}if(v===b.length)return n(T,p),we&&ta(T,v),j;if(p===null){for(;v<b.length;v++)p=m(T,b[v],N),p!==null&&(E=a(p,E,v),q===null?j=p:q.sibling=p,q=p);return we&&ta(T,v),j}for(p=i(p);v<b.length;v++)S=y(p,T,v,b[v],N),S!==null&&(t&&S.alternate!==null&&p.delete(S.key===null?v:S.key),E=a(S,E,v),q===null?j=S:q.sibling=S,q=S);return t&&p.forEach(function(I){return e(T,I)}),we&&ta(T,v),j}function O(T,E,b,N){if(b==null)throw Error(z(151));for(var j=null,q=null,p=E,v=E=0,S=null,A=b.next();p!==null&&!A.done;v++,A=b.next()){p.index>v?(S=p,p=null):S=p.sibling;var I=g(T,p,A.value,N);if(I===null){p===null&&(p=S);break}t&&p&&I.alternate===null&&e(T,p),E=a(I,E,v),q===null?j=I:q.sibling=I,q=I,p=S}if(A.done)return n(T,p),we&&ta(T,v),j;if(p===null){for(;!A.done;v++,A=b.next())A=m(T,A.value,N),A!==null&&(E=a(A,E,v),q===null?j=A:q.sibling=A,q=A);return we&&ta(T,v),j}for(p=i(p);!A.done;v++,A=b.next())A=y(p,T,v,A.value,N),A!==null&&(t&&A.alternate!==null&&p.delete(A.key===null?v:A.key),E=a(A,E,v),q===null?j=A:q.sibling=A,q=A);return t&&p.forEach(function(D){return e(T,D)}),we&&ta(T,v),j}function M(T,E,b,N){if(typeof b=="object"&&b!==null&&b.type===ts&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case Cu:e:{for(var j=b.key;E!==null;){if(E.key===j){if(j=b.type,j===ts){if(E.tag===7){n(T,E.sibling),N=r(E,b.props.children),N.return=T,T=N;break e}}else if(E.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===ir&&rv(j)===E.type){n(T,E.sibling),N=r(E,b.props),Co(N,b),N.return=T,T=N;break e}n(T,E);break}else e(T,E);E=E.sibling}b.type===ts?(N=ca(b.props.children,T.mode,N,b.key),N.return=T,T=N):(N=ec(b.type,b.key,b.props,null,T.mode,N),Co(N,b),N.return=T,T=N)}return s(T);case Po:e:{for(j=b.key;E!==null;){if(E.key===j)if(E.tag===4&&E.stateNode.containerInfo===b.containerInfo&&E.stateNode.implementation===b.implementation){n(T,E.sibling),N=r(E,b.children||[]),N.return=T,T=N;break e}else{n(T,E);break}else e(T,E);E=E.sibling}N=Mf(b,T.mode,N),N.return=T,T=N}return s(T);case ir:return j=b._init,b=j(b._payload),M(T,E,b,N)}if(Lo(b))return C(T,E,b,N);if(bo(b)){if(j=bo(b),typeof j!="function")throw Error(z(150));return b=j.call(b),O(T,E,b,N)}if(typeof b.then=="function")return M(T,E,Pu(b),N);if(b.$$typeof===Si)return M(T,E,xu(T,b),N);Lu(T,b)}return typeof b=="string"&&b!==""||typeof b=="number"||typeof b=="bigint"?(b=""+b,E!==null&&E.tag===6?(n(T,E.sibling),N=r(E,b),N.return=T,T=N):(n(T,E),N=Nf(b,T.mode,N),N.return=T,T=N),s(T)):n(T,E)}return function(T,E,b,N){try{pl=0;var j=M(T,E,b,N);return _s=null,j}catch(p){if(p===ql||p===Oh)throw p;var q=fn(29,p,null,T.mode);return q.lanes=N,q.return=T,q}finally{}}}var Ns=vT(!0),_T=vT(!1),On=ui(null),ni=null;function sr(t){var e=t.alternate;$e(yt,yt.current&1),$e(On,t),ni===null&&(e===null||Ds.current!==null||e.memoizedState!==null)&&(ni=t)}function ET(t){if(t.tag===22){if($e(yt,yt.current),$e(On,t),ni===null){var e=t.alternate;e!==null&&e.memoizedState!==null&&(ni=t)}}else or()}function or(){$e(yt,yt.current),$e(On,On.current)}function Ri(t){Rt(On),ni===t&&(ni=null),Rt(yt)}var yt=ui(0);function Vc(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||im(n)))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}function Pf(t,e,n,i){e=t.memoizedState,n=n(i,e),n=n==null?e:qe({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Bd={enqueueSetState:function(t,e,n){t=t._reactInternals;var i=pn(),r=_r(i);r.payload=e,n!=null&&(r.callback=n),e=Er(t,r,i),e!==null&&(yn(e,t,i),$o(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var i=pn(),r=_r(i);r.tag=1,r.payload=e,n!=null&&(r.callback=n),e=Er(t,r,i),e!==null&&(yn(e,t,i),$o(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=pn(),i=_r(n);i.tag=2,e!=null&&(i.callback=e),e=Er(t,i,n),e!==null&&(yn(e,t,n),$o(e,t,n))}};function av(t,e,n,i,r,a,s){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(i,a,s):e.prototype&&e.prototype.isPureReactComponent?!dl(n,i)||!dl(r,a):!0}function sv(t,e,n,i){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,i),e.state!==t&&Bd.enqueueReplaceState(e,e.state,null)}function Ea(t,e){var n=e;if("ref"in e){n={};for(var i in e)i!=="ref"&&(n[i]=e[i])}if(t=t.defaultProps){n===e&&(n=qe({},n));for(var r in t)n[r]===void 0&&(n[r]=t[r])}return n}var Pc=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var e=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(e))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)};function TT(t){Pc(t)}function ST(t){console.error(t)}function AT(t){Pc(t)}function Lc(t,e){try{var n=t.onUncaughtError;n(e.value,{componentStack:e.stack})}catch(i){setTimeout(function(){throw i})}}function ov(t,e,n){try{var i=t.onCaughtError;i(n.value,{componentStack:n.stack,errorBoundary:e.tag===1?e.stateNode:null})}catch(r){setTimeout(function(){throw r})}}function Hd(t,e,n){return n=_r(n),n.tag=3,n.payload={element:null},n.callback=function(){Lc(t,e)},n}function bT(t){return t=_r(t),t.tag=3,t}function wT(t,e,n,i){var r=n.type.getDerivedStateFromError;if(typeof r=="function"){var a=i.value;t.payload=function(){return r(a)},t.callback=function(){ov(e,n,i)}}var s=n.stateNode;s!==null&&typeof s.componentDidCatch=="function"&&(t.callback=function(){ov(e,n,i),typeof r!="function"&&(Tr===null?Tr=new Set([this]):Tr.add(this));var l=i.stack;this.componentDidCatch(i.value,{componentStack:l!==null?l:""})})}function O1(t,e,n,i,r){if(n.flags|=32768,i!==null&&typeof i=="object"&&typeof i.then=="function"){if(e=n.alternate,e!==null&&Hl(e,n,r,!0),n=On.current,n!==null){switch(n.tag){case 13:return ni===null?$d():n.alternate===null&&it===0&&(it=3),n.flags&=-257,n.flags|=65536,n.lanes=r,i===Vd?n.flags|=16384:(e=n.updateQueue,e===null?n.updateQueue=new Set([i]):e.add(i),Kf(t,i,r)),!1;case 22:return n.flags|=65536,i===Vd?n.flags|=16384:(e=n.updateQueue,e===null?(e={transitions:null,markerInstances:null,retryQueue:new Set([i])},n.updateQueue=e):(n=e.retryQueue,n===null?e.retryQueue=new Set([i]):n.add(i)),Kf(t,i,r)),!1}throw Error(z(435,n.tag))}return Kf(t,i,r),$d(),!1}if(we)return e=On.current,e!==null?(!(e.flags&65536)&&(e.flags|=256),e.flags|=65536,e.lanes=r,i!==Dd&&(t=Error(z(422),{cause:i}),ml(Cn(t,n)))):(i!==Dd&&(e=Error(z(423),{cause:i}),ml(Cn(e,n))),t=t.current.alternate,t.flags|=65536,r&=-r,t.lanes|=r,i=Cn(i,n),r=Hd(t.stateNode,i,r),xf(t,r),it!==4&&(it=2)),!1;var a=Error(z(520),{cause:i});if(a=Cn(a,n),nl===null?nl=[a]:nl.push(a),it!==4&&(it=2),e===null)return!0;i=Cn(i,n),n=e;do{switch(n.tag){case 3:return n.flags|=65536,t=r&-r,n.lanes|=t,t=Hd(n.stateNode,i,t),xf(n,t),!1;case 1:if(e=n.type,a=n.stateNode,(n.flags&128)===0&&(typeof e.getDerivedStateFromError=="function"||a!==null&&typeof a.componentDidCatch=="function"&&(Tr===null||!Tr.has(a))))return n.flags|=65536,r&=-r,n.lanes|=r,r=bT(r),wT(r,t,n,i),xf(n,r),!1}n=n.return}while(n!==null);return!1}var RT=Error(z(461)),wt=!1;function Dt(t,e,n,i){e.child=t===null?_T(e,null,n,i):Ns(e,t.child,n,i)}function lv(t,e,n,i,r){n=n.render;var a=e.ref;if("ref"in i){var s={};for(var l in i)l!=="ref"&&(s[l]=i[l])}else s=i;return va(e),i=fg(t,e,n,s,a,r),l=dg(),t!==null&&!wt?(mg(t,e,r),Pi(t,e,r)):(we&&l&&ag(e),e.flags|=1,Dt(t,e,i,r),e.child)}function uv(t,e,n,i,r){if(t===null){var a=n.type;return typeof a=="function"&&!rg(a)&&a.defaultProps===void 0&&n.compare===null?(e.tag=15,e.type=a,IT(t,e,a,i,r)):(t=ec(n.type,null,i,e,e.mode,r),t.ref=e.ref,t.return=e,e.child=t)}if(a=t.child,!Ag(t,r)){var s=a.memoizedProps;if(n=n.compare,n=n!==null?n:dl,n(s,i)&&t.ref===e.ref)return Pi(t,e,r)}return e.flags|=1,t=Di(a,i),t.ref=e.ref,t.return=e,e.child=t}function IT(t,e,n,i,r){if(t!==null){var a=t.memoizedProps;if(dl(a,i)&&t.ref===e.ref)if(wt=!1,e.pendingProps=i=a,Ag(t,r))t.flags&131072&&(wt=!0);else return e.lanes=t.lanes,Pi(t,e,r)}return Fd(t,e,n,i,r)}function CT(t,e,n){var i=e.pendingProps,r=i.children,a=t!==null?t.memoizedState:null;if(i.mode==="hidden"){if(e.flags&128){if(i=a!==null?a.baseLanes|n:n,t!==null){for(r=e.child=t.child,a=0;r!==null;)a=a|r.lanes|r.childLanes,r=r.sibling;e.childLanes=a&~i}else e.childLanes=0,e.child=null;return cv(t,e,i,n)}if(n&536870912)e.memoizedState={baseLanes:0,cachePool:null},t!==null&&tc(e,a!==null?a.cachePool:null),a!==null?Zy(e,a):Ud(),ET(e);else return e.lanes=e.childLanes=536870912,cv(t,e,a!==null?a.baseLanes|n:n,n)}else a!==null?(tc(e,a.cachePool),Zy(e,a),or(),e.memoizedState=null):(t!==null&&tc(e,null),Ud(),or());return Dt(t,e,r,n),e.child}function cv(t,e,n,i){var r=lg();return r=r===null?null:{parent:pt._currentValue,pool:r},e.memoizedState={baseLanes:n,cachePool:r},t!==null&&tc(e,null),Ud(),ET(e),t!==null&&Hl(t,e,i,!0),null}function rc(t,e){var n=e.ref;if(n===null)t!==null&&t.ref!==null&&(e.flags|=4194816);else{if(typeof n!="function"&&typeof n!="object")throw Error(z(284));(t===null||t.ref!==n)&&(e.flags|=4194816)}}function Fd(t,e,n,i,r){return va(e),n=fg(t,e,n,i,void 0,r),i=dg(),t!==null&&!wt?(mg(t,e,r),Pi(t,e,r)):(we&&i&&ag(e),e.flags|=1,Dt(t,e,n,r),e.child)}function hv(t,e,n,i,r,a){return va(e),e.updateQueue=null,n=B0(e,i,n,r),j0(t),i=dg(),t!==null&&!wt?(mg(t,e,a),Pi(t,e,a)):(we&&i&&ag(e),e.flags|=1,Dt(t,e,n,a),e.child)}function fv(t,e,n,i,r){if(va(e),e.stateNode===null){var a=us,s=n.contextType;typeof s=="object"&&s!==null&&(a=Bt(s)),a=new n(i,a),e.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,a.updater=Bd,e.stateNode=a,a._reactInternals=e,a=e.stateNode,a.props=i,a.state=e.memoizedState,a.refs={},ug(e),s=n.contextType,a.context=typeof s=="object"&&s!==null?Bt(s):us,a.state=e.memoizedState,s=n.getDerivedStateFromProps,typeof s=="function"&&(Pf(e,n,s,i),a.state=e.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(s=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),s!==a.state&&Bd.enqueueReplaceState(a,a.state,null),Wo(e,i,a,r),Zo(),a.state=e.memoizedState),typeof a.componentDidMount=="function"&&(e.flags|=4194308),i=!0}else if(t===null){a=e.stateNode;var l=e.memoizedProps,u=Ea(n,l);a.props=u;var c=a.context,f=n.contextType;s=us,typeof f=="object"&&f!==null&&(s=Bt(f));var m=n.getDerivedStateFromProps;f=typeof m=="function"||typeof a.getSnapshotBeforeUpdate=="function",l=e.pendingProps!==l,f||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l||c!==s)&&sv(e,a,i,s),rr=!1;var g=e.memoizedState;a.state=g,Wo(e,i,a,r),Zo(),c=e.memoizedState,l||g!==c||rr?(typeof m=="function"&&(Pf(e,n,m,i),c=e.memoizedState),(u=rr||av(e,n,u,i,g,c,s))?(f||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=c),a.props=i,a.state=c,a.context=s,i=u):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{a=e.stateNode,Pd(t,e),s=e.memoizedProps,f=Ea(n,s),a.props=f,m=e.pendingProps,g=a.context,c=n.contextType,u=us,typeof c=="object"&&c!==null&&(u=Bt(c)),l=n.getDerivedStateFromProps,(c=typeof l=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(s!==m||g!==u)&&sv(e,a,i,u),rr=!1,g=e.memoizedState,a.state=g,Wo(e,i,a,r),Zo();var y=e.memoizedState;s!==m||g!==y||rr||t!==null&&t.dependencies!==null&&Dc(t.dependencies)?(typeof l=="function"&&(Pf(e,n,l,i),y=e.memoizedState),(f=rr||av(e,n,f,i,g,y,u)||t!==null&&t.dependencies!==null&&Dc(t.dependencies))?(c||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(i,y,u),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(i,y,u)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||s===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||s===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=y),a.props=i,a.state=y,a.context=u,i=f):(typeof a.componentDidUpdate!="function"||s===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||s===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),i=!1)}return a=i,rc(t,e),i=(e.flags&128)!==0,a||i?(a=e.stateNode,n=i&&typeof n.getDerivedStateFromError!="function"?null:a.render(),e.flags|=1,t!==null&&i?(e.child=Ns(e,t.child,null,r),e.child=Ns(e,null,n,r)):Dt(t,e,n,r),e.memoizedState=a.state,t=e.child):t=Pi(t,e,r),t}function dv(t,e,n,i){return Bl(),e.flags|=256,Dt(t,e,n,i),e.child}var Lf={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Uf(t){return{baseLanes:t,cachePool:P0()}}function kf(t,e,n){return t=t!==null?t.childLanes&~n:0,e&&(t|=Dn),t}function DT(t,e,n){var i=e.pendingProps,r=!1,a=(e.flags&128)!==0,s;if((s=a)||(s=t!==null&&t.memoizedState===null?!1:(yt.current&2)!==0),s&&(r=!0,e.flags&=-129),s=(e.flags&32)!==0,e.flags&=-33,t===null){if(we){if(r?sr(e):or(),we){var l=nt,u;if(u=l){e:{for(u=l,l=Zn;u.nodeType!==8;){if(!l){l=null;break e}if(u=jn(u.nextSibling),u===null){l=null;break e}}l=u}l!==null?(e.memoizedState={dehydrated:l,treeContext:ha!==null?{id:Ai,overflow:bi}:null,retryLane:536870912,hydrationErrors:null},u=fn(18,null,null,0),u.stateNode=l,u.return=e,e.child=u,Kt=e,nt=null,u=!0):u=!1}u||ya(e)}if(l=e.memoizedState,l!==null&&(l=l.dehydrated,l!==null))return im(l)?e.lanes=32:e.lanes=536870912,null;Ri(e)}return l=i.children,i=i.fallback,r?(or(),r=e.mode,l=Uc({mode:"hidden",children:l},r),i=ca(i,r,n,null),l.return=e,i.return=e,l.sibling=i,e.child=l,r=e.child,r.memoizedState=Uf(n),r.childLanes=kf(t,s,n),e.memoizedState=Lf,i):(sr(e),qd(e,l))}if(u=t.memoizedState,u!==null&&(l=u.dehydrated,l!==null)){if(a)e.flags&256?(sr(e),e.flags&=-257,e=zf(t,e,n)):e.memoizedState!==null?(or(),e.child=t.child,e.flags|=128,e=null):(or(),r=i.fallback,l=e.mode,i=Uc({mode:"visible",children:i.children},l),r=ca(r,l,n,null),r.flags|=2,i.return=e,r.return=e,i.sibling=r,e.child=i,Ns(e,t.child,null,n),i=e.child,i.memoizedState=Uf(n),i.childLanes=kf(t,s,n),e.memoizedState=Lf,e=r);else if(sr(e),im(l)){if(s=l.nextSibling&&l.nextSibling.dataset,s)var c=s.dgst;s=c,i=Error(z(419)),i.stack="",i.digest=s,ml({value:i,source:null,stack:null}),e=zf(t,e,n)}else if(wt||Hl(t,e,n,!1),s=(n&t.childLanes)!==0,wt||s){if(s=Be,s!==null&&(i=n&-n,i=i&42?1:Qm(i),i=i&(s.suspendedLanes|n)?0:i,i!==0&&i!==u.retryLane))throw u.retryLane=i,$s(t,i),yn(s,t,i),RT;l.data==="$?"||$d(),e=zf(t,e,n)}else l.data==="$?"?(e.flags|=192,e.child=t.child,e=null):(t=u.treeContext,nt=jn(l.nextSibling),Kt=e,we=!0,fa=null,Zn=!1,t!==null&&(wn[Rn++]=Ai,wn[Rn++]=bi,wn[Rn++]=ha,Ai=t.id,bi=t.overflow,ha=e),e=qd(e,i.children),e.flags|=4096);return e}return r?(or(),r=i.fallback,l=e.mode,u=t.child,c=u.sibling,i=Di(u,{mode:"hidden",children:i.children}),i.subtreeFlags=u.subtreeFlags&65011712,c!==null?r=Di(c,r):(r=ca(r,l,n,null),r.flags|=2),r.return=e,i.return=e,i.sibling=r,e.child=i,i=r,r=e.child,l=t.child.memoizedState,l===null?l=Uf(n):(u=l.cachePool,u!==null?(c=pt._currentValue,u=u.parent!==c?{parent:c,pool:c}:u):u=P0(),l={baseLanes:l.baseLanes|n,cachePool:u}),r.memoizedState=l,r.childLanes=kf(t,s,n),e.memoizedState=Lf,i):(sr(e),n=t.child,t=n.sibling,n=Di(n,{mode:"visible",children:i.children}),n.return=e,n.sibling=null,t!==null&&(s=e.deletions,s===null?(e.deletions=[t],e.flags|=16):s.push(t)),e.child=n,e.memoizedState=null,n)}function qd(t,e){return e=Uc({mode:"visible",children:e},t.mode),e.return=t,t.child=e}function Uc(t,e){return t=fn(22,t,null,e),t.lanes=0,t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},t}function zf(t,e,n){return Ns(e,t.child,null,n),t=qd(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function mv(t,e,n){t.lanes|=e;var i=t.alternate;i!==null&&(i.lanes|=e),Nd(t.return,e,n)}function jf(t,e,n,i,r){var a=t.memoizedState;a===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:r}:(a.isBackwards=e,a.rendering=null,a.renderingStartTime=0,a.last=i,a.tail=n,a.tailMode=r)}function OT(t,e,n){var i=e.pendingProps,r=i.revealOrder,a=i.tail;if(Dt(t,e,i.children,n),i=yt.current,i&2)i=i&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&mv(t,n,e);else if(t.tag===19)mv(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}i&=1}switch($e(yt,i),r){case"forwards":for(n=e.child,r=null;n!==null;)t=n.alternate,t!==null&&Vc(t)===null&&(r=n),n=n.sibling;n=r,n===null?(r=e.child,e.child=null):(r=n.sibling,n.sibling=null),jf(e,!1,r,n,a);break;case"backwards":for(n=null,r=e.child,e.child=null;r!==null;){if(t=r.alternate,t!==null&&Vc(t)===null){e.child=r;break}t=r.sibling,r.sibling=n,n=r,r=t}jf(e,!0,n,null,a);break;case"together":jf(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Pi(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),xr|=e.lanes,!(n&e.childLanes))if(t!==null){if(Hl(t,e,n,!1),(n&e.childLanes)===0)return null}else return null;if(t!==null&&e.child!==t.child)throw Error(z(153));if(e.child!==null){for(t=e.child,n=Di(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Di(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function Ag(t,e){return t.lanes&e?!0:(t=t.dependencies,!!(t!==null&&Dc(t)))}function N1(t,e,n){switch(e.tag){case 3:Tc(e,e.stateNode.containerInfo),ar(e,pt,t.memoizedState.cache),Bl();break;case 27:case 5:_d(e);break;case 4:Tc(e,e.stateNode.containerInfo);break;case 10:ar(e,e.type,e.memoizedProps.value);break;case 13:var i=e.memoizedState;if(i!==null)return i.dehydrated!==null?(sr(e),e.flags|=128,null):n&e.child.childLanes?DT(t,e,n):(sr(e),t=Pi(t,e,n),t!==null?t.sibling:null);sr(e);break;case 19:var r=(t.flags&128)!==0;if(i=(n&e.childLanes)!==0,i||(Hl(t,e,n,!1),i=(n&e.childLanes)!==0),r){if(i)return OT(t,e,n);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),$e(yt,yt.current),i)break;return null;case 22:case 23:return e.lanes=0,CT(t,e,n);case 24:ar(e,pt,t.memoizedState.cache)}return Pi(t,e,n)}function NT(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps)wt=!0;else{if(!Ag(t,n)&&!(e.flags&128))return wt=!1,N1(t,e,n);wt=!!(t.flags&131072)}else wt=!1,we&&e.flags&1048576&&x0(e,Cc,e.index);switch(e.lanes=0,e.tag){case 16:e:{t=e.pendingProps;var i=e.elementType,r=i._init;if(i=r(i._payload),e.type=i,typeof i=="function")rg(i)?(t=Ea(i,t),e.tag=1,e=fv(null,e,i,t,n)):(e.tag=0,e=Fd(null,e,i,t,n));else{if(i!=null){if(r=i.$$typeof,r===qm){e.tag=11,e=lv(null,e,i,t,n);break e}else if(r===Gm){e.tag=14,e=uv(null,e,i,t,n);break e}}throw e=yd(i)||i,Error(z(306,e,""))}}return e;case 0:return Fd(t,e,e.type,e.pendingProps,n);case 1:return i=e.type,r=Ea(i,e.pendingProps),fv(t,e,i,r,n);case 3:e:{if(Tc(e,e.stateNode.containerInfo),t===null)throw Error(z(387));i=e.pendingProps;var a=e.memoizedState;r=a.element,Pd(t,e),Wo(e,i,null,n);var s=e.memoizedState;if(i=s.cache,ar(e,pt,i),i!==a.cache&&Md(e,[pt],n,!0),Zo(),i=s.element,a.isDehydrated)if(a={element:i,isDehydrated:!1,cache:s.cache},e.updateQueue.baseState=a,e.memoizedState=a,e.flags&256){e=dv(t,e,i,n);break e}else if(i!==r){r=Cn(Error(z(424)),e),ml(r),e=dv(t,e,i,n);break e}else{switch(t=e.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(nt=jn(t.firstChild),Kt=e,we=!0,fa=null,Zn=!0,n=_T(e,null,i,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling}else{if(Bl(),i===r){e=Pi(t,e,n);break e}Dt(t,e,i,n)}e=e.child}return e;case 26:return rc(t,e),t===null?(n=Nv(e.type,null,e.pendingProps,null))?e.memoizedState=n:we||(n=e.type,t=e.pendingProps,i=qc(vr.current).createElement(n),i[jt]=e,i[tn]=t,xt(i,n,t),bt(i),e.stateNode=i):e.memoizedState=Nv(e.type,t.memoizedProps,e.pendingProps,t.memoizedState),null;case 27:return _d(e),t===null&&we&&(i=e.stateNode=yS(e.type,e.pendingProps,vr.current),Kt=e,Zn=!0,r=nt,Br(e.type)?(rm=r,nt=jn(i.firstChild)):nt=r),Dt(t,e,e.pendingProps.children,n),rc(t,e),t===null&&(e.flags|=4194304),e.child;case 5:return t===null&&we&&((r=i=nt)&&(i=aI(i,e.type,e.pendingProps,Zn),i!==null?(e.stateNode=i,Kt=e,nt=jn(i.firstChild),Zn=!1,r=!0):r=!1),r||ya(e)),_d(e),r=e.type,a=e.pendingProps,s=t!==null?t.memoizedProps:null,i=a.children,tm(r,a)?i=null:s!==null&&tm(r,s)&&(e.flags|=32),e.memoizedState!==null&&(r=fg(t,e,A1,null,null,n),El._currentValue=r),rc(t,e),Dt(t,e,i,n),e.child;case 6:return t===null&&we&&((t=n=nt)&&(n=sI(n,e.pendingProps,Zn),n!==null?(e.stateNode=n,Kt=e,nt=null,t=!0):t=!1),t||ya(e)),null;case 13:return DT(t,e,n);case 4:return Tc(e,e.stateNode.containerInfo),i=e.pendingProps,t===null?e.child=Ns(e,null,i,n):Dt(t,e,i,n),e.child;case 11:return lv(t,e,e.type,e.pendingProps,n);case 7:return Dt(t,e,e.pendingProps,n),e.child;case 8:return Dt(t,e,e.pendingProps.children,n),e.child;case 12:return Dt(t,e,e.pendingProps.children,n),e.child;case 10:return i=e.pendingProps,ar(e,e.type,i.value),Dt(t,e,i.children,n),e.child;case 9:return r=e.type._context,i=e.pendingProps.children,va(e),r=Bt(r),i=i(r),e.flags|=1,Dt(t,e,i,n),e.child;case 14:return uv(t,e,e.type,e.pendingProps,n);case 15:return IT(t,e,e.type,e.pendingProps,n);case 19:return OT(t,e,n);case 31:return i=e.pendingProps,n=e.mode,i={mode:i.mode,children:i.children},t===null?(n=Uc(i,n),n.ref=e.ref,e.child=n,n.return=e,e=n):(n=Di(t.child,i),n.ref=e.ref,e.child=n,n.return=e,e=n),e;case 22:return CT(t,e,n);case 24:return va(e),i=Bt(pt),t===null?(r=lg(),r===null&&(r=Be,a=og(),r.pooledCache=a,a.refCount++,a!==null&&(r.pooledCacheLanes|=n),r=a),e.memoizedState={parent:i,cache:r},ug(e),ar(e,pt,r)):(t.lanes&n&&(Pd(t,e),Wo(e,null,null,n),Zo()),r=t.memoizedState,a=e.memoizedState,r.parent!==i?(r={parent:i,cache:i},e.memoizedState=r,e.lanes===0&&(e.memoizedState=e.updateQueue.baseState=r),ar(e,pt,i)):(i=a.cache,ar(e,pt,i),i!==r.cache&&Md(e,[pt],n,!0))),Dt(t,e,e.pendingProps.children,n),e.child;case 29:throw e.pendingProps}throw Error(z(156,e.tag))}function _i(t){t.flags|=4}function gv(t,e){if(e.type!=="stylesheet"||e.state.loading&4)t.flags&=-16777217;else if(t.flags|=16777216,!ES(e)){if(e=On.current,e!==null&&((Ae&4194048)===Ae?ni!==null:(Ae&62914560)!==Ae&&!(Ae&536870912)||e!==ni))throw Xo=Vd,L0;t.flags|=8192}}function Uu(t,e){e!==null&&(t.flags|=4),t.flags&16384&&(e=t.tag!==22?i0():536870912,t.lanes|=e,Ms|=e)}function Do(t,e){if(!we)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:i.sibling=null}}function We(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,i=0;if(e)for(var r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags&65011712,i|=r.flags&65011712,r.return=t,r=r.sibling;else for(r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=t,r=r.sibling;return t.subtreeFlags|=i,t.childLanes=n,e}function M1(t,e,n){var i=e.pendingProps;switch(sg(e),e.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return We(e),null;case 1:return We(e),null;case 3:return n=e.stateNode,i=null,t!==null&&(i=t.memoizedState.cache),e.memoizedState.cache!==i&&(e.flags|=2048),Oi(pt),ws(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(Io(e)?_i(e):t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Gy())),We(e),null;case 26:return n=e.memoizedState,t===null?(_i(e),n!==null?(We(e),gv(e,n)):(We(e),e.flags&=-16777217)):n?n!==t.memoizedState?(_i(e),We(e),gv(e,n)):(We(e),e.flags&=-16777217):(t.memoizedProps!==i&&_i(e),We(e),e.flags&=-16777217),null;case 27:Sc(e),n=vr.current;var r=e.type;if(t!==null&&e.stateNode!=null)t.memoizedProps!==i&&_i(e);else{if(!i){if(e.stateNode===null)throw Error(z(166));return We(e),null}t=ei.current,Io(e)?Fy(e):(t=yS(r,i,n),e.stateNode=t,_i(e))}return We(e),null;case 5:if(Sc(e),n=e.type,t!==null&&e.stateNode!=null)t.memoizedProps!==i&&_i(e);else{if(!i){if(e.stateNode===null)throw Error(z(166));return We(e),null}if(t=ei.current,Io(e))Fy(e);else{switch(r=qc(vr.current),t){case 1:t=r.createElementNS("http://www.w3.org/2000/svg",n);break;case 2:t=r.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;default:switch(n){case"svg":t=r.createElementNS("http://www.w3.org/2000/svg",n);break;case"math":t=r.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;case"script":t=r.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild);break;case"select":t=typeof i.is=="string"?r.createElement("select",{is:i.is}):r.createElement("select"),i.multiple?t.multiple=!0:i.size&&(t.size=i.size);break;default:t=typeof i.is=="string"?r.createElement(n,{is:i.is}):r.createElement(n)}}t[jt]=e,t[tn]=i;e:for(r=e.child;r!==null;){if(r.tag===5||r.tag===6)t.appendChild(r.stateNode);else if(r.tag!==4&&r.tag!==27&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break e;for(;r.sibling===null;){if(r.return===null||r.return===e)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}e.stateNode=t;e:switch(xt(t,n,i),n){case"button":case"input":case"select":case"textarea":t=!!i.autoFocus;break e;case"img":t=!0;break e;default:t=!1}t&&_i(e)}}return We(e),e.flags&=-16777217,null;case 6:if(t&&e.stateNode!=null)t.memoizedProps!==i&&_i(e);else{if(typeof i!="string"&&e.stateNode===null)throw Error(z(166));if(t=vr.current,Io(e)){if(t=e.stateNode,n=e.memoizedProps,i=null,r=Kt,r!==null)switch(r.tag){case 27:case 5:i=r.memoizedProps}t[jt]=e,t=!!(t.nodeValue===n||i!==null&&i.suppressHydrationWarning===!0||mS(t.nodeValue,n)),t||ya(e)}else t=qc(t).createTextNode(i),t[jt]=e,e.stateNode=t}return We(e),null;case 13:if(i=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(r=Io(e),i!==null&&i.dehydrated!==null){if(t===null){if(!r)throw Error(z(318));if(r=e.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(z(317));r[jt]=e}else Bl(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;We(e),r=!1}else r=Gy(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=r),r=!0;if(!r)return e.flags&256?(Ri(e),e):(Ri(e),null)}if(Ri(e),e.flags&128)return e.lanes=n,e;if(n=i!==null,t=t!==null&&t.memoizedState!==null,n){i=e.child,r=null,i.alternate!==null&&i.alternate.memoizedState!==null&&i.alternate.memoizedState.cachePool!==null&&(r=i.alternate.memoizedState.cachePool.pool);var a=null;i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(a=i.memoizedState.cachePool.pool),a!==r&&(i.flags|=2048)}return n!==t&&n&&(e.child.flags|=8192),Uu(e,e.updateQueue),We(e),null;case 4:return ws(),t===null&&Ng(e.stateNode.containerInfo),We(e),null;case 10:return Oi(e.type),We(e),null;case 19:if(Rt(yt),r=e.memoizedState,r===null)return We(e),null;if(i=(e.flags&128)!==0,a=r.rendering,a===null)if(i)Do(r,!1);else{if(it!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(a=Vc(t),a!==null){for(e.flags|=128,Do(r,!1),t=a.updateQueue,e.updateQueue=t,Uu(e,t),e.subtreeFlags=0,t=n,n=e.child;n!==null;)M0(n,t),n=n.sibling;return $e(yt,yt.current&1|2),e.child}t=t.sibling}r.tail!==null&&ti()>zc&&(e.flags|=128,i=!0,Do(r,!1),e.lanes=4194304)}else{if(!i)if(t=Vc(a),t!==null){if(e.flags|=128,i=!0,t=t.updateQueue,e.updateQueue=t,Uu(e,t),Do(r,!0),r.tail===null&&r.tailMode==="hidden"&&!a.alternate&&!we)return We(e),null}else 2*ti()-r.renderingStartTime>zc&&n!==536870912&&(e.flags|=128,i=!0,Do(r,!1),e.lanes=4194304);r.isBackwards?(a.sibling=e.child,e.child=a):(t=r.last,t!==null?t.sibling=a:e.child=a,r.last=a)}return r.tail!==null?(e=r.tail,r.rendering=e,r.tail=e.sibling,r.renderingStartTime=ti(),e.sibling=null,t=yt.current,$e(yt,i?t&1|2:t&1),e):(We(e),null);case 22:case 23:return Ri(e),cg(),i=e.memoizedState!==null,t!==null?t.memoizedState!==null!==i&&(e.flags|=8192):i&&(e.flags|=8192),i?n&536870912&&!(e.flags&128)&&(We(e),e.subtreeFlags&6&&(e.flags|=8192)):We(e),n=e.updateQueue,n!==null&&Uu(e,n.retryQueue),n=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(n=t.memoizedState.cachePool.pool),i=null,e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(i=e.memoizedState.cachePool.pool),i!==n&&(e.flags|=2048),t!==null&&Rt(da),null;case 24:return n=null,t!==null&&(n=t.memoizedState.cache),e.memoizedState.cache!==n&&(e.flags|=2048),Oi(pt),We(e),null;case 25:return null;case 30:return null}throw Error(z(156,e.tag))}function x1(t,e){switch(sg(e),e.tag){case 1:return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Oi(pt),ws(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 26:case 27:case 5:return Sc(e),null;case 13:if(Ri(e),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(z(340));Bl()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Rt(yt),null;case 4:return ws(),null;case 10:return Oi(e.type),null;case 22:case 23:return Ri(e),cg(),t!==null&&Rt(da),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 24:return Oi(pt),null;case 25:return null;default:return null}}function MT(t,e){switch(sg(e),e.tag){case 3:Oi(pt),ws();break;case 26:case 27:case 5:Sc(e);break;case 4:ws();break;case 13:Ri(e);break;case 19:Rt(yt);break;case 10:Oi(e.type);break;case 22:case 23:Ri(e),cg(),t!==null&&Rt(da);break;case 24:Oi(pt)}}function Ql(t,e){try{var n=e.updateQueue,i=n!==null?n.lastEffect:null;if(i!==null){var r=i.next;n=r;do{if((n.tag&t)===t){i=void 0;var a=n.create,s=n.inst;i=a(),s.destroy=i}n=n.next}while(n!==r)}}catch(l){ke(e,e.return,l)}}function Mr(t,e,n){try{var i=e.updateQueue,r=i!==null?i.lastEffect:null;if(r!==null){var a=r.next;i=a;do{if((i.tag&t)===t){var s=i.inst,l=s.destroy;if(l!==void 0){s.destroy=void 0,r=e;var u=n,c=l;try{c()}catch(f){ke(r,u,f)}}}i=i.next}while(i!==a)}}catch(f){ke(e,e.return,f)}}function xT(t){var e=t.updateQueue;if(e!==null){var n=t.stateNode;try{z0(e,n)}catch(i){ke(t,t.return,i)}}}function VT(t,e,n){n.props=Ea(t.type,t.memoizedProps),n.state=t.memoizedState;try{n.componentWillUnmount()}catch(i){ke(t,e,i)}}function el(t,e){try{var n=t.ref;if(n!==null){switch(t.tag){case 26:case 27:case 5:var i=t.stateNode;break;case 30:i=t.stateNode;break;default:i=t.stateNode}typeof n=="function"?t.refCleanup=n(i):n.current=i}}catch(r){ke(t,e,r)}}function Jn(t,e){var n=t.ref,i=t.refCleanup;if(n!==null)if(typeof i=="function")try{i()}catch(r){ke(t,e,r)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof n=="function")try{n(null)}catch(r){ke(t,e,r)}else n.current=null}function PT(t){var e=t.type,n=t.memoizedProps,i=t.stateNode;try{e:switch(e){case"button":case"input":case"select":case"textarea":n.autoFocus&&i.focus();break e;case"img":n.src?i.src=n.src:n.srcSet&&(i.srcset=n.srcSet)}}catch(r){ke(t,t.return,r)}}function Bf(t,e,n){try{var i=t.stateNode;eI(i,t.type,n,e),i[tn]=e}catch(r){ke(t,t.return,r)}}function LT(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&Br(t.type)||t.tag===4}function Hf(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||LT(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&Br(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Gd(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n).insertBefore(t,e):(e=n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,e.appendChild(t),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Uh));else if(i!==4&&(i===27&&Br(t.type)&&(n=t.stateNode,e=null),t=t.child,t!==null))for(Gd(t,e,n),t=t.sibling;t!==null;)Gd(t,e,n),t=t.sibling}function kc(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(i!==4&&(i===27&&Br(t.type)&&(n=t.stateNode),t=t.child,t!==null))for(kc(t,e,n),t=t.sibling;t!==null;)kc(t,e,n),t=t.sibling}function UT(t){var e=t.stateNode,n=t.memoizedProps;try{for(var i=t.type,r=e.attributes;r.length;)e.removeAttributeNode(r[0]);xt(e,i,n),e[jt]=t,e[tn]=n}catch(a){ke(t,t.return,a)}}var Ti=!1,at=!1,Ff=!1,pv=typeof WeakSet=="function"?WeakSet:Set,At=null;function V1(t,e){if(t=t.containerInfo,Jd=Yc,t=b0(t),tg(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var r=i.anchorOffset,a=i.focusNode;i=i.focusOffset;try{n.nodeType,a.nodeType}catch{n=null;break e}var s=0,l=-1,u=-1,c=0,f=0,m=t,g=null;t:for(;;){for(var y;m!==n||r!==0&&m.nodeType!==3||(l=s+r),m!==a||i!==0&&m.nodeType!==3||(u=s+i),m.nodeType===3&&(s+=m.nodeValue.length),(y=m.firstChild)!==null;)g=m,m=y;for(;;){if(m===t)break t;if(g===n&&++c===r&&(l=s),g===a&&++f===i&&(u=s),(y=m.nextSibling)!==null)break;m=g,g=m.parentNode}m=y}n=l===-1||u===-1?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(em={focusedElem:t,selectionRange:n},Yc=!1,At=e;At!==null;)if(e=At,t=e.child,(e.subtreeFlags&1024)!==0&&t!==null)t.return=e,At=t;else for(;At!==null;){switch(e=At,a=e.alternate,t=e.flags,e.tag){case 0:break;case 11:case 15:break;case 1:if(t&1024&&a!==null){t=void 0,n=e,r=a.memoizedProps,a=a.memoizedState,i=n.stateNode;try{var C=Ea(n.type,r,n.elementType===n.type);t=i.getSnapshotBeforeUpdate(C,a),i.__reactInternalSnapshotBeforeUpdate=t}catch(O){ke(n,n.return,O)}}break;case 3:if(t&1024){if(t=e.stateNode.containerInfo,n=t.nodeType,n===9)nm(t);else if(n===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":nm(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if(t&1024)throw Error(z(163))}if(t=e.sibling,t!==null){t.return=e.return,At=t;break}At=e.return}}function kT(t,e,n){var i=n.flags;switch(n.tag){case 0:case 11:case 15:Ji(t,n),i&4&&Ql(5,n);break;case 1:if(Ji(t,n),i&4)if(t=n.stateNode,e===null)try{t.componentDidMount()}catch(s){ke(n,n.return,s)}else{var r=Ea(n.type,e.memoizedProps);e=e.memoizedState;try{t.componentDidUpdate(r,e,t.__reactInternalSnapshotBeforeUpdate)}catch(s){ke(n,n.return,s)}}i&64&&xT(n),i&512&&el(n,n.return);break;case 3:if(Ji(t,n),i&64&&(t=n.updateQueue,t!==null)){if(e=null,n.child!==null)switch(n.child.tag){case 27:case 5:e=n.child.stateNode;break;case 1:e=n.child.stateNode}try{z0(t,e)}catch(s){ke(n,n.return,s)}}break;case 27:e===null&&i&4&&UT(n);case 26:case 5:Ji(t,n),e===null&&i&4&&PT(n),i&512&&el(n,n.return);break;case 12:Ji(t,n);break;case 13:Ji(t,n),i&4&&BT(t,n),i&64&&(t=n.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(n=F1.bind(null,n),oI(t,n))));break;case 22:if(i=n.memoizedState!==null||Ti,!i){e=e!==null&&e.memoizedState!==null||at,r=Ti;var a=at;Ti=i,(at=e)&&!a?tr(t,n,(n.subtreeFlags&8772)!==0):Ji(t,n),Ti=r,at=a}break;case 30:break;default:Ji(t,n)}}function zT(t){var e=t.alternate;e!==null&&(t.alternate=null,zT(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&Xm(e)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var Ke=null,$t=!1;function Ei(t,e,n){for(n=n.child;n!==null;)jT(t,e,n),n=n.sibling}function jT(t,e,n){if(mn&&typeof mn.onCommitFiberUnmount=="function")try{mn.onCommitFiberUnmount(Ll,n)}catch{}switch(n.tag){case 26:at||Jn(n,e),Ei(t,e,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode,n.parentNode.removeChild(n));break;case 27:at||Jn(n,e);var i=Ke,r=$t;Br(n.type)&&(Ke=n.stateNode,$t=!1),Ei(t,e,n),rl(n.stateNode),Ke=i,$t=r;break;case 5:at||Jn(n,e);case 6:if(i=Ke,r=$t,Ke=null,Ei(t,e,n),Ke=i,$t=r,Ke!==null)if($t)try{(Ke.nodeType===9?Ke.body:Ke.nodeName==="HTML"?Ke.ownerDocument.body:Ke).removeChild(n.stateNode)}catch(a){ke(n,e,a)}else try{Ke.removeChild(n.stateNode)}catch(a){ke(n,e,a)}break;case 18:Ke!==null&&($t?(t=Ke,Cv(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,n.stateNode),Al(t)):Cv(Ke,n.stateNode));break;case 4:i=Ke,r=$t,Ke=n.stateNode.containerInfo,$t=!0,Ei(t,e,n),Ke=i,$t=r;break;case 0:case 11:case 14:case 15:at||Mr(2,n,e),at||Mr(4,n,e),Ei(t,e,n);break;case 1:at||(Jn(n,e),i=n.stateNode,typeof i.componentWillUnmount=="function"&&VT(n,e,i)),Ei(t,e,n);break;case 21:Ei(t,e,n);break;case 22:at=(i=at)||n.memoizedState!==null,Ei(t,e,n),at=i;break;default:Ei(t,e,n)}}function BT(t,e){if(e.memoizedState===null&&(t=e.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{Al(t)}catch(n){ke(e,e.return,n)}}function P1(t){switch(t.tag){case 13:case 19:var e=t.stateNode;return e===null&&(e=t.stateNode=new pv),e;case 22:return t=t.stateNode,e=t._retryCache,e===null&&(e=t._retryCache=new pv),e;default:throw Error(z(435,t.tag))}}function qf(t,e){var n=P1(t);e.forEach(function(i){var r=q1.bind(null,t,i);n.has(i)||(n.add(i),i.then(r,r))})}function ln(t,e){var n=e.deletions;if(n!==null)for(var i=0;i<n.length;i++){var r=n[i],a=t,s=e,l=s;e:for(;l!==null;){switch(l.tag){case 27:if(Br(l.type)){Ke=l.stateNode,$t=!1;break e}break;case 5:Ke=l.stateNode,$t=!1;break e;case 3:case 4:Ke=l.stateNode.containerInfo,$t=!0;break e}l=l.return}if(Ke===null)throw Error(z(160));jT(a,s,r),Ke=null,$t=!1,a=r.alternate,a!==null&&(a.return=null),r.return=null}if(e.subtreeFlags&13878)for(e=e.child;e!==null;)HT(e,t),e=e.sibling}var Ln=null;function HT(t,e){var n=t.alternate,i=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:ln(e,t),un(t),i&4&&(Mr(3,t,t.return),Ql(3,t),Mr(5,t,t.return));break;case 1:ln(e,t),un(t),i&512&&(at||n===null||Jn(n,n.return)),i&64&&Ti&&(t=t.updateQueue,t!==null&&(i=t.callbacks,i!==null&&(n=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=n===null?i:n.concat(i))));break;case 26:var r=Ln;if(ln(e,t),un(t),i&512&&(at||n===null||Jn(n,n.return)),i&4){var a=n!==null?n.memoizedState:null;if(i=t.memoizedState,n===null)if(i===null)if(t.stateNode===null){e:{i=t.type,n=t.memoizedProps,r=r.ownerDocument||r;t:switch(i){case"title":a=r.getElementsByTagName("title")[0],(!a||a[zl]||a[jt]||a.namespaceURI==="http://www.w3.org/2000/svg"||a.hasAttribute("itemprop"))&&(a=r.createElement(i),r.head.insertBefore(a,r.querySelector("head > title"))),xt(a,i,n),a[jt]=t,bt(a),i=a;break e;case"link":var s=xv("link","href",r).get(i+(n.href||""));if(s){for(var l=0;l<s.length;l++)if(a=s[l],a.getAttribute("href")===(n.href==null||n.href===""?null:n.href)&&a.getAttribute("rel")===(n.rel==null?null:n.rel)&&a.getAttribute("title")===(n.title==null?null:n.title)&&a.getAttribute("crossorigin")===(n.crossOrigin==null?null:n.crossOrigin)){s.splice(l,1);break t}}a=r.createElement(i),xt(a,i,n),r.head.appendChild(a);break;case"meta":if(s=xv("meta","content",r).get(i+(n.content||""))){for(l=0;l<s.length;l++)if(a=s[l],a.getAttribute("content")===(n.content==null?null:""+n.content)&&a.getAttribute("name")===(n.name==null?null:n.name)&&a.getAttribute("property")===(n.property==null?null:n.property)&&a.getAttribute("http-equiv")===(n.httpEquiv==null?null:n.httpEquiv)&&a.getAttribute("charset")===(n.charSet==null?null:n.charSet)){s.splice(l,1);break t}}a=r.createElement(i),xt(a,i,n),r.head.appendChild(a);break;default:throw Error(z(468,i))}a[jt]=t,bt(a),i=a}t.stateNode=i}else Vv(r,t.type,t.stateNode);else t.stateNode=Mv(r,i,t.memoizedProps);else a!==i?(a===null?n.stateNode!==null&&(n=n.stateNode,n.parentNode.removeChild(n)):a.count--,i===null?Vv(r,t.type,t.stateNode):Mv(r,i,t.memoizedProps)):i===null&&t.stateNode!==null&&Bf(t,t.memoizedProps,n.memoizedProps)}break;case 27:ln(e,t),un(t),i&512&&(at||n===null||Jn(n,n.return)),n!==null&&i&4&&Bf(t,t.memoizedProps,n.memoizedProps);break;case 5:if(ln(e,t),un(t),i&512&&(at||n===null||Jn(n,n.return)),t.flags&32){r=t.stateNode;try{Is(r,"")}catch(y){ke(t,t.return,y)}}i&4&&t.stateNode!=null&&(r=t.memoizedProps,Bf(t,r,n!==null?n.memoizedProps:r)),i&1024&&(Ff=!0);break;case 6:if(ln(e,t),un(t),i&4){if(t.stateNode===null)throw Error(z(162));i=t.memoizedProps,n=t.stateNode;try{n.nodeValue=i}catch(y){ke(t,t.return,y)}}break;case 3:if(oc=null,r=Ln,Ln=Gc(e.containerInfo),ln(e,t),Ln=r,un(t),i&4&&n!==null&&n.memoizedState.isDehydrated)try{Al(e.containerInfo)}catch(y){ke(t,t.return,y)}Ff&&(Ff=!1,FT(t));break;case 4:i=Ln,Ln=Gc(t.stateNode.containerInfo),ln(e,t),un(t),Ln=i;break;case 12:ln(e,t),un(t);break;case 13:ln(e,t),un(t),t.child.flags&8192&&t.memoizedState!==null!=(n!==null&&n.memoizedState!==null)&&(Cg=ti()),i&4&&(i=t.updateQueue,i!==null&&(t.updateQueue=null,qf(t,i)));break;case 22:r=t.memoizedState!==null;var u=n!==null&&n.memoizedState!==null,c=Ti,f=at;if(Ti=c||r,at=f||u,ln(e,t),at=f,Ti=c,un(t),i&8192)e:for(e=t.stateNode,e._visibility=r?e._visibility&-2:e._visibility|1,r&&(n===null||u||Ti||at||na(t)),n=null,e=t;;){if(e.tag===5||e.tag===26){if(n===null){u=n=e;try{if(a=u.stateNode,r)s=a.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none";else{l=u.stateNode;var m=u.memoizedProps.style,g=m!=null&&m.hasOwnProperty("display")?m.display:null;l.style.display=g==null||typeof g=="boolean"?"":(""+g).trim()}}catch(y){ke(u,u.return,y)}}}else if(e.tag===6){if(n===null){u=e;try{u.stateNode.nodeValue=r?"":u.memoizedProps}catch(y){ke(u,u.return,y)}}}else if((e.tag!==22&&e.tag!==23||e.memoizedState===null||e===t)&&e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;n===e&&(n=null),e=e.return}n===e&&(n=null),e.sibling.return=e.return,e=e.sibling}i&4&&(i=t.updateQueue,i!==null&&(n=i.retryQueue,n!==null&&(i.retryQueue=null,qf(t,n))));break;case 19:ln(e,t),un(t),i&4&&(i=t.updateQueue,i!==null&&(t.updateQueue=null,qf(t,i)));break;case 30:break;case 21:break;default:ln(e,t),un(t)}}function un(t){var e=t.flags;if(e&2){try{for(var n,i=t.return;i!==null;){if(LT(i)){n=i;break}i=i.return}if(n==null)throw Error(z(160));switch(n.tag){case 27:var r=n.stateNode,a=Hf(t);kc(t,a,r);break;case 5:var s=n.stateNode;n.flags&32&&(Is(s,""),n.flags&=-33);var l=Hf(t);kc(t,l,s);break;case 3:case 4:var u=n.stateNode.containerInfo,c=Hf(t);Gd(t,c,u);break;default:throw Error(z(161))}}catch(f){ke(t,t.return,f)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function FT(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var e=t;FT(e),e.tag===5&&e.flags&1024&&e.stateNode.reset(),t=t.sibling}}function Ji(t,e){if(e.subtreeFlags&8772)for(e=e.child;e!==null;)kT(t,e.alternate,e),e=e.sibling}function na(t){for(t=t.child;t!==null;){var e=t;switch(e.tag){case 0:case 11:case 14:case 15:Mr(4,e,e.return),na(e);break;case 1:Jn(e,e.return);var n=e.stateNode;typeof n.componentWillUnmount=="function"&&VT(e,e.return,n),na(e);break;case 27:rl(e.stateNode);case 26:case 5:Jn(e,e.return),na(e);break;case 22:e.memoizedState===null&&na(e);break;case 30:na(e);break;default:na(e)}t=t.sibling}}function tr(t,e,n){for(n=n&&(e.subtreeFlags&8772)!==0,e=e.child;e!==null;){var i=e.alternate,r=t,a=e,s=a.flags;switch(a.tag){case 0:case 11:case 15:tr(r,a,n),Ql(4,a);break;case 1:if(tr(r,a,n),i=a,r=i.stateNode,typeof r.componentDidMount=="function")try{r.componentDidMount()}catch(c){ke(i,i.return,c)}if(i=a,r=i.updateQueue,r!==null){var l=i.stateNode;try{var u=r.shared.hiddenCallbacks;if(u!==null)for(r.shared.hiddenCallbacks=null,r=0;r<u.length;r++)k0(u[r],l)}catch(c){ke(i,i.return,c)}}n&&s&64&&xT(a),el(a,a.return);break;case 27:UT(a);case 26:case 5:tr(r,a,n),n&&i===null&&s&4&&PT(a),el(a,a.return);break;case 12:tr(r,a,n);break;case 13:tr(r,a,n),n&&s&4&&BT(r,a);break;case 22:a.memoizedState===null&&tr(r,a,n),el(a,a.return);break;case 30:break;default:tr(r,a,n)}e=e.sibling}}function bg(t,e){var n=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(n=t.memoizedState.cachePool.pool),t=null,e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(t=e.memoizedState.cachePool.pool),t!==n&&(t!=null&&t.refCount++,n!=null&&Fl(n))}function wg(t,e){t=null,e.alternate!==null&&(t=e.alternate.memoizedState.cache),e=e.memoizedState.cache,e!==t&&(e.refCount++,t!=null&&Fl(t))}function Xn(t,e,n,i){if(e.subtreeFlags&10256)for(e=e.child;e!==null;)qT(t,e,n,i),e=e.sibling}function qT(t,e,n,i){var r=e.flags;switch(e.tag){case 0:case 11:case 15:Xn(t,e,n,i),r&2048&&Ql(9,e);break;case 1:Xn(t,e,n,i);break;case 3:Xn(t,e,n,i),r&2048&&(t=null,e.alternate!==null&&(t=e.alternate.memoizedState.cache),e=e.memoizedState.cache,e!==t&&(e.refCount++,t!=null&&Fl(t)));break;case 12:if(r&2048){Xn(t,e,n,i),t=e.stateNode;try{var a=e.memoizedProps,s=a.id,l=a.onPostCommit;typeof l=="function"&&l(s,e.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(u){ke(e,e.return,u)}}else Xn(t,e,n,i);break;case 13:Xn(t,e,n,i);break;case 23:break;case 22:a=e.stateNode,s=e.alternate,e.memoizedState!==null?a._visibility&2?Xn(t,e,n,i):tl(t,e):a._visibility&2?Xn(t,e,n,i):(a._visibility|=2,Xa(t,e,n,i,(e.subtreeFlags&10256)!==0)),r&2048&&bg(s,e);break;case 24:Xn(t,e,n,i),r&2048&&wg(e.alternate,e);break;default:Xn(t,e,n,i)}}function Xa(t,e,n,i,r){for(r=r&&(e.subtreeFlags&10256)!==0,e=e.child;e!==null;){var a=t,s=e,l=n,u=i,c=s.flags;switch(s.tag){case 0:case 11:case 15:Xa(a,s,l,u,r),Ql(8,s);break;case 23:break;case 22:var f=s.stateNode;s.memoizedState!==null?f._visibility&2?Xa(a,s,l,u,r):tl(a,s):(f._visibility|=2,Xa(a,s,l,u,r)),r&&c&2048&&bg(s.alternate,s);break;case 24:Xa(a,s,l,u,r),r&&c&2048&&wg(s.alternate,s);break;default:Xa(a,s,l,u,r)}e=e.sibling}}function tl(t,e){if(e.subtreeFlags&10256)for(e=e.child;e!==null;){var n=t,i=e,r=i.flags;switch(i.tag){case 22:tl(n,i),r&2048&&bg(i.alternate,i);break;case 24:tl(n,i),r&2048&&wg(i.alternate,i);break;default:tl(n,i)}e=e.sibling}}var ko=8192;function qa(t){if(t.subtreeFlags&ko)for(t=t.child;t!==null;)GT(t),t=t.sibling}function GT(t){switch(t.tag){case 26:qa(t),t.flags&ko&&t.memoizedState!==null&&EI(Ln,t.memoizedState,t.memoizedProps);break;case 5:qa(t);break;case 3:case 4:var e=Ln;Ln=Gc(t.stateNode.containerInfo),qa(t),Ln=e;break;case 22:t.memoizedState===null&&(e=t.alternate,e!==null&&e.memoizedState!==null?(e=ko,ko=16777216,qa(t),ko=e):qa(t));break;default:qa(t)}}function KT(t){var e=t.alternate;if(e!==null&&(t=e.child,t!==null)){e.child=null;do e=t.sibling,t.sibling=null,t=e;while(t!==null)}}function Oo(t){var e=t.deletions;if(t.flags&16){if(e!==null)for(var n=0;n<e.length;n++){var i=e[n];At=i,YT(i,t)}KT(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)QT(t),t=t.sibling}function QT(t){switch(t.tag){case 0:case 11:case 15:Oo(t),t.flags&2048&&Mr(9,t,t.return);break;case 3:Oo(t);break;case 12:Oo(t);break;case 22:var e=t.stateNode;t.memoizedState!==null&&e._visibility&2&&(t.return===null||t.return.tag!==13)?(e._visibility&=-3,ac(t)):Oo(t);break;default:Oo(t)}}function ac(t){var e=t.deletions;if(t.flags&16){if(e!==null)for(var n=0;n<e.length;n++){var i=e[n];At=i,YT(i,t)}KT(t)}for(t=t.child;t!==null;){switch(e=t,e.tag){case 0:case 11:case 15:Mr(8,e,e.return),ac(e);break;case 22:n=e.stateNode,n._visibility&2&&(n._visibility&=-3,ac(e));break;default:ac(e)}t=t.sibling}}function YT(t,e){for(;At!==null;){var n=At;switch(n.tag){case 0:case 11:case 15:Mr(8,n,e);break;case 23:case 22:if(n.memoizedState!==null&&n.memoizedState.cachePool!==null){var i=n.memoizedState.cachePool.pool;i!=null&&i.refCount++}break;case 24:Fl(n.memoizedState.cache)}if(i=n.child,i!==null)i.return=n,At=i;else e:for(n=t;At!==null;){i=At;var r=i.sibling,a=i.return;if(zT(i),i===n){At=null;break e}if(r!==null){r.return=a,At=r;break e}At=a}}}var L1={getCacheForType:function(t){var e=Bt(pt),n=e.data.get(t);return n===void 0&&(n=t(),e.data.set(t,n)),n}},U1=typeof WeakMap=="function"?WeakMap:Map,Me=0,Be=null,ye=null,Ae=0,Oe=0,cn=null,mr=!1,Zs=!1,Rg=!1,Li=0,it=0,xr=0,ma=0,Ig=0,Dn=0,Ms=0,nl=null,Wt=null,Kd=!1,Cg=0,zc=1/0,jc=null,Tr=null,Nt=0,Sr=null,xs=null,Es=0,Qd=0,Yd=null,XT=null,il=0,Xd=null;function pn(){if(Me&2&&Ae!==0)return Ae&-Ae;if(se.T!==null){var t=Cs;return t!==0?t:Og()}return s0()}function $T(){Dn===0&&(Dn=!(Ae&536870912)||we?n0():536870912);var t=On.current;return t!==null&&(t.flags|=32),Dn}function yn(t,e,n){(t===Be&&(Oe===2||Oe===9)||t.cancelPendingCommit!==null)&&(Vs(t,0),gr(t,Ae,Dn,!1)),kl(t,n),(!(Me&2)||t!==Be)&&(t===Be&&(!(Me&2)&&(ma|=n),it===4&&gr(t,Ae,Dn,!1)),ci(t))}function ZT(t,e,n){if(Me&6)throw Error(z(327));var i=!n&&(e&124)===0&&(e&t.expiredLanes)===0||Ul(t,e),r=i?j1(t,e):Gf(t,e,!0),a=i;do{if(r===0){Zs&&!i&&gr(t,e,0,!1);break}else{if(n=t.current.alternate,a&&!k1(n)){r=Gf(t,e,!1),a=!1;continue}if(r===2){if(a=e,t.errorRecoveryDisabledLanes&a)var s=0;else s=t.pendingLanes&-536870913,s=s!==0?s:s&536870912?536870912:0;if(s!==0){e=s;e:{var l=t;r=nl;var u=l.current.memoizedState.isDehydrated;if(u&&(Vs(l,s).flags|=256),s=Gf(l,s,!1),s!==2){if(Rg&&!u){l.errorRecoveryDisabledLanes|=a,ma|=a,r=4;break e}a=Wt,Wt=r,a!==null&&(Wt===null?Wt=a:Wt.push.apply(Wt,a))}r=s}if(a=!1,r!==2)continue}}if(r===1){Vs(t,0),gr(t,e,0,!0);break}e:{switch(i=t,a=r,a){case 0:case 1:throw Error(z(345));case 4:if((e&4194048)!==e)break;case 6:gr(i,e,Dn,!mr);break e;case 2:Wt=null;break;case 3:case 5:break;default:throw Error(z(329))}if((e&62914560)===e&&(r=Cg+300-ti(),10<r)){if(gr(i,e,Dn,!mr),bh(i,0,!0)!==0)break e;i.timeoutHandle=pS(yv.bind(null,i,n,Wt,jc,Kd,e,Dn,ma,Ms,mr,a,2,-0,0),r);break e}yv(i,n,Wt,jc,Kd,e,Dn,ma,Ms,mr,a,0,-0,0)}}break}while(!0);ci(t)}function yv(t,e,n,i,r,a,s,l,u,c,f,m,g,y){if(t.timeoutHandle=-1,m=e.subtreeFlags,(m&8192||(m&16785408)===16785408)&&(_l={stylesheets:null,count:0,unsuspend:_I},GT(e),m=TI(),m!==null)){t.cancelPendingCommit=m(_v.bind(null,t,e,a,n,i,r,s,l,u,f,1,g,y)),gr(t,a,s,!c);return}_v(t,e,a,n,i,r,s,l,u)}function k1(t){for(var e=t;;){var n=e.tag;if((n===0||n===11||n===15)&&e.flags&16384&&(n=e.updateQueue,n!==null&&(n=n.stores,n!==null)))for(var i=0;i<n.length;i++){var r=n[i],a=r.getSnapshot;r=r.value;try{if(!_n(a(),r))return!1}catch{return!1}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function gr(t,e,n,i){e&=~Ig,e&=~ma,t.suspendedLanes|=e,t.pingedLanes&=~e,i&&(t.warmLanes|=e),i=t.expirationTimes;for(var r=e;0<r;){var a=31-gn(r),s=1<<a;i[a]=-1,r&=~s}n!==0&&r0(t,n,e)}function Vh(){return Me&6?!0:(Yl(0),!1)}function Dg(){if(ye!==null){if(Oe===0)var t=ye.return;else t=ye,wi=Oa=null,gg(t),_s=null,pl=0,t=ye;for(;t!==null;)MT(t.alternate,t),t=t.return;ye=null}}function Vs(t,e){var n=t.timeoutHandle;n!==-1&&(t.timeoutHandle=-1,nI(n)),n=t.cancelPendingCommit,n!==null&&(t.cancelPendingCommit=null,n()),Dg(),Be=t,ye=n=Di(t.current,null),Ae=e,Oe=0,cn=null,mr=!1,Zs=Ul(t,e),Rg=!1,Ms=Dn=Ig=ma=xr=it=0,Wt=nl=null,Kd=!1,e&8&&(e|=e&32);var i=t.entangledLanes;if(i!==0)for(t=t.entanglements,i&=e;0<i;){var r=31-gn(i),a=1<<r;e|=t[r],i&=~a}return Li=e,Ch(),n}function WT(t,e){me=null,se.H=xc,e===ql||e===Oh?(e=Xy(),Oe=3):e===L0?(e=Xy(),Oe=4):Oe=e===RT?8:e!==null&&typeof e=="object"&&typeof e.then=="function"?6:1,cn=e,ye===null&&(it=1,Lc(t,Cn(e,t.current)))}function JT(){var t=se.H;return se.H=xc,t===null?xc:t}function eS(){var t=se.A;return se.A=L1,t}function $d(){it=4,mr||(Ae&4194048)!==Ae&&On.current!==null||(Zs=!0),!(xr&134217727)&&!(ma&134217727)||Be===null||gr(Be,Ae,Dn,!1)}function Gf(t,e,n){var i=Me;Me|=2;var r=JT(),a=eS();(Be!==t||Ae!==e)&&(jc=null,Vs(t,e)),e=!1;var s=it;e:do try{if(Oe!==0&&ye!==null){var l=ye,u=cn;switch(Oe){case 8:Dg(),s=6;break e;case 3:case 2:case 9:case 6:On.current===null&&(e=!0);var c=Oe;if(Oe=0,cn=null,fs(t,l,u,c),n&&Zs){s=0;break e}break;default:c=Oe,Oe=0,cn=null,fs(t,l,u,c)}}z1(),s=it;break}catch(f){WT(t,f)}while(!0);return e&&t.shellSuspendCounter++,wi=Oa=null,Me=i,se.H=r,se.A=a,ye===null&&(Be=null,Ae=0,Ch()),s}function z1(){for(;ye!==null;)tS(ye)}function j1(t,e){var n=Me;Me|=2;var i=JT(),r=eS();Be!==t||Ae!==e?(jc=null,zc=ti()+500,Vs(t,e)):Zs=Ul(t,e);e:do try{if(Oe!==0&&ye!==null){e=ye;var a=cn;t:switch(Oe){case 1:Oe=0,cn=null,fs(t,e,a,1);break;case 2:case 9:if(Yy(a)){Oe=0,cn=null,vv(e);break}e=function(){Oe!==2&&Oe!==9||Be!==t||(Oe=7),ci(t)},a.then(e,e);break e;case 3:Oe=7;break e;case 4:Oe=5;break e;case 7:Yy(a)?(Oe=0,cn=null,vv(e)):(Oe=0,cn=null,fs(t,e,a,7));break;case 5:var s=null;switch(ye.tag){case 26:s=ye.memoizedState;case 5:case 27:var l=ye;if(!s||ES(s)){Oe=0,cn=null;var u=l.sibling;if(u!==null)ye=u;else{var c=l.return;c!==null?(ye=c,Ph(c)):ye=null}break t}}Oe=0,cn=null,fs(t,e,a,5);break;case 6:Oe=0,cn=null,fs(t,e,a,6);break;case 8:Dg(),it=6;break e;default:throw Error(z(462))}}B1();break}catch(f){WT(t,f)}while(!0);return wi=Oa=null,se.H=i,se.A=r,Me=n,ye!==null?0:(Be=null,Ae=0,Ch(),it)}function B1(){for(;ye!==null&&!uR();)tS(ye)}function tS(t){var e=NT(t.alternate,t,Li);t.memoizedProps=t.pendingProps,e===null?Ph(t):ye=e}function vv(t){var e=t,n=e.alternate;switch(e.tag){case 15:case 0:e=hv(n,e,e.pendingProps,e.type,void 0,Ae);break;case 11:e=hv(n,e,e.pendingProps,e.type.render,e.ref,Ae);break;case 5:gg(e);default:MT(n,e),e=ye=M0(e,Li),e=NT(n,e,Li)}t.memoizedProps=t.pendingProps,e===null?Ph(t):ye=e}function fs(t,e,n,i){wi=Oa=null,gg(e),_s=null,pl=0;var r=e.return;try{if(O1(t,r,e,n,Ae)){it=1,Lc(t,Cn(n,t.current)),ye=null;return}}catch(a){if(r!==null)throw ye=r,a;it=1,Lc(t,Cn(n,t.current)),ye=null;return}e.flags&32768?(we||i===1?t=!0:Zs||Ae&536870912?t=!1:(mr=t=!0,(i===2||i===9||i===3||i===6)&&(i=On.current,i!==null&&i.tag===13&&(i.flags|=16384))),nS(e,t)):Ph(e)}function Ph(t){var e=t;do{if(e.flags&32768){nS(e,mr);return}t=e.return;var n=M1(e.alternate,e,Li);if(n!==null){ye=n;return}if(e=e.sibling,e!==null){ye=e;return}ye=e=t}while(e!==null);it===0&&(it=5)}function nS(t,e){do{var n=x1(t.alternate,t);if(n!==null){n.flags&=32767,ye=n;return}if(n=t.return,n!==null&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!e&&(t=t.sibling,t!==null)){ye=t;return}ye=t=n}while(t!==null);it=6,ye=null}function _v(t,e,n,i,r,a,s,l,u){t.cancelPendingCommit=null;do Lh();while(Nt!==0);if(Me&6)throw Error(z(327));if(e!==null){if(e===t.current)throw Error(z(177));if(a=e.lanes|e.childLanes,a|=ng,_R(t,n,a,s,l,u),t===Be&&(ye=Be=null,Ae=0),xs=e,Sr=t,Es=n,Qd=a,Yd=r,XT=i,e.subtreeFlags&10256||e.flags&10256?(t.callbackNode=null,t.callbackPriority=0,G1(Ac,function(){return oS(),null})):(t.callbackNode=null,t.callbackPriority=0),i=(e.flags&13878)!==0,e.subtreeFlags&13878||i){i=se.T,se.T=null,r=Re.p,Re.p=2,s=Me,Me|=4;try{V1(t,e,n)}finally{Me=s,Re.p=r,se.T=i}}Nt=1,iS(),rS(),aS()}}function iS(){if(Nt===1){Nt=0;var t=Sr,e=xs,n=(e.flags&13878)!==0;if(e.subtreeFlags&13878||n){n=se.T,se.T=null;var i=Re.p;Re.p=2;var r=Me;Me|=4;try{HT(e,t);var a=em,s=b0(t.containerInfo),l=a.focusedElem,u=a.selectionRange;if(s!==l&&l&&l.ownerDocument&&A0(l.ownerDocument.documentElement,l)){if(u!==null&&tg(l)){var c=u.start,f=u.end;if(f===void 0&&(f=c),"selectionStart"in l)l.selectionStart=c,l.selectionEnd=Math.min(f,l.value.length);else{var m=l.ownerDocument||document,g=m&&m.defaultView||window;if(g.getSelection){var y=g.getSelection(),C=l.textContent.length,O=Math.min(u.start,C),M=u.end===void 0?O:Math.min(u.end,C);!y.extend&&O>M&&(s=M,M=O,O=s);var T=jy(l,O),E=jy(l,M);if(T&&E&&(y.rangeCount!==1||y.anchorNode!==T.node||y.anchorOffset!==T.offset||y.focusNode!==E.node||y.focusOffset!==E.offset)){var b=m.createRange();b.setStart(T.node,T.offset),y.removeAllRanges(),O>M?(y.addRange(b),y.extend(E.node,E.offset)):(b.setEnd(E.node,E.offset),y.addRange(b))}}}}for(m=[],y=l;y=y.parentNode;)y.nodeType===1&&m.push({element:y,left:y.scrollLeft,top:y.scrollTop});for(typeof l.focus=="function"&&l.focus(),l=0;l<m.length;l++){var N=m[l];N.element.scrollLeft=N.left,N.element.scrollTop=N.top}}Yc=!!Jd,em=Jd=null}finally{Me=r,Re.p=i,se.T=n}}t.current=e,Nt=2}}function rS(){if(Nt===2){Nt=0;var t=Sr,e=xs,n=(e.flags&8772)!==0;if(e.subtreeFlags&8772||n){n=se.T,se.T=null;var i=Re.p;Re.p=2;var r=Me;Me|=4;try{kT(t,e.alternate,e)}finally{Me=r,Re.p=i,se.T=n}}Nt=3}}function aS(){if(Nt===4||Nt===3){Nt=0,cR();var t=Sr,e=xs,n=Es,i=XT;e.subtreeFlags&10256||e.flags&10256?Nt=5:(Nt=0,xs=Sr=null,sS(t,t.pendingLanes));var r=t.pendingLanes;if(r===0&&(Tr=null),Ym(n),e=e.stateNode,mn&&typeof mn.onCommitFiberRoot=="function")try{mn.onCommitFiberRoot(Ll,e,void 0,(e.current.flags&128)===128)}catch{}if(i!==null){e=se.T,r=Re.p,Re.p=2,se.T=null;try{for(var a=t.onRecoverableError,s=0;s<i.length;s++){var l=i[s];a(l.value,{componentStack:l.stack})}}finally{se.T=e,Re.p=r}}Es&3&&Lh(),ci(t),r=t.pendingLanes,n&4194090&&r&42?t===Xd?il++:(il=0,Xd=t):il=0,Yl(0)}}function sS(t,e){(t.pooledCacheLanes&=e)===0&&(e=t.pooledCache,e!=null&&(t.pooledCache=null,Fl(e)))}function Lh(t){return iS(),rS(),aS(),oS()}function oS(){if(Nt!==5)return!1;var t=Sr,e=Qd;Qd=0;var n=Ym(Es),i=se.T,r=Re.p;try{Re.p=32>n?32:n,se.T=null,n=Yd,Yd=null;var a=Sr,s=Es;if(Nt=0,xs=Sr=null,Es=0,Me&6)throw Error(z(331));var l=Me;if(Me|=4,QT(a.current),qT(a,a.current,s,n),Me=l,Yl(0,!1),mn&&typeof mn.onPostCommitFiberRoot=="function")try{mn.onPostCommitFiberRoot(Ll,a)}catch{}return!0}finally{Re.p=r,se.T=i,sS(t,e)}}function Ev(t,e,n){e=Cn(n,e),e=Hd(t.stateNode,e,2),t=Er(t,e,2),t!==null&&(kl(t,2),ci(t))}function ke(t,e,n){if(t.tag===3)Ev(t,t,n);else for(;e!==null;){if(e.tag===3){Ev(e,t,n);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(Tr===null||!Tr.has(i))){t=Cn(n,t),n=bT(2),i=Er(e,n,2),i!==null&&(wT(n,i,e,t),kl(i,2),ci(i));break}}e=e.return}}function Kf(t,e,n){var i=t.pingCache;if(i===null){i=t.pingCache=new U1;var r=new Set;i.set(e,r)}else r=i.get(e),r===void 0&&(r=new Set,i.set(e,r));r.has(n)||(Rg=!0,r.add(n),t=H1.bind(null,t,e,n),e.then(t,t))}function H1(t,e,n){var i=t.pingCache;i!==null&&i.delete(e),t.pingedLanes|=t.suspendedLanes&n,t.warmLanes&=~n,Be===t&&(Ae&n)===n&&(it===4||it===3&&(Ae&62914560)===Ae&&300>ti()-Cg?!(Me&2)&&Vs(t,0):Ig|=n,Ms===Ae&&(Ms=0)),ci(t)}function lS(t,e){e===0&&(e=i0()),t=$s(t,e),t!==null&&(kl(t,e),ci(t))}function F1(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),lS(t,n)}function q1(t,e){var n=0;switch(t.tag){case 13:var i=t.stateNode,r=t.memoizedState;r!==null&&(n=r.retryLane);break;case 19:i=t.stateNode;break;case 22:i=t.stateNode._retryCache;break;default:throw Error(z(314))}i!==null&&i.delete(e),lS(t,n)}function G1(t,e){return Km(t,e)}var Bc=null,$a=null,Zd=!1,Hc=!1,Qf=!1,ga=0;function ci(t){t!==$a&&t.next===null&&($a===null?Bc=$a=t:$a=$a.next=t),Hc=!0,Zd||(Zd=!0,Q1())}function Yl(t,e){if(!Qf&&Hc){Qf=!0;do for(var n=!1,i=Bc;i!==null;){if(t!==0){var r=i.pendingLanes;if(r===0)var a=0;else{var s=i.suspendedLanes,l=i.pingedLanes;a=(1<<31-gn(42|t)+1)-1,a&=r&~(s&~l),a=a&201326741?a&201326741|1:a?a|2:0}a!==0&&(n=!0,Tv(i,a))}else a=Ae,a=bh(i,i===Be?a:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),!(a&3)||Ul(i,a)||(n=!0,Tv(i,a));i=i.next}while(n);Qf=!1}}function K1(){uS()}function uS(){Hc=Zd=!1;var t=0;ga!==0&&(tI()&&(t=ga),ga=0);for(var e=ti(),n=null,i=Bc;i!==null;){var r=i.next,a=cS(i,e);a===0?(i.next=null,n===null?Bc=r:n.next=r,r===null&&($a=n)):(n=i,(t!==0||a&3)&&(Hc=!0)),i=r}Yl(t)}function cS(t,e){for(var n=t.suspendedLanes,i=t.pingedLanes,r=t.expirationTimes,a=t.pendingLanes&-62914561;0<a;){var s=31-gn(a),l=1<<s,u=r[s];u===-1?(!(l&n)||l&i)&&(r[s]=vR(l,e)):u<=e&&(t.expiredLanes|=l),a&=~l}if(e=Be,n=Ae,n=bh(t,t===e?n:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),i=t.callbackNode,n===0||t===e&&(Oe===2||Oe===9)||t.cancelPendingCommit!==null)return i!==null&&i!==null&&_f(i),t.callbackNode=null,t.callbackPriority=0;if(!(n&3)||Ul(t,n)){if(e=n&-n,e===t.callbackPriority)return e;switch(i!==null&&_f(i),Ym(n)){case 2:case 8:n=e0;break;case 32:n=Ac;break;case 268435456:n=t0;break;default:n=Ac}return i=hS.bind(null,t),n=Km(n,i),t.callbackPriority=e,t.callbackNode=n,e}return i!==null&&i!==null&&_f(i),t.callbackPriority=2,t.callbackNode=null,2}function hS(t,e){if(Nt!==0&&Nt!==5)return t.callbackNode=null,t.callbackPriority=0,null;var n=t.callbackNode;if(Lh()&&t.callbackNode!==n)return null;var i=Ae;return i=bh(t,t===Be?i:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),i===0?null:(ZT(t,i,e),cS(t,ti()),t.callbackNode!=null&&t.callbackNode===n?hS.bind(null,t):null)}function Tv(t,e){if(Lh())return null;ZT(t,e,!0)}function Q1(){iI(function(){Me&6?Km(JE,K1):uS()})}function Og(){return ga===0&&(ga=n0()),ga}function Sv(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:Zu(""+t)}function Av(t,e){var n=e.ownerDocument.createElement("input");return n.name=e.name,n.value=e.value,t.id&&n.setAttribute("form",t.id),e.parentNode.insertBefore(n,e),t=new FormData(t),n.parentNode.removeChild(n),t}function Y1(t,e,n,i,r){if(e==="submit"&&n&&n.stateNode===r){var a=Sv((r[tn]||null).action),s=i.submitter;s&&(e=(e=s[tn]||null)?Sv(e.formAction):s.getAttribute("formAction"),e!==null&&(a=e,s=null));var l=new wh("action","action",null,i,r);t.push({event:l,listeners:[{instance:null,listener:function(){if(i.defaultPrevented){if(ga!==0){var u=s?Av(r,s):new FormData(r);jd(n,{pending:!0,data:u,method:r.method,action:a},null,u)}}else typeof a=="function"&&(l.preventDefault(),u=s?Av(r,s):new FormData(r),jd(n,{pending:!0,data:u,method:r.method,action:a},a,u))},currentTarget:r}]})}}for(var Yf=0;Yf<Cd.length;Yf++){var Xf=Cd[Yf],X1=Xf.toLowerCase(),$1=Xf[0].toUpperCase()+Xf.slice(1);Fn(X1,"on"+$1)}Fn(R0,"onAnimationEnd");Fn(I0,"onAnimationIteration");Fn(C0,"onAnimationStart");Fn("dblclick","onDoubleClick");Fn("focusin","onFocus");Fn("focusout","onBlur");Fn(d1,"onTransitionRun");Fn(m1,"onTransitionStart");Fn(g1,"onTransitionCancel");Fn(D0,"onTransitionEnd");Rs("onMouseEnter",["mouseout","mouseover"]);Rs("onMouseLeave",["mouseout","mouseover"]);Rs("onPointerEnter",["pointerout","pointerover"]);Rs("onPointerLeave",["pointerout","pointerover"]);Ia("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ia("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ia("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ia("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ia("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ia("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var yl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Z1=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(yl));function fS(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var i=t[n],r=i.event;i=i.listeners;e:{var a=void 0;if(e)for(var s=i.length-1;0<=s;s--){var l=i[s],u=l.instance,c=l.currentTarget;if(l=l.listener,u!==a&&r.isPropagationStopped())break e;a=l,r.currentTarget=c;try{a(r)}catch(f){Pc(f)}r.currentTarget=null,a=u}else for(s=0;s<i.length;s++){if(l=i[s],u=l.instance,c=l.currentTarget,l=l.listener,u!==a&&r.isPropagationStopped())break e;a=l,r.currentTarget=c;try{a(r)}catch(f){Pc(f)}r.currentTarget=null,a=u}}}}function pe(t,e){var n=e[Td];n===void 0&&(n=e[Td]=new Set);var i=t+"__bubble";n.has(i)||(dS(e,t,2,!1),n.add(i))}function $f(t,e,n){var i=0;e&&(i|=4),dS(n,t,i,e)}var ku="_reactListening"+Math.random().toString(36).slice(2);function Ng(t){if(!t[ku]){t[ku]=!0,o0.forEach(function(n){n!=="selectionchange"&&(Z1.has(n)||$f(n,!1,t),$f(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[ku]||(e[ku]=!0,$f("selectionchange",!1,e))}}function dS(t,e,n,i){switch(wS(e)){case 2:var r=bI;break;case 8:r=wI;break;default:r=Pg}n=r.bind(null,e,n,t),r=void 0,!wd||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),i?r!==void 0?t.addEventListener(e,n,{capture:!0,passive:r}):t.addEventListener(e,n,!0):r!==void 0?t.addEventListener(e,n,{passive:r}):t.addEventListener(e,n,!1)}function Zf(t,e,n,i,r){var a=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var s=i.tag;if(s===3||s===4){var l=i.stateNode.containerInfo;if(l===r)break;if(s===4)for(s=i.return;s!==null;){var u=s.tag;if((u===3||u===4)&&s.stateNode.containerInfo===r)return;s=s.return}for(;l!==null;){if(s=is(l),s===null)return;if(u=s.tag,u===5||u===6||u===26||u===27){i=a=s;continue e}l=l.parentNode}}i=i.return}g0(function(){var c=a,f=Zm(n),m=[];e:{var g=O0.get(t);if(g!==void 0){var y=wh,C=t;switch(t){case"keypress":if(Ju(n)===0)break e;case"keydown":case"keyup":y=GR;break;case"focusin":C="focus",y=If;break;case"focusout":C="blur",y=If;break;case"beforeblur":case"afterblur":y=If;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":y=Oy;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":y=xR;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":y=YR;break;case R0:case I0:case C0:y=LR;break;case D0:y=$R;break;case"scroll":case"scrollend":y=NR;break;case"wheel":y=WR;break;case"copy":case"cut":case"paste":y=kR;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":y=My;break;case"toggle":case"beforetoggle":y=e1}var O=(e&4)!==0,M=!O&&(t==="scroll"||t==="scrollend"),T=O?g!==null?g+"Capture":null:g;O=[];for(var E=c,b;E!==null;){var N=E;if(b=N.stateNode,N=N.tag,N!==5&&N!==26&&N!==27||b===null||T===null||(N=hl(E,T),N!=null&&O.push(vl(E,N,b))),M)break;E=E.return}0<O.length&&(g=new y(g,C,null,n,f),m.push({event:g,listeners:O}))}}if(!(e&7)){e:{if(g=t==="mouseover"||t==="pointerover",y=t==="mouseout"||t==="pointerout",g&&n!==bd&&(C=n.relatedTarget||n.fromElement)&&(is(C)||C[Ys]))break e;if((y||g)&&(g=f.window===f?f:(g=f.ownerDocument)?g.defaultView||g.parentWindow:window,y?(C=n.relatedTarget||n.toElement,y=c,C=C?is(C):null,C!==null&&(M=Pl(C),O=C.tag,C!==M||O!==5&&O!==27&&O!==6)&&(C=null)):(y=null,C=c),y!==C)){if(O=Oy,N="onMouseLeave",T="onMouseEnter",E="mouse",(t==="pointerout"||t==="pointerover")&&(O=My,N="onPointerLeave",T="onPointerEnter",E="pointer"),M=y==null?g:Uo(y),b=C==null?g:Uo(C),g=new O(N,E+"leave",y,n,f),g.target=M,g.relatedTarget=b,N=null,is(f)===c&&(O=new O(T,E+"enter",C,n,f),O.target=b,O.relatedTarget=M,N=O),M=N,y&&C)t:{for(O=y,T=C,E=0,b=O;b;b=Ga(b))E++;for(b=0,N=T;N;N=Ga(N))b++;for(;0<E-b;)O=Ga(O),E--;for(;0<b-E;)T=Ga(T),b--;for(;E--;){if(O===T||T!==null&&O===T.alternate)break t;O=Ga(O),T=Ga(T)}O=null}else O=null;y!==null&&bv(m,g,y,O,!1),C!==null&&M!==null&&bv(m,M,C,O,!0)}}e:{if(g=c?Uo(c):window,y=g.nodeName&&g.nodeName.toLowerCase(),y==="select"||y==="input"&&g.type==="file")var j=Ly;else if(Py(g))if(T0)j=c1;else{j=l1;var q=o1}else y=g.nodeName,!y||y.toLowerCase()!=="input"||g.type!=="checkbox"&&g.type!=="radio"?c&&$m(c.elementType)&&(j=Ly):j=u1;if(j&&(j=j(t,c))){E0(m,j,n,f);break e}q&&q(t,g,c),t==="focusout"&&c&&g.type==="number"&&c.memoizedProps.value!=null&&Ad(g,"number",g.value)}switch(q=c?Uo(c):window,t){case"focusin":(Py(q)||q.contentEditable==="true")&&(ss=q,Rd=c,Qo=null);break;case"focusout":Qo=Rd=ss=null;break;case"mousedown":Id=!0;break;case"contextmenu":case"mouseup":case"dragend":Id=!1,By(m,n,f);break;case"selectionchange":if(f1)break;case"keydown":case"keyup":By(m,n,f)}var p;if(eg)e:{switch(t){case"compositionstart":var v="onCompositionStart";break e;case"compositionend":v="onCompositionEnd";break e;case"compositionupdate":v="onCompositionUpdate";break e}v=void 0}else as?v0(t,n)&&(v="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(v="onCompositionStart");v&&(y0&&n.locale!=="ko"&&(as||v!=="onCompositionStart"?v==="onCompositionEnd"&&as&&(p=p0()):(dr=f,Wm="value"in dr?dr.value:dr.textContent,as=!0)),q=Fc(c,v),0<q.length&&(v=new Ny(v,t,null,n,f),m.push({event:v,listeners:q}),p?v.data=p:(p=_0(n),p!==null&&(v.data=p)))),(p=n1?i1(t,n):r1(t,n))&&(v=Fc(c,"onBeforeInput"),0<v.length&&(q=new Ny("onBeforeInput","beforeinput",null,n,f),m.push({event:q,listeners:v}),q.data=p)),Y1(m,t,c,n,f)}fS(m,e)})}function vl(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Fc(t,e){for(var n=e+"Capture",i=[];t!==null;){var r=t,a=r.stateNode;if(r=r.tag,r!==5&&r!==26&&r!==27||a===null||(r=hl(t,n),r!=null&&i.unshift(vl(t,r,a)),r=hl(t,e),r!=null&&i.push(vl(t,r,a))),t.tag===3)return i;t=t.return}return[]}function Ga(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function bv(t,e,n,i,r){for(var a=e._reactName,s=[];n!==null&&n!==i;){var l=n,u=l.alternate,c=l.stateNode;if(l=l.tag,u!==null&&u===i)break;l!==5&&l!==26&&l!==27||c===null||(u=c,r?(c=hl(n,a),c!=null&&s.unshift(vl(n,c,u))):r||(c=hl(n,a),c!=null&&s.push(vl(n,c,u)))),n=n.return}s.length!==0&&t.push({event:e,listeners:s})}var W1=/\r\n?/g,J1=/\u0000|\uFFFD/g;function wv(t){return(typeof t=="string"?t:""+t).replace(W1,`
`).replace(J1,"")}function mS(t,e){return e=wv(e),wv(t)===e}function Uh(){}function xe(t,e,n,i,r,a){switch(n){case"children":typeof i=="string"?e==="body"||e==="textarea"&&i===""||Is(t,i):(typeof i=="number"||typeof i=="bigint")&&e!=="body"&&Is(t,""+i);break;case"className":Nu(t,"class",i);break;case"tabIndex":Nu(t,"tabindex",i);break;case"dir":case"role":case"viewBox":case"width":case"height":Nu(t,n,i);break;case"style":m0(t,i,a);break;case"data":if(e!=="object"){Nu(t,"data",i);break}case"src":case"href":if(i===""&&(e!=="a"||n!=="href")){t.removeAttribute(n);break}if(i==null||typeof i=="function"||typeof i=="symbol"||typeof i=="boolean"){t.removeAttribute(n);break}i=Zu(""+i),t.setAttribute(n,i);break;case"action":case"formAction":if(typeof i=="function"){t.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof a=="function"&&(n==="formAction"?(e!=="input"&&xe(t,e,"name",r.name,r,null),xe(t,e,"formEncType",r.formEncType,r,null),xe(t,e,"formMethod",r.formMethod,r,null),xe(t,e,"formTarget",r.formTarget,r,null)):(xe(t,e,"encType",r.encType,r,null),xe(t,e,"method",r.method,r,null),xe(t,e,"target",r.target,r,null)));if(i==null||typeof i=="symbol"||typeof i=="boolean"){t.removeAttribute(n);break}i=Zu(""+i),t.setAttribute(n,i);break;case"onClick":i!=null&&(t.onclick=Uh);break;case"onScroll":i!=null&&pe("scroll",t);break;case"onScrollEnd":i!=null&&pe("scrollend",t);break;case"dangerouslySetInnerHTML":if(i!=null){if(typeof i!="object"||!("__html"in i))throw Error(z(61));if(n=i.__html,n!=null){if(r.children!=null)throw Error(z(60));t.innerHTML=n}}break;case"multiple":t.multiple=i&&typeof i!="function"&&typeof i!="symbol";break;case"muted":t.muted=i&&typeof i!="function"&&typeof i!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(i==null||typeof i=="function"||typeof i=="boolean"||typeof i=="symbol"){t.removeAttribute("xlink:href");break}n=Zu(""+i),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":i!=null&&typeof i!="function"&&typeof i!="symbol"?t.setAttribute(n,""+i):t.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":i&&typeof i!="function"&&typeof i!="symbol"?t.setAttribute(n,""):t.removeAttribute(n);break;case"capture":case"download":i===!0?t.setAttribute(n,""):i!==!1&&i!=null&&typeof i!="function"&&typeof i!="symbol"?t.setAttribute(n,i):t.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":i!=null&&typeof i!="function"&&typeof i!="symbol"&&!isNaN(i)&&1<=i?t.setAttribute(n,i):t.removeAttribute(n);break;case"rowSpan":case"start":i==null||typeof i=="function"||typeof i=="symbol"||isNaN(i)?t.removeAttribute(n):t.setAttribute(n,i);break;case"popover":pe("beforetoggle",t),pe("toggle",t),$u(t,"popover",i);break;case"xlinkActuate":vi(t,"http://www.w3.org/1999/xlink","xlink:actuate",i);break;case"xlinkArcrole":vi(t,"http://www.w3.org/1999/xlink","xlink:arcrole",i);break;case"xlinkRole":vi(t,"http://www.w3.org/1999/xlink","xlink:role",i);break;case"xlinkShow":vi(t,"http://www.w3.org/1999/xlink","xlink:show",i);break;case"xlinkTitle":vi(t,"http://www.w3.org/1999/xlink","xlink:title",i);break;case"xlinkType":vi(t,"http://www.w3.org/1999/xlink","xlink:type",i);break;case"xmlBase":vi(t,"http://www.w3.org/XML/1998/namespace","xml:base",i);break;case"xmlLang":vi(t,"http://www.w3.org/XML/1998/namespace","xml:lang",i);break;case"xmlSpace":vi(t,"http://www.w3.org/XML/1998/namespace","xml:space",i);break;case"is":$u(t,"is",i);break;case"innerText":case"textContent":break;default:(!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(n=DR.get(n)||n,$u(t,n,i))}}function Wd(t,e,n,i,r,a){switch(n){case"style":m0(t,i,a);break;case"dangerouslySetInnerHTML":if(i!=null){if(typeof i!="object"||!("__html"in i))throw Error(z(61));if(n=i.__html,n!=null){if(r.children!=null)throw Error(z(60));t.innerHTML=n}}break;case"children":typeof i=="string"?Is(t,i):(typeof i=="number"||typeof i=="bigint")&&Is(t,""+i);break;case"onScroll":i!=null&&pe("scroll",t);break;case"onScrollEnd":i!=null&&pe("scrollend",t);break;case"onClick":i!=null&&(t.onclick=Uh);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!l0.hasOwnProperty(n))e:{if(n[0]==="o"&&n[1]==="n"&&(r=n.endsWith("Capture"),e=n.slice(2,r?n.length-7:void 0),a=t[tn]||null,a=a!=null?a[n]:null,typeof a=="function"&&t.removeEventListener(e,a,r),typeof i=="function")){typeof a!="function"&&a!==null&&(n in t?t[n]=null:t.hasAttribute(n)&&t.removeAttribute(n)),t.addEventListener(e,i,r);break e}n in t?t[n]=i:i===!0?t.setAttribute(n,""):$u(t,n,i)}}}function xt(t,e,n){switch(e){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":pe("error",t),pe("load",t);var i=!1,r=!1,a;for(a in n)if(n.hasOwnProperty(a)){var s=n[a];if(s!=null)switch(a){case"src":i=!0;break;case"srcSet":r=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(z(137,e));default:xe(t,e,a,s,n,null)}}r&&xe(t,e,"srcSet",n.srcSet,n,null),i&&xe(t,e,"src",n.src,n,null);return;case"input":pe("invalid",t);var l=a=s=r=null,u=null,c=null;for(i in n)if(n.hasOwnProperty(i)){var f=n[i];if(f!=null)switch(i){case"name":r=f;break;case"type":s=f;break;case"checked":u=f;break;case"defaultChecked":c=f;break;case"value":a=f;break;case"defaultValue":l=f;break;case"children":case"dangerouslySetInnerHTML":if(f!=null)throw Error(z(137,e));break;default:xe(t,e,i,f,n,null)}}h0(t,a,l,u,c,s,r,!1),bc(t);return;case"select":pe("invalid",t),i=s=a=null;for(r in n)if(n.hasOwnProperty(r)&&(l=n[r],l!=null))switch(r){case"value":a=l;break;case"defaultValue":s=l;break;case"multiple":i=l;default:xe(t,e,r,l,n,null)}e=a,n=s,t.multiple=!!i,e!=null?ms(t,!!i,e,!1):n!=null&&ms(t,!!i,n,!0);return;case"textarea":pe("invalid",t),a=r=i=null;for(s in n)if(n.hasOwnProperty(s)&&(l=n[s],l!=null))switch(s){case"value":i=l;break;case"defaultValue":r=l;break;case"children":a=l;break;case"dangerouslySetInnerHTML":if(l!=null)throw Error(z(91));break;default:xe(t,e,s,l,n,null)}d0(t,i,r,a),bc(t);return;case"option":for(u in n)if(n.hasOwnProperty(u)&&(i=n[u],i!=null))switch(u){case"selected":t.selected=i&&typeof i!="function"&&typeof i!="symbol";break;default:xe(t,e,u,i,n,null)}return;case"dialog":pe("beforetoggle",t),pe("toggle",t),pe("cancel",t),pe("close",t);break;case"iframe":case"object":pe("load",t);break;case"video":case"audio":for(i=0;i<yl.length;i++)pe(yl[i],t);break;case"image":pe("error",t),pe("load",t);break;case"details":pe("toggle",t);break;case"embed":case"source":case"link":pe("error",t),pe("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(c in n)if(n.hasOwnProperty(c)&&(i=n[c],i!=null))switch(c){case"children":case"dangerouslySetInnerHTML":throw Error(z(137,e));default:xe(t,e,c,i,n,null)}return;default:if($m(e)){for(f in n)n.hasOwnProperty(f)&&(i=n[f],i!==void 0&&Wd(t,e,f,i,n,void 0));return}}for(l in n)n.hasOwnProperty(l)&&(i=n[l],i!=null&&xe(t,e,l,i,n,null))}function eI(t,e,n,i){switch(e){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var r=null,a=null,s=null,l=null,u=null,c=null,f=null;for(y in n){var m=n[y];if(n.hasOwnProperty(y)&&m!=null)switch(y){case"checked":break;case"value":break;case"defaultValue":u=m;default:i.hasOwnProperty(y)||xe(t,e,y,null,i,m)}}for(var g in i){var y=i[g];if(m=n[g],i.hasOwnProperty(g)&&(y!=null||m!=null))switch(g){case"type":a=y;break;case"name":r=y;break;case"checked":c=y;break;case"defaultChecked":f=y;break;case"value":s=y;break;case"defaultValue":l=y;break;case"children":case"dangerouslySetInnerHTML":if(y!=null)throw Error(z(137,e));break;default:y!==m&&xe(t,e,g,y,i,m)}}Sd(t,s,l,u,c,f,a,r);return;case"select":y=s=l=g=null;for(a in n)if(u=n[a],n.hasOwnProperty(a)&&u!=null)switch(a){case"value":break;case"multiple":y=u;default:i.hasOwnProperty(a)||xe(t,e,a,null,i,u)}for(r in i)if(a=i[r],u=n[r],i.hasOwnProperty(r)&&(a!=null||u!=null))switch(r){case"value":g=a;break;case"defaultValue":l=a;break;case"multiple":s=a;default:a!==u&&xe(t,e,r,a,i,u)}e=l,n=s,i=y,g!=null?ms(t,!!n,g,!1):!!i!=!!n&&(e!=null?ms(t,!!n,e,!0):ms(t,!!n,n?[]:"",!1));return;case"textarea":y=g=null;for(l in n)if(r=n[l],n.hasOwnProperty(l)&&r!=null&&!i.hasOwnProperty(l))switch(l){case"value":break;case"children":break;default:xe(t,e,l,null,i,r)}for(s in i)if(r=i[s],a=n[s],i.hasOwnProperty(s)&&(r!=null||a!=null))switch(s){case"value":g=r;break;case"defaultValue":y=r;break;case"children":break;case"dangerouslySetInnerHTML":if(r!=null)throw Error(z(91));break;default:r!==a&&xe(t,e,s,r,i,a)}f0(t,g,y);return;case"option":for(var C in n)if(g=n[C],n.hasOwnProperty(C)&&g!=null&&!i.hasOwnProperty(C))switch(C){case"selected":t.selected=!1;break;default:xe(t,e,C,null,i,g)}for(u in i)if(g=i[u],y=n[u],i.hasOwnProperty(u)&&g!==y&&(g!=null||y!=null))switch(u){case"selected":t.selected=g&&typeof g!="function"&&typeof g!="symbol";break;default:xe(t,e,u,g,i,y)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var O in n)g=n[O],n.hasOwnProperty(O)&&g!=null&&!i.hasOwnProperty(O)&&xe(t,e,O,null,i,g);for(c in i)if(g=i[c],y=n[c],i.hasOwnProperty(c)&&g!==y&&(g!=null||y!=null))switch(c){case"children":case"dangerouslySetInnerHTML":if(g!=null)throw Error(z(137,e));break;default:xe(t,e,c,g,i,y)}return;default:if($m(e)){for(var M in n)g=n[M],n.hasOwnProperty(M)&&g!==void 0&&!i.hasOwnProperty(M)&&Wd(t,e,M,void 0,i,g);for(f in i)g=i[f],y=n[f],!i.hasOwnProperty(f)||g===y||g===void 0&&y===void 0||Wd(t,e,f,g,i,y);return}}for(var T in n)g=n[T],n.hasOwnProperty(T)&&g!=null&&!i.hasOwnProperty(T)&&xe(t,e,T,null,i,g);for(m in i)g=i[m],y=n[m],!i.hasOwnProperty(m)||g===y||g==null&&y==null||xe(t,e,m,g,i,y)}var Jd=null,em=null;function qc(t){return t.nodeType===9?t:t.ownerDocument}function Rv(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function gS(t,e){if(t===0)switch(e){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&e==="foreignObject"?0:t}function tm(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.children=="bigint"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Wf=null;function tI(){var t=window.event;return t&&t.type==="popstate"?t===Wf?!1:(Wf=t,!0):(Wf=null,!1)}var pS=typeof setTimeout=="function"?setTimeout:void 0,nI=typeof clearTimeout=="function"?clearTimeout:void 0,Iv=typeof Promise=="function"?Promise:void 0,iI=typeof queueMicrotask=="function"?queueMicrotask:typeof Iv<"u"?function(t){return Iv.resolve(null).then(t).catch(rI)}:pS;function rI(t){setTimeout(function(){throw t})}function Br(t){return t==="head"}function Cv(t,e){var n=e,i=0,r=0;do{var a=n.nextSibling;if(t.removeChild(n),a&&a.nodeType===8)if(n=a.data,n==="/$"){if(0<i&&8>i){n=i;var s=t.ownerDocument;if(n&1&&rl(s.documentElement),n&2&&rl(s.body),n&4)for(n=s.head,rl(n),s=n.firstChild;s;){var l=s.nextSibling,u=s.nodeName;s[zl]||u==="SCRIPT"||u==="STYLE"||u==="LINK"&&s.rel.toLowerCase()==="stylesheet"||n.removeChild(s),s=l}}if(r===0){t.removeChild(a),Al(e);return}r--}else n==="$"||n==="$?"||n==="$!"?r++:i=n.charCodeAt(0)-48;else i=0;n=a}while(n);Al(e)}function nm(t){var e=t.firstChild;for(e&&e.nodeType===10&&(e=e.nextSibling);e;){var n=e;switch(e=e.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":nm(n),Xm(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(n.rel.toLowerCase()==="stylesheet")continue}t.removeChild(n)}}function aI(t,e,n,i){for(;t.nodeType===1;){var r=n;if(t.nodeName.toLowerCase()!==e.toLowerCase()){if(!i&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(i){if(!t[zl])switch(e){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(a=t.getAttribute("rel"),a==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(a!==r.rel||t.getAttribute("href")!==(r.href==null||r.href===""?null:r.href)||t.getAttribute("crossorigin")!==(r.crossOrigin==null?null:r.crossOrigin)||t.getAttribute("title")!==(r.title==null?null:r.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(a=t.getAttribute("src"),(a!==(r.src==null?null:r.src)||t.getAttribute("type")!==(r.type==null?null:r.type)||t.getAttribute("crossorigin")!==(r.crossOrigin==null?null:r.crossOrigin))&&a&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(e==="input"&&t.type==="hidden"){var a=r.name==null?null:""+r.name;if(r.type==="hidden"&&t.getAttribute("name")===a)return t}else return t;if(t=jn(t.nextSibling),t===null)break}return null}function sI(t,e,n){if(e==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!n||(t=jn(t.nextSibling),t===null))return null;return t}function im(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState==="complete"}function oI(t,e){var n=t.ownerDocument;if(t.data!=="$?"||n.readyState==="complete")e();else{var i=function(){e(),n.removeEventListener("DOMContentLoaded",i)};n.addEventListener("DOMContentLoaded",i),t._reactRetry=i}}function jn(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?"||e==="F!"||e==="F")break;if(e==="/$")return null}}return t}var rm=null;function Dv(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}function yS(t,e,n){switch(e=qc(n),t){case"html":if(t=e.documentElement,!t)throw Error(z(452));return t;case"head":if(t=e.head,!t)throw Error(z(453));return t;case"body":if(t=e.body,!t)throw Error(z(454));return t;default:throw Error(z(451))}}function rl(t){for(var e=t.attributes;e.length;)t.removeAttributeNode(e[0]);Xm(t)}var Nn=new Map,Ov=new Set;function Gc(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var Fi=Re.d;Re.d={f:lI,r:uI,D:cI,C:hI,L:fI,m:dI,X:gI,S:mI,M:pI};function lI(){var t=Fi.f(),e=Vh();return t||e}function uI(t){var e=Xs(t);e!==null&&e.tag===5&&e.type==="form"?cT(e):Fi.r(t)}var Ws=typeof document>"u"?null:document;function vS(t,e,n){var i=Ws;if(i&&typeof e=="string"&&e){var r=In(e);r='link[rel="'+t+'"][href="'+r+'"]',typeof n=="string"&&(r+='[crossorigin="'+n+'"]'),Ov.has(r)||(Ov.add(r),t={rel:t,crossOrigin:n,href:e},i.querySelector(r)===null&&(e=i.createElement("link"),xt(e,"link",t),bt(e),i.head.appendChild(e)))}}function cI(t){Fi.D(t),vS("dns-prefetch",t,null)}function hI(t,e){Fi.C(t,e),vS("preconnect",t,e)}function fI(t,e,n){Fi.L(t,e,n);var i=Ws;if(i&&t&&e){var r='link[rel="preload"][as="'+In(e)+'"]';e==="image"&&n&&n.imageSrcSet?(r+='[imagesrcset="'+In(n.imageSrcSet)+'"]',typeof n.imageSizes=="string"&&(r+='[imagesizes="'+In(n.imageSizes)+'"]')):r+='[href="'+In(t)+'"]';var a=r;switch(e){case"style":a=Ps(t);break;case"script":a=Js(t)}Nn.has(a)||(t=qe({rel:"preload",href:e==="image"&&n&&n.imageSrcSet?void 0:t,as:e},n),Nn.set(a,t),i.querySelector(r)!==null||e==="style"&&i.querySelector(Xl(a))||e==="script"&&i.querySelector($l(a))||(e=i.createElement("link"),xt(e,"link",t),bt(e),i.head.appendChild(e)))}}function dI(t,e){Fi.m(t,e);var n=Ws;if(n&&t){var i=e&&typeof e.as=="string"?e.as:"script",r='link[rel="modulepreload"][as="'+In(i)+'"][href="'+In(t)+'"]',a=r;switch(i){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":a=Js(t)}if(!Nn.has(a)&&(t=qe({rel:"modulepreload",href:t},e),Nn.set(a,t),n.querySelector(r)===null)){switch(i){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector($l(a)))return}i=n.createElement("link"),xt(i,"link",t),bt(i),n.head.appendChild(i)}}}function mI(t,e,n){Fi.S(t,e,n);var i=Ws;if(i&&t){var r=ds(i).hoistableStyles,a=Ps(t);e=e||"default";var s=r.get(a);if(!s){var l={loading:0,preload:null};if(s=i.querySelector(Xl(a)))l.loading=5;else{t=qe({rel:"stylesheet",href:t,"data-precedence":e},n),(n=Nn.get(a))&&Mg(t,n);var u=s=i.createElement("link");bt(u),xt(u,"link",t),u._p=new Promise(function(c,f){u.onload=c,u.onerror=f}),u.addEventListener("load",function(){l.loading|=1}),u.addEventListener("error",function(){l.loading|=2}),l.loading|=4,sc(s,e,i)}s={type:"stylesheet",instance:s,count:1,state:l},r.set(a,s)}}}function gI(t,e){Fi.X(t,e);var n=Ws;if(n&&t){var i=ds(n).hoistableScripts,r=Js(t),a=i.get(r);a||(a=n.querySelector($l(r)),a||(t=qe({src:t,async:!0},e),(e=Nn.get(r))&&xg(t,e),a=n.createElement("script"),bt(a),xt(a,"link",t),n.head.appendChild(a)),a={type:"script",instance:a,count:1,state:null},i.set(r,a))}}function pI(t,e){Fi.M(t,e);var n=Ws;if(n&&t){var i=ds(n).hoistableScripts,r=Js(t),a=i.get(r);a||(a=n.querySelector($l(r)),a||(t=qe({src:t,async:!0,type:"module"},e),(e=Nn.get(r))&&xg(t,e),a=n.createElement("script"),bt(a),xt(a,"link",t),n.head.appendChild(a)),a={type:"script",instance:a,count:1,state:null},i.set(r,a))}}function Nv(t,e,n,i){var r=(r=vr.current)?Gc(r):null;if(!r)throw Error(z(446));switch(t){case"meta":case"title":return null;case"style":return typeof n.precedence=="string"&&typeof n.href=="string"?(e=Ps(n.href),n=ds(r).hoistableStyles,i=n.get(e),i||(i={type:"style",instance:null,count:0,state:null},n.set(e,i)),i):{type:"void",instance:null,count:0,state:null};case"link":if(n.rel==="stylesheet"&&typeof n.href=="string"&&typeof n.precedence=="string"){t=Ps(n.href);var a=ds(r).hoistableStyles,s=a.get(t);if(s||(r=r.ownerDocument||r,s={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},a.set(t,s),(a=r.querySelector(Xl(t)))&&!a._p&&(s.instance=a,s.state.loading=5),Nn.has(t)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},Nn.set(t,n),a||yI(r,t,n,s.state))),e&&i===null)throw Error(z(528,""));return s}if(e&&i!==null)throw Error(z(529,""));return null;case"script":return e=n.async,n=n.src,typeof n=="string"&&e&&typeof e!="function"&&typeof e!="symbol"?(e=Js(n),n=ds(r).hoistableScripts,i=n.get(e),i||(i={type:"script",instance:null,count:0,state:null},n.set(e,i)),i):{type:"void",instance:null,count:0,state:null};default:throw Error(z(444,t))}}function Ps(t){return'href="'+In(t)+'"'}function Xl(t){return'link[rel="stylesheet"]['+t+"]"}function _S(t){return qe({},t,{"data-precedence":t.precedence,precedence:null})}function yI(t,e,n,i){t.querySelector('link[rel="preload"][as="style"]['+e+"]")?i.loading=1:(e=t.createElement("link"),i.preload=e,e.addEventListener("load",function(){return i.loading|=1}),e.addEventListener("error",function(){return i.loading|=2}),xt(e,"link",n),bt(e),t.head.appendChild(e))}function Js(t){return'[src="'+In(t)+'"]'}function $l(t){return"script[async]"+t}function Mv(t,e,n){if(e.count++,e.instance===null)switch(e.type){case"style":var i=t.querySelector('style[data-href~="'+In(n.href)+'"]');if(i)return e.instance=i,bt(i),i;var r=qe({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return i=(t.ownerDocument||t).createElement("style"),bt(i),xt(i,"style",r),sc(i,n.precedence,t),e.instance=i;case"stylesheet":r=Ps(n.href);var a=t.querySelector(Xl(r));if(a)return e.state.loading|=4,e.instance=a,bt(a),a;i=_S(n),(r=Nn.get(r))&&Mg(i,r),a=(t.ownerDocument||t).createElement("link"),bt(a);var s=a;return s._p=new Promise(function(l,u){s.onload=l,s.onerror=u}),xt(a,"link",i),e.state.loading|=4,sc(a,n.precedence,t),e.instance=a;case"script":return a=Js(n.src),(r=t.querySelector($l(a)))?(e.instance=r,bt(r),r):(i=n,(r=Nn.get(a))&&(i=qe({},n),xg(i,r)),t=t.ownerDocument||t,r=t.createElement("script"),bt(r),xt(r,"link",i),t.head.appendChild(r),e.instance=r);case"void":return null;default:throw Error(z(443,e.type))}else e.type==="stylesheet"&&!(e.state.loading&4)&&(i=e.instance,e.state.loading|=4,sc(i,n.precedence,t));return e.instance}function sc(t,e,n){for(var i=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),r=i.length?i[i.length-1]:null,a=r,s=0;s<i.length;s++){var l=i[s];if(l.dataset.precedence===e)a=l;else if(a!==r)break}a?a.parentNode.insertBefore(t,a.nextSibling):(e=n.nodeType===9?n.head:n,e.insertBefore(t,e.firstChild))}function Mg(t,e){t.crossOrigin==null&&(t.crossOrigin=e.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=e.referrerPolicy),t.title==null&&(t.title=e.title)}function xg(t,e){t.crossOrigin==null&&(t.crossOrigin=e.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=e.referrerPolicy),t.integrity==null&&(t.integrity=e.integrity)}var oc=null;function xv(t,e,n){if(oc===null){var i=new Map,r=oc=new Map;r.set(n,i)}else r=oc,i=r.get(n),i||(i=new Map,r.set(n,i));if(i.has(t))return i;for(i.set(t,null),n=n.getElementsByTagName(t),r=0;r<n.length;r++){var a=n[r];if(!(a[zl]||a[jt]||t==="link"&&a.getAttribute("rel")==="stylesheet")&&a.namespaceURI!=="http://www.w3.org/2000/svg"){var s=a.getAttribute(e)||"";s=t+s;var l=i.get(s);l?l.push(a):i.set(s,[a])}}return i}function Vv(t,e,n){t=t.ownerDocument||t,t.head.insertBefore(n,e==="title"?t.querySelector("head > title"):null)}function vI(t,e,n){if(n===1||e.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof e.precedence!="string"||typeof e.href!="string"||e.href==="")break;return!0;case"link":if(typeof e.rel!="string"||typeof e.href!="string"||e.href===""||e.onLoad||e.onError)break;switch(e.rel){case"stylesheet":return t=e.disabled,typeof e.precedence=="string"&&t==null;default:return!0}case"script":if(e.async&&typeof e.async!="function"&&typeof e.async!="symbol"&&!e.onLoad&&!e.onError&&e.src&&typeof e.src=="string")return!0}return!1}function ES(t){return!(t.type==="stylesheet"&&!(t.state.loading&3))}var _l=null;function _I(){}function EI(t,e,n){if(_l===null)throw Error(z(475));var i=_l;if(e.type==="stylesheet"&&(typeof n.media!="string"||matchMedia(n.media).matches!==!1)&&!(e.state.loading&4)){if(e.instance===null){var r=Ps(n.href),a=t.querySelector(Xl(r));if(a){t=a._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(i.count++,i=Kc.bind(i),t.then(i,i)),e.state.loading|=4,e.instance=a,bt(a);return}a=t.ownerDocument||t,n=_S(n),(r=Nn.get(r))&&Mg(n,r),a=a.createElement("link"),bt(a);var s=a;s._p=new Promise(function(l,u){s.onload=l,s.onerror=u}),xt(a,"link",n),e.instance=a}i.stylesheets===null&&(i.stylesheets=new Map),i.stylesheets.set(e,t),(t=e.state.preload)&&!(e.state.loading&3)&&(i.count++,e=Kc.bind(i),t.addEventListener("load",e),t.addEventListener("error",e))}}function TI(){if(_l===null)throw Error(z(475));var t=_l;return t.stylesheets&&t.count===0&&am(t,t.stylesheets),0<t.count?function(e){var n=setTimeout(function(){if(t.stylesheets&&am(t,t.stylesheets),t.unsuspend){var i=t.unsuspend;t.unsuspend=null,i()}},6e4);return t.unsuspend=e,function(){t.unsuspend=null,clearTimeout(n)}}:null}function Kc(){if(this.count--,this.count===0){if(this.stylesheets)am(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var Qc=null;function am(t,e){t.stylesheets=null,t.unsuspend!==null&&(t.count++,Qc=new Map,e.forEach(SI,t),Qc=null,Kc.call(t))}function SI(t,e){if(!(e.state.loading&4)){var n=Qc.get(t);if(n)var i=n.get(null);else{n=new Map,Qc.set(t,n);for(var r=t.querySelectorAll("link[data-precedence],style[data-precedence]"),a=0;a<r.length;a++){var s=r[a];(s.nodeName==="LINK"||s.getAttribute("media")!=="not all")&&(n.set(s.dataset.precedence,s),i=s)}i&&n.set(null,i)}r=e.instance,s=r.getAttribute("data-precedence"),a=n.get(s)||i,a===i&&n.set(null,r),n.set(s,r),this.count++,i=Kc.bind(this),r.addEventListener("load",i),r.addEventListener("error",i),a?a.parentNode.insertBefore(r,a.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(r,t.firstChild)),e.state.loading|=4}}var El={$$typeof:Si,Provider:null,Consumer:null,_currentValue:ua,_currentValue2:ua,_threadCount:0};function AI(t,e,n,i,r,a,s,l){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ef(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ef(0),this.hiddenUpdates=Ef(null),this.identifierPrefix=i,this.onUncaughtError=r,this.onCaughtError=a,this.onRecoverableError=s,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=l,this.incompleteTransitions=new Map}function TS(t,e,n,i,r,a,s,l,u,c,f,m){return t=new AI(t,e,n,s,l,u,c,m),e=1,a===!0&&(e|=24),a=fn(3,null,null,e),t.current=a,a.stateNode=t,e=og(),e.refCount++,t.pooledCache=e,e.refCount++,a.memoizedState={element:i,isDehydrated:n,cache:e},ug(a),t}function SS(t){return t?(t=us,t):us}function AS(t,e,n,i,r,a){r=SS(r),i.context===null?i.context=r:i.pendingContext=r,i=_r(e),i.payload={element:n},a=a===void 0?null:a,a!==null&&(i.callback=a),n=Er(t,i,e),n!==null&&(yn(n,t,e),$o(n,t,e))}function Pv(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Vg(t,e){Pv(t,e),(t=t.alternate)&&Pv(t,e)}function bS(t){if(t.tag===13){var e=$s(t,67108864);e!==null&&yn(e,t,67108864),Vg(t,67108864)}}var Yc=!0;function bI(t,e,n,i){var r=se.T;se.T=null;var a=Re.p;try{Re.p=2,Pg(t,e,n,i)}finally{Re.p=a,se.T=r}}function wI(t,e,n,i){var r=se.T;se.T=null;var a=Re.p;try{Re.p=8,Pg(t,e,n,i)}finally{Re.p=a,se.T=r}}function Pg(t,e,n,i){if(Yc){var r=sm(i);if(r===null)Zf(t,e,i,Xc,n),Lv(t,i);else if(II(r,t,e,n,i))i.stopPropagation();else if(Lv(t,i),e&4&&-1<RI.indexOf(t)){for(;r!==null;){var a=Xs(r);if(a!==null)switch(a.tag){case 3:if(a=a.stateNode,a.current.memoizedState.isDehydrated){var s=ea(a.pendingLanes);if(s!==0){var l=a;for(l.pendingLanes|=2,l.entangledLanes|=2;s;){var u=1<<31-gn(s);l.entanglements[1]|=u,s&=~u}ci(a),!(Me&6)&&(zc=ti()+500,Yl(0))}}break;case 13:l=$s(a,2),l!==null&&yn(l,a,2),Vh(),Vg(a,2)}if(a=sm(i),a===null&&Zf(t,e,i,Xc,n),a===r)break;r=a}r!==null&&i.stopPropagation()}else Zf(t,e,i,null,n)}}function sm(t){return t=Zm(t),Lg(t)}var Xc=null;function Lg(t){if(Xc=null,t=is(t),t!==null){var e=Pl(t);if(e===null)t=null;else{var n=e.tag;if(n===13){if(t=XE(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null)}}return Xc=t,null}function wS(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(hR()){case JE:return 2;case e0:return 8;case Ac:case fR:return 32;case t0:return 268435456;default:return 32}default:return 32}}var om=!1,Ar=null,br=null,wr=null,Tl=new Map,Sl=new Map,lr=[],RI="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Lv(t,e){switch(t){case"focusin":case"focusout":Ar=null;break;case"dragenter":case"dragleave":br=null;break;case"mouseover":case"mouseout":wr=null;break;case"pointerover":case"pointerout":Tl.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Sl.delete(e.pointerId)}}function No(t,e,n,i,r,a){return t===null||t.nativeEvent!==a?(t={blockedOn:e,domEventName:n,eventSystemFlags:i,nativeEvent:a,targetContainers:[r]},e!==null&&(e=Xs(e),e!==null&&bS(e)),t):(t.eventSystemFlags|=i,e=t.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),t)}function II(t,e,n,i,r){switch(e){case"focusin":return Ar=No(Ar,t,e,n,i,r),!0;case"dragenter":return br=No(br,t,e,n,i,r),!0;case"mouseover":return wr=No(wr,t,e,n,i,r),!0;case"pointerover":var a=r.pointerId;return Tl.set(a,No(Tl.get(a)||null,t,e,n,i,r)),!0;case"gotpointercapture":return a=r.pointerId,Sl.set(a,No(Sl.get(a)||null,t,e,n,i,r)),!0}return!1}function RS(t){var e=is(t.target);if(e!==null){var n=Pl(e);if(n!==null){if(e=n.tag,e===13){if(e=XE(n),e!==null){t.blockedOn=e,ER(t.priority,function(){if(n.tag===13){var i=pn();i=Qm(i);var r=$s(n,i);r!==null&&yn(r,n,i),Vg(n,i)}});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function lc(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=sm(t.nativeEvent);if(n===null){n=t.nativeEvent;var i=new n.constructor(n.type,n);bd=i,n.target.dispatchEvent(i),bd=null}else return e=Xs(n),e!==null&&bS(e),t.blockedOn=n,!1;e.shift()}return!0}function Uv(t,e,n){lc(t)&&n.delete(e)}function CI(){om=!1,Ar!==null&&lc(Ar)&&(Ar=null),br!==null&&lc(br)&&(br=null),wr!==null&&lc(wr)&&(wr=null),Tl.forEach(Uv),Sl.forEach(Uv)}function zu(t,e){t.blockedOn===e&&(t.blockedOn=null,om||(om=!0,Tt.unstable_scheduleCallback(Tt.unstable_NormalPriority,CI)))}var ju=null;function kv(t){ju!==t&&(ju=t,Tt.unstable_scheduleCallback(Tt.unstable_NormalPriority,function(){ju===t&&(ju=null);for(var e=0;e<t.length;e+=3){var n=t[e],i=t[e+1],r=t[e+2];if(typeof i!="function"){if(Lg(i||n)===null)continue;break}var a=Xs(n);a!==null&&(t.splice(e,3),e-=3,jd(a,{pending:!0,data:r,method:n.method,action:i},i,r))}}))}function Al(t){function e(u){return zu(u,t)}Ar!==null&&zu(Ar,t),br!==null&&zu(br,t),wr!==null&&zu(wr,t),Tl.forEach(e),Sl.forEach(e);for(var n=0;n<lr.length;n++){var i=lr[n];i.blockedOn===t&&(i.blockedOn=null)}for(;0<lr.length&&(n=lr[0],n.blockedOn===null);)RS(n),n.blockedOn===null&&lr.shift();if(n=(t.ownerDocument||t).$$reactFormReplay,n!=null)for(i=0;i<n.length;i+=3){var r=n[i],a=n[i+1],s=r[tn]||null;if(typeof a=="function")s||kv(n);else if(s){var l=null;if(a&&a.hasAttribute("formAction")){if(r=a,s=a[tn]||null)l=s.formAction;else if(Lg(r)!==null)continue}else l=s.action;typeof l=="function"?n[i+1]=l:(n.splice(i,3),i-=3),kv(n)}}}function Ug(t){this._internalRoot=t}kh.prototype.render=Ug.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(z(409));var n=e.current,i=pn();AS(n,i,t,e,null,null)};kh.prototype.unmount=Ug.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;AS(t.current,2,null,t,null,null),Vh(),e[Ys]=null}};function kh(t){this._internalRoot=t}kh.prototype.unstable_scheduleHydration=function(t){if(t){var e=s0();t={blockedOn:null,target:t,priority:e};for(var n=0;n<lr.length&&e!==0&&e<lr[n].priority;n++);lr.splice(n,0,t),n===0&&RS(t)}};var zv=QE.version;if(zv!=="19.1.0")throw Error(z(527,zv,"19.1.0"));Re.findDOMNode=function(t){var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(z(188)):(t=Object.keys(t).join(","),Error(z(268,t)));return t=rR(e),t=t!==null?$E(t):null,t=t===null?null:t.stateNode,t};var DI={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:se,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Bu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Bu.isDisabled&&Bu.supportsFiber)try{Ll=Bu.inject(DI),mn=Bu}catch{}}Sh.createRoot=function(t,e){if(!YE(t))throw Error(z(299));var n=!1,i="",r=TT,a=ST,s=AT,l=null;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onUncaughtError!==void 0&&(r=e.onUncaughtError),e.onCaughtError!==void 0&&(a=e.onCaughtError),e.onRecoverableError!==void 0&&(s=e.onRecoverableError),e.unstable_transitionCallbacks!==void 0&&(l=e.unstable_transitionCallbacks)),e=TS(t,1,!1,null,null,n,i,r,a,s,l,null),t[Ys]=e.current,Ng(t),new Ug(e)};Sh.hydrateRoot=function(t,e,n){if(!YE(t))throw Error(z(299));var i=!1,r="",a=TT,s=ST,l=AT,u=null,c=null;return n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(r=n.identifierPrefix),n.onUncaughtError!==void 0&&(a=n.onUncaughtError),n.onCaughtError!==void 0&&(s=n.onCaughtError),n.onRecoverableError!==void 0&&(l=n.onRecoverableError),n.unstable_transitionCallbacks!==void 0&&(u=n.unstable_transitionCallbacks),n.formState!==void 0&&(c=n.formState)),e=TS(t,1,!0,e,n??null,i,r,a,s,l,u,c),e.context=SS(null),n=e.current,i=pn(),i=Qm(i),r=_r(i),r.callback=null,Er(n,r,i),n=i,e.current.lanes=n,kl(e,n),ci(e),t[Ys]=e.current,Ng(t),new kh(e)};Sh.version="19.1.0";function IS(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(IS)}catch(t){console.error(t)}}IS(),BE.exports=Sh;var OI=BE.exports;const NI=Um(OI);/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Qe(){return Qe=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Qe.apply(this,arguments)}var ut;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(ut||(ut={}));const jv="popstate";function MI(t){t===void 0&&(t={});function e(i,r){let{pathname:a,search:s,hash:l}=i.location;return bl("",{pathname:a,search:s,hash:l},r.state&&r.state.usr||null,r.state&&r.state.key||"default")}function n(i,r){return typeof r=="string"?r:Ta(r)}return VI(e,n,null,t)}function ge(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Ls(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function xI(){return Math.random().toString(36).substr(2,8)}function Bv(t,e){return{usr:t.state,key:t.key,idx:e}}function bl(t,e,n,i){return n===void 0&&(n=null),Qe({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Hr(e):e,{state:n,key:e&&e.key||i||xI()})}function Ta(t){let{pathname:e="/",search:n="",hash:i=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),i&&i!=="#"&&(e+=i.charAt(0)==="#"?i:"#"+i),e}function Hr(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let i=t.indexOf("?");i>=0&&(e.search=t.substr(i),t=t.substr(0,i)),t&&(e.pathname=t)}return e}function VI(t,e,n,i){i===void 0&&(i={});let{window:r=document.defaultView,v5Compat:a=!1}=i,s=r.history,l=ut.Pop,u=null,c=f();c==null&&(c=0,s.replaceState(Qe({},s.state,{idx:c}),""));function f(){return(s.state||{idx:null}).idx}function m(){l=ut.Pop;let M=f(),T=M==null?null:M-c;c=M,u&&u({action:l,location:O.location,delta:T})}function g(M,T){l=ut.Push;let E=bl(O.location,M,T);c=f()+1;let b=Bv(E,c),N=O.createHref(E);try{s.pushState(b,"",N)}catch(j){if(j instanceof DOMException&&j.name==="DataCloneError")throw j;r.location.assign(N)}a&&u&&u({action:l,location:O.location,delta:1})}function y(M,T){l=ut.Replace;let E=bl(O.location,M,T);c=f();let b=Bv(E,c),N=O.createHref(E);s.replaceState(b,"",N),a&&u&&u({action:l,location:O.location,delta:0})}function C(M){let T=r.location.origin!=="null"?r.location.origin:r.location.href,E=typeof M=="string"?M:Ta(M);return E=E.replace(/ $/,"%20"),ge(T,"No window.location.(origin|href) available to create URL for href: "+E),new URL(E,T)}let O={get action(){return l},get location(){return t(r,s)},listen(M){if(u)throw new Error("A history only accepts one active listener");return r.addEventListener(jv,m),u=M,()=>{r.removeEventListener(jv,m),u=null}},createHref(M){return e(r,M)},createURL:C,encodeLocation(M){let T=C(M);return{pathname:T.pathname,search:T.search,hash:T.hash}},push:g,replace:y,go(M){return s.go(M)}};return O}var Ne;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Ne||(Ne={}));const PI=new Set(["lazy","caseSensitive","path","id","index","children"]);function LI(t){return t.index===!0}function $c(t,e,n,i){return n===void 0&&(n=[]),i===void 0&&(i={}),t.map((r,a)=>{let s=[...n,String(a)],l=typeof r.id=="string"?r.id:s.join("-");if(ge(r.index!==!0||!r.children,"Cannot specify children on an index route"),ge(!i[l],'Found a route id collision on id "'+l+`".  Route id's must be globally unique within Data Router usages`),LI(r)){let u=Qe({},r,e(r),{id:l});return i[l]=u,u}else{let u=Qe({},r,e(r),{id:l,children:void 0});return i[l]=u,r.children&&(u.children=$c(r.children,e,s,i)),u}})}function ra(t,e,n){return n===void 0&&(n="/"),uc(t,e,n,!1)}function uc(t,e,n,i){let r=typeof e=="string"?Hr(e):e,a=Ui(r.pathname||"/",n);if(a==null)return null;let s=CS(t);kI(s);let l=null;for(let u=0;l==null&&u<s.length;++u){let c=XI(a);l=QI(s[u],c,i)}return l}function UI(t,e){let{route:n,pathname:i,params:r}=t;return{id:n.id,pathname:i,params:r,data:e[n.id],handle:n.handle}}function CS(t,e,n,i){e===void 0&&(e=[]),n===void 0&&(n=[]),i===void 0&&(i="");let r=(a,s,l)=>{let u={relativePath:l===void 0?a.path||"":l,caseSensitive:a.caseSensitive===!0,childrenIndex:s,route:a};u.relativePath.startsWith("/")&&(ge(u.relativePath.startsWith(i),'Absolute route path "'+u.relativePath+'" nested under path '+('"'+i+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),u.relativePath=u.relativePath.slice(i.length));let c=Ni([i,u.relativePath]),f=n.concat(u);a.children&&a.children.length>0&&(ge(a.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),CS(a.children,e,f,c)),!(a.path==null&&!a.index)&&e.push({path:c,score:GI(c,a.index),routesMeta:f})};return t.forEach((a,s)=>{var l;if(a.path===""||!((l=a.path)!=null&&l.includes("?")))r(a,s);else for(let u of DS(a.path))r(a,s,u)}),e}function DS(t){let e=t.split("/");if(e.length===0)return[];let[n,...i]=e,r=n.endsWith("?"),a=n.replace(/\?$/,"");if(i.length===0)return r?[a,""]:[a];let s=DS(i.join("/")),l=[];return l.push(...s.map(u=>u===""?a:[a,u].join("/"))),r&&l.push(...s),l.map(u=>t.startsWith("/")&&u===""?"/":u)}function kI(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:KI(e.routesMeta.map(i=>i.childrenIndex),n.routesMeta.map(i=>i.childrenIndex)))}const zI=/^:[\w-]+$/,jI=3,BI=2,HI=1,FI=10,qI=-2,Hv=t=>t==="*";function GI(t,e){let n=t.split("/"),i=n.length;return n.some(Hv)&&(i+=qI),e&&(i+=BI),n.filter(r=>!Hv(r)).reduce((r,a)=>r+(zI.test(a)?jI:a===""?HI:FI),i)}function KI(t,e){return t.length===e.length&&t.slice(0,-1).every((i,r)=>i===e[r])?t[t.length-1]-e[e.length-1]:0}function QI(t,e,n){n===void 0&&(n=!1);let{routesMeta:i}=t,r={},a="/",s=[];for(let l=0;l<i.length;++l){let u=i[l],c=l===i.length-1,f=a==="/"?e:e.slice(a.length)||"/",m=Zc({path:u.relativePath,caseSensitive:u.caseSensitive,end:c},f),g=u.route;if(!m&&c&&n&&!i[i.length-1].route.index&&(m=Zc({path:u.relativePath,caseSensitive:u.caseSensitive,end:!1},f)),!m)return null;Object.assign(r,m.params),s.push({params:r,pathname:Ni([a,m.pathname]),pathnameBase:WI(Ni([a,m.pathnameBase])),route:g}),m.pathnameBase!=="/"&&(a=Ni([a,m.pathnameBase]))}return s}function Zc(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,i]=YI(t.path,t.caseSensitive,t.end),r=e.match(n);if(!r)return null;let a=r[0],s=a.replace(/(.)\/+$/,"$1"),l=r.slice(1);return{params:i.reduce((c,f,m)=>{let{paramName:g,isOptional:y}=f;if(g==="*"){let O=l[m]||"";s=a.slice(0,a.length-O.length).replace(/(.)\/+$/,"$1")}const C=l[m];return y&&!C?c[g]=void 0:c[g]=(C||"").replace(/%2F/g,"/"),c},{}),pathname:a,pathnameBase:s,pattern:t}}function YI(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),Ls(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let i=[],r="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(s,l,u)=>(i.push({paramName:l,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(i.push({paramName:"*"}),r+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?r+="\\/*$":t!==""&&t!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,e?void 0:"i"),i]}function XI(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Ls(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Ui(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,i=t.charAt(n);return i&&i!=="/"?null:t.slice(n)||"/"}function $I(t,e){e===void 0&&(e="/");let{pathname:n,search:i="",hash:r=""}=typeof t=="string"?Hr(t):t;return{pathname:n?n.startsWith("/")?n:ZI(n,e):e,search:JI(i),hash:eC(r)}}function ZI(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(r=>{r===".."?n.length>1&&n.pop():r!=="."&&n.push(r)}),n.length>1?n.join("/"):"/"}function Jf(t,e,n,i){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(i)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function OS(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function kg(t,e){let n=OS(t);return e?n.map((i,r)=>r===n.length-1?i.pathname:i.pathnameBase):n.map(i=>i.pathnameBase)}function zg(t,e,n,i){i===void 0&&(i=!1);let r;typeof t=="string"?r=Hr(t):(r=Qe({},t),ge(!r.pathname||!r.pathname.includes("?"),Jf("?","pathname","search",r)),ge(!r.pathname||!r.pathname.includes("#"),Jf("#","pathname","hash",r)),ge(!r.search||!r.search.includes("#"),Jf("#","search","hash",r)));let a=t===""||r.pathname==="",s=a?"/":r.pathname,l;if(s==null)l=n;else{let m=e.length-1;if(!i&&s.startsWith("..")){let g=s.split("/");for(;g[0]==="..";)g.shift(),m-=1;r.pathname=g.join("/")}l=m>=0?e[m]:"/"}let u=$I(r,l),c=s&&s!=="/"&&s.endsWith("/"),f=(a||s===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(c||f)&&(u.pathname+="/"),u}const Ni=t=>t.join("/").replace(/\/\/+/g,"/"),WI=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),JI=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,eC=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;class Wc{constructor(e,n,i,r){r===void 0&&(r=!1),this.status=e,this.statusText=n||"",this.internal=r,i instanceof Error?(this.data=i.toString(),this.error=i):this.data=i}}function wl(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const NS=["post","put","patch","delete"],tC=new Set(NS),nC=["get",...NS],iC=new Set(nC),rC=new Set([301,302,303,307,308]),aC=new Set([307,308]),ed={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},sC={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},Mo={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},jg=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,oC=t=>({hasErrorBoundary:!!t.hasErrorBoundary}),MS="remix-router-transitions";function lC(t){const e=t.window?t.window:typeof window<"u"?window:void 0,n=typeof e<"u"&&typeof e.document<"u"&&typeof e.document.createElement<"u",i=!n;ge(t.routes.length>0,"You must provide a non-empty routes array to createRouter");let r;if(t.mapRouteProperties)r=t.mapRouteProperties;else if(t.detectErrorBoundary){let R=t.detectErrorBoundary;r=x=>({hasErrorBoundary:R(x)})}else r=oC;let a={},s=$c(t.routes,r,void 0,a),l,u=t.basename||"/",c=t.dataStrategy||fC,f=t.patchRoutesOnNavigation,m=Qe({v7_fetcherPersist:!1,v7_normalizeFormMethod:!1,v7_partialHydration:!1,v7_prependBasename:!1,v7_relativeSplatPath:!1,v7_skipActionErrorRevalidation:!1},t.future),g=null,y=new Set,C=null,O=null,M=null,T=t.hydrationData!=null,E=ra(s,t.history.location,u),b=!1,N=null;if(E==null&&!f){let R=Zt(404,{pathname:t.history.location.pathname}),{matches:x,route:P}=Jv(s);E=x,N={[P.id]:R}}E&&!t.hydrationData&&$r(E,s,t.history.location.pathname).active&&(E=null);let j;if(E)if(E.some(R=>R.route.lazy))j=!1;else if(!E.some(R=>R.route.loader))j=!0;else if(m.v7_partialHydration){let R=t.hydrationData?t.hydrationData.loaderData:null,x=t.hydrationData?t.hydrationData.errors:null;if(x){let P=E.findIndex(H=>x[H.route.id]!==void 0);j=E.slice(0,P+1).every(H=>!um(H.route,R,x))}else j=E.every(P=>!um(P.route,R,x))}else j=t.hydrationData!=null;else if(j=!1,E=[],m.v7_partialHydration){let R=$r(null,s,t.history.location.pathname);R.active&&R.matches&&(b=!0,E=R.matches)}let q,p={historyAction:t.history.action,location:t.history.location,matches:E,initialized:j,navigation:ed,restoreScrollPosition:t.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:t.hydrationData&&t.hydrationData.loaderData||{},actionData:t.hydrationData&&t.hydrationData.actionData||null,errors:t.hydrationData&&t.hydrationData.errors||N,fetchers:new Map,blockers:new Map},v=ut.Pop,S=!1,A,I=!1,D=new Map,w=null,ze=!1,ft=!1,Q=[],re=new Set,W=new Map,Ie=0,Pe=-1,rn=new Map,Ze=new Set,Le=new Map,qt=new Map,et=new Set,hi=new Map,En=new Map,xa;function lf(){if(g=t.history.listen(R=>{let{action:x,location:P,delta:H}=R;if(xa){xa(),xa=void 0;return}Ls(En.size===0||H!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let K=mo({currentLocation:p.location,nextLocation:P,historyAction:x});if(K&&H!=null){let J=new Promise(ae=>{xa=ae});t.history.go(H*-1),Qr(K,{state:"blocked",location:P,proceed(){Qr(K,{state:"proceeding",proceed:void 0,reset:void 0,location:P}),J.then(()=>t.history.go(H))},reset(){let ae=new Map(p.blockers);ae.set(K,Mo),dt({blockers:ae})}});return}return Gn(x,P)}),n){RC(e,D);let R=()=>IC(e,D);e.addEventListener("pagehide",R),w=()=>e.removeEventListener("pagehide",R)}return p.initialized||Gn(ut.Pop,p.location,{initialHydration:!0}),q}function Va(){g&&g(),w&&w(),y.clear(),A&&A.abort(),p.fetchers.forEach((R,x)=>Ua(x)),p.blockers.forEach((R,x)=>za(x))}function Pa(R){return y.add(R),()=>y.delete(R)}function dt(R,x){x===void 0&&(x={}),p=Qe({},p,R);let P=[],H=[];m.v7_fetcherPersist&&p.fetchers.forEach((K,J)=>{K.state==="idle"&&(et.has(J)?H.push(J):P.push(J))}),et.forEach(K=>{!p.fetchers.has(K)&&!W.has(K)&&H.push(K)}),[...y].forEach(K=>K(p,{deletedFetchers:H,viewTransitionOpts:x.viewTransitionOpts,flushSync:x.flushSync===!0})),m.v7_fetcherPersist?(P.forEach(K=>p.fetchers.delete(K)),H.forEach(K=>Ua(K))):H.forEach(K=>et.delete(K))}function qn(R,x,P){var H,K;let{flushSync:J}=P===void 0?{}:P,ae=p.actionData!=null&&p.navigation.formMethod!=null&&Un(p.navigation.formMethod)&&p.navigation.state==="loading"&&((H=R.state)==null?void 0:H._isRedirect)!==!0,Z;x.actionData?Object.keys(x.actionData).length>0?Z=x.actionData:Z=null:ae?Z=p.actionData:Z=null;let $=x.loaderData?Zv(p.loaderData,x.loaderData,x.matches||[],x.errors):p.loaderData,X=p.blockers;X.size>0&&(X=new Map(X),X.forEach((he,ot)=>X.set(ot,Mo)));let ee=S===!0||p.navigation.formMethod!=null&&Un(p.navigation.formMethod)&&((K=R.state)==null?void 0:K._isRedirect)!==!0;l&&(s=l,l=void 0),ze||v===ut.Pop||(v===ut.Push?t.history.push(R,R.state):v===ut.Replace&&t.history.replace(R,R.state));let le;if(v===ut.Pop){let he=D.get(p.location.pathname);he&&he.has(R.pathname)?le={currentLocation:p.location,nextLocation:R}:D.has(R.pathname)&&(le={currentLocation:R,nextLocation:p.location})}else if(I){let he=D.get(p.location.pathname);he?he.add(R.pathname):(he=new Set([R.pathname]),D.set(p.location.pathname,he)),le={currentLocation:p.location,nextLocation:R}}dt(Qe({},x,{actionData:Z,loaderData:$,historyAction:v,location:R,initialized:!0,navigation:ed,revalidation:"idle",restoreScrollPosition:Xr(R,x.matches||p.matches),preventScrollReset:ee,blockers:X}),{viewTransitionOpts:le,flushSync:J===!0}),v=ut.Pop,S=!1,I=!1,ze=!1,ft=!1,Q=[]}async function La(R,x){if(typeof R=="number"){t.history.go(R);return}let P=lm(p.location,p.matches,u,m.v7_prependBasename,R,m.v7_relativeSplatPath,x==null?void 0:x.fromRouteId,x==null?void 0:x.relative),{path:H,submission:K,error:J}=Fv(m.v7_normalizeFormMethod,!1,P,x),ae=p.location,Z=bl(p.location,H,x&&x.state);Z=Qe({},Z,t.history.encodeLocation(Z));let $=x&&x.replace!=null?x.replace:void 0,X=ut.Push;$===!0?X=ut.Replace:$===!1||K!=null&&Un(K.formMethod)&&K.formAction===p.location.pathname+p.location.search&&(X=ut.Replace);let ee=x&&"preventScrollReset"in x?x.preventScrollReset===!0:void 0,le=(x&&x.flushSync)===!0,he=mo({currentLocation:ae,nextLocation:Z,historyAction:X});if(he){Qr(he,{state:"blocked",location:Z,proceed(){Qr(he,{state:"proceeding",proceed:void 0,reset:void 0,location:Z}),La(R,x)},reset(){let ot=new Map(p.blockers);ot.set(he,Mo),dt({blockers:ot})}});return}return await Gn(X,Z,{submission:K,pendingError:J,preventScrollReset:ee,replace:x&&x.replace,enableViewTransition:x&&x.viewTransition,flushSync:le})}function oo(){if(gt(),dt({revalidation:"loading"}),p.navigation.state!=="submitting"){if(p.navigation.state==="idle"){Gn(p.historyAction,p.location,{startUninterruptedRevalidation:!0});return}Gn(v||p.historyAction,p.navigation.location,{overrideNavigation:p.navigation,enableViewTransition:I===!0})}}async function Gn(R,x,P){A&&A.abort(),A=null,v=R,ze=(P&&P.startUninterruptedRevalidation)===!0,du(p.location,p.matches),S=(P&&P.preventScrollReset)===!0,I=(P&&P.enableViewTransition)===!0;let H=l||s,K=P&&P.overrideNavigation,J=P!=null&&P.initialHydration&&p.matches&&p.matches.length>0&&!b?p.matches:ra(H,x,u),ae=(P&&P.flushSync)===!0;if(J&&p.initialized&&!ft&&vC(p.location,x)&&!(P&&P.submission&&Un(P.submission.formMethod))){qn(x,{matches:J},{flushSync:ae});return}let Z=$r(J,H,x.pathname);if(Z.active&&Z.matches&&(J=Z.matches),!J){let{error:De,notFoundMatches:Ee,route:je}=fi(x.pathname);qn(x,{matches:Ee,loaderData:{},errors:{[je.id]:De}},{flushSync:ae});return}A=new AbortController;let $=Ka(t.history,x,A.signal,P&&P.submission),X;if(P&&P.pendingError)X=[aa(J).route.id,{type:Ne.error,error:P.pendingError}];else if(P&&P.submission&&Un(P.submission.formMethod)){let De=await uf($,x,P.submission,J,Z.active,{replace:P.replace,flushSync:ae});if(De.shortCircuited)return;if(De.pendingActionResult){let[Ee,je]=De.pendingActionResult;if(hn(je)&&wl(je.error)&&je.error.status===404){A=null,qn(x,{matches:De.matches,loaderData:{},errors:{[Ee]:je.error}});return}}J=De.matches||J,X=De.pendingActionResult,K=td(x,P.submission),ae=!1,Z.active=!1,$=Ka(t.history,$.url,$.signal)}let{shortCircuited:ee,matches:le,loaderData:he,errors:ot}=await cf($,x,J,Z.active,K,P&&P.submission,P&&P.fetcherSubmission,P&&P.replace,P&&P.initialHydration===!0,ae,X);ee||(A=null,qn(x,Qe({matches:le||J},Wv(X),{loaderData:he,errors:ot})))}async function uf(R,x,P,H,K,J){J===void 0&&(J={}),gt();let ae=bC(x,P);if(dt({navigation:ae},{flushSync:J.flushSync===!0}),K){let X=await Qn(H,x.pathname,R.signal);if(X.type==="aborted")return{shortCircuited:!0};if(X.type==="error"){let ee=aa(X.partialMatches).route.id;return{matches:X.partialMatches,pendingActionResult:[ee,{type:Ne.error,error:X.error}]}}else if(X.matches)H=X.matches;else{let{notFoundMatches:ee,error:le,route:he}=fi(x.pathname);return{matches:ee,pendingActionResult:[he.id,{type:Ne.error,error:le}]}}}let Z,$=zo(H,x);if(!$.route.action&&!$.route.lazy)Z={type:Ne.error,error:Zt(405,{method:R.method,pathname:x.pathname,routeId:$.route.id})};else if(Z=(await Ki("action",p,R,[$],H,null))[$.route.id],R.signal.aborted)return{shortCircuited:!0};if(sa(Z)){let X;return J&&J.replace!=null?X=J.replace:X=Yv(Z.response.headers.get("Location"),new URL(R.url),u)===p.location.pathname+p.location.search,await Mn(R,Z,!0,{submission:P,replace:X}),{shortCircuited:!0}}if(pr(Z))throw Zt(400,{type:"defer-action"});if(hn(Z)){let X=aa(H,$.route.id);return(J&&J.replace)!==!0&&(v=ut.Push),{matches:H,pendingActionResult:[X.route.id,Z]}}return{matches:H,pendingActionResult:[$.route.id,Z]}}async function cf(R,x,P,H,K,J,ae,Z,$,X,ee){let le=K||td(x,J),he=J||ae||t_(le),ot=!ze&&(!m.v7_partialHydration||!$);if(H){if(ot){let He=lo(ee);dt(Qe({navigation:le},He!==void 0?{actionData:He}:{}),{flushSync:X})}let Te=await Qn(P,x.pathname,R.signal);if(Te.type==="aborted")return{shortCircuited:!0};if(Te.type==="error"){let He=aa(Te.partialMatches).route.id;return{matches:Te.partialMatches,loaderData:{},errors:{[He]:Te.error}}}else if(Te.matches)P=Te.matches;else{let{error:He,notFoundMatches:gi,route:Xi}=fi(x.pathname);return{matches:gi,loaderData:{},errors:{[Xi.id]:He}}}}let De=l||s,[Ee,je]=Gv(t.history,p,P,he,x,m.v7_partialHydration&&$===!0,m.v7_skipActionErrorRevalidation,ft,Q,re,et,Le,Ze,De,u,ee);if(Yr(Te=>!(P&&P.some(He=>He.route.id===Te))||Ee&&Ee.some(He=>He.route.id===Te)),Pe=++Ie,Ee.length===0&&je.length===0){let Te=ka();return qn(x,Qe({matches:P,loaderData:{},errors:ee&&hn(ee[1])?{[ee[0]]:ee[1].error}:null},Wv(ee),Te?{fetchers:new Map(p.fetchers)}:{}),{flushSync:X}),{shortCircuited:!0}}if(ot){let Te={};if(!H){Te.navigation=le;let He=lo(ee);He!==void 0&&(Te.actionData=He)}je.length>0&&(Te.fetchers=uo(je)),dt(Te,{flushSync:X})}je.forEach(Te=>{xn(Te.key),Te.controller&&W.set(Te.key,Te.controller)});let di=()=>je.forEach(Te=>xn(Te.key));A&&A.signal.addEventListener("abort",di);let{loaderResults:Qi,fetcherResults:Vn}=await mt(p,P,Ee,je,R);if(R.signal.aborted)return{shortCircuited:!0};A&&A.signal.removeEventListener("abort",di),je.forEach(Te=>W.delete(Te.key));let Gt=Hu(Qi);if(Gt)return await Mn(R,Gt.result,!0,{replace:Z}),{shortCircuited:!0};if(Gt=Hu(Vn),Gt)return Ze.add(Gt.key),await Mn(R,Gt.result,!0,{replace:Z}),{shortCircuited:!0};let{loaderData:ja,errors:mi}=$v(p,P,Qi,ee,je,Vn,hi);hi.forEach((Te,He)=>{Te.subscribe(gi=>{(gi||Te.done)&&hi.delete(He)})}),m.v7_partialHydration&&$&&p.errors&&(mi=Qe({},p.errors,mi));let sn=ka(),Sn=fu(Pe),Yi=sn||Sn||je.length>0;return Qe({matches:P,loaderData:ja,errors:mi},Yi?{fetchers:new Map(p.fetchers)}:{})}function lo(R){if(R&&!hn(R[1]))return{[R[0]]:R[1].data};if(p.actionData)return Object.keys(p.actionData).length===0?null:p.actionData}function uo(R){return R.forEach(x=>{let P=p.fetchers.get(x.key),H=xo(void 0,P?P.data:void 0);p.fetchers.set(x.key,H)}),new Map(p.fetchers)}function hu(R,x,P,H){if(i)throw new Error("router.fetch() was called during the server render, but it shouldn't be. You are likely calling a useFetcher() method in the body of your component. Try moving it to a useEffect or a callback.");xn(R);let K=(H&&H.flushSync)===!0,J=l||s,ae=lm(p.location,p.matches,u,m.v7_prependBasename,P,m.v7_relativeSplatPath,x,H==null?void 0:H.relative),Z=ra(J,ae,u),$=$r(Z,J,ae);if($.active&&$.matches&&(Z=$.matches),!Z){Tn(R,x,Zt(404,{pathname:ae}),{flushSync:K});return}let{path:X,submission:ee,error:le}=Fv(m.v7_normalizeFormMethod,!0,ae,H);if(le){Tn(R,x,le,{flushSync:K});return}let he=zo(Z,X),ot=(H&&H.preventScrollReset)===!0;if(ee&&Un(ee.formMethod)){hf(R,x,X,he,Z,$.active,K,ot,ee);return}Le.set(R,{routeId:x,path:X}),co(R,x,X,he,Z,$.active,K,ot,ee)}async function hf(R,x,P,H,K,J,ae,Z,$){gt(),Le.delete(R);function X(Ge){if(!Ge.route.action&&!Ge.route.lazy){let Yn=Zt(405,{method:$.formMethod,pathname:P,routeId:x});return Tn(R,x,Yn,{flushSync:ae}),!0}return!1}if(!J&&X(H))return;let ee=p.fetchers.get(R);an(R,wC($,ee),{flushSync:ae});let le=new AbortController,he=Ka(t.history,P,le.signal,$);if(J){let Ge=await Qn(K,new URL(he.url).pathname,he.signal,R);if(Ge.type==="aborted")return;if(Ge.type==="error"){Tn(R,x,Ge.error,{flushSync:ae});return}else if(Ge.matches){if(K=Ge.matches,H=zo(K,P),X(H))return}else{Tn(R,x,Zt(404,{pathname:P}),{flushSync:ae});return}}W.set(R,le);let ot=Ie,Ee=(await Ki("action",p,he,[H],K,R))[H.route.id];if(he.signal.aborted){W.get(R)===le&&W.delete(R);return}if(m.v7_fetcherPersist&&et.has(R)){if(sa(Ee)||hn(Ee)){an(R,nr(void 0));return}}else{if(sa(Ee))if(W.delete(R),Pe>ot){an(R,nr(void 0));return}else return Ze.add(R),an(R,xo($)),Mn(he,Ee,!1,{fetcherSubmission:$,preventScrollReset:Z});if(hn(Ee)){Tn(R,x,Ee.error);return}}if(pr(Ee))throw Zt(400,{type:"defer-action"});let je=p.navigation.location||p.location,di=Ka(t.history,je,le.signal),Qi=l||s,Vn=p.navigation.state!=="idle"?ra(Qi,p.navigation.location,u):p.matches;ge(Vn,"Didn't find any matches after fetcher action");let Gt=++Ie;rn.set(R,Gt);let ja=xo($,Ee.data);p.fetchers.set(R,ja);let[mi,sn]=Gv(t.history,p,Vn,$,je,!1,m.v7_skipActionErrorRevalidation,ft,Q,re,et,Le,Ze,Qi,u,[H.route.id,Ee]);sn.filter(Ge=>Ge.key!==R).forEach(Ge=>{let Yn=Ge.key,po=p.fetchers.get(Yn),gu=xo(void 0,po?po.data:void 0);p.fetchers.set(Yn,gu),xn(Yn),Ge.controller&&W.set(Yn,Ge.controller)}),dt({fetchers:new Map(p.fetchers)});let Sn=()=>sn.forEach(Ge=>xn(Ge.key));le.signal.addEventListener("abort",Sn);let{loaderResults:Yi,fetcherResults:Te}=await mt(p,Vn,mi,sn,di);if(le.signal.aborted)return;le.signal.removeEventListener("abort",Sn),rn.delete(R),W.delete(R),sn.forEach(Ge=>W.delete(Ge.key));let He=Hu(Yi);if(He)return Mn(di,He.result,!1,{preventScrollReset:Z});if(He=Hu(Te),He)return Ze.add(He.key),Mn(di,He.result,!1,{preventScrollReset:Z});let{loaderData:gi,errors:Xi}=$v(p,Vn,Yi,void 0,sn,Te,hi);if(p.fetchers.has(R)){let Ge=nr(Ee.data);p.fetchers.set(R,Ge)}fu(Gt),p.navigation.state==="loading"&&Gt>Pe?(ge(v,"Expected pending action"),A&&A.abort(),qn(p.navigation.location,{matches:Vn,loaderData:gi,errors:Xi,fetchers:new Map(p.fetchers)})):(dt({errors:Xi,loaderData:Zv(p.loaderData,gi,Vn,Xi),fetchers:new Map(p.fetchers)}),ft=!1)}async function co(R,x,P,H,K,J,ae,Z,$){let X=p.fetchers.get(R);an(R,xo($,X?X.data:void 0),{flushSync:ae});let ee=new AbortController,le=Ka(t.history,P,ee.signal);if(J){let Ee=await Qn(K,new URL(le.url).pathname,le.signal,R);if(Ee.type==="aborted")return;if(Ee.type==="error"){Tn(R,x,Ee.error,{flushSync:ae});return}else if(Ee.matches)K=Ee.matches,H=zo(K,P);else{Tn(R,x,Zt(404,{pathname:P}),{flushSync:ae});return}}W.set(R,ee);let he=Ie,De=(await Ki("loader",p,le,[H],K,R))[H.route.id];if(pr(De)&&(De=await Bg(De,le.signal,!0)||De),W.get(R)===ee&&W.delete(R),!le.signal.aborted){if(et.has(R)){an(R,nr(void 0));return}if(sa(De))if(Pe>he){an(R,nr(void 0));return}else{Ze.add(R),await Mn(le,De,!1,{preventScrollReset:Z});return}if(hn(De)){Tn(R,x,De.error);return}ge(!pr(De),"Unhandled fetcher deferred data"),an(R,nr(De.data))}}async function Mn(R,x,P,H){let{submission:K,fetcherSubmission:J,preventScrollReset:ae,replace:Z}=H===void 0?{}:H;x.response.headers.has("X-Remix-Revalidate")&&(ft=!0);let $=x.response.headers.get("Location");ge($,"Expected a Location header on the redirect Response"),$=Yv($,new URL(R.url),u);let X=bl(p.location,$,{_isRedirect:!0});if(n){let Ee=!1;if(x.response.headers.has("X-Remix-Reload-Document"))Ee=!0;else if(jg.test($)){const je=t.history.createURL($);Ee=je.origin!==e.location.origin||Ui(je.pathname,u)==null}if(Ee){Z?e.location.replace($):e.location.assign($);return}}A=null;let ee=Z===!0||x.response.headers.has("X-Remix-Replace")?ut.Replace:ut.Push,{formMethod:le,formAction:he,formEncType:ot}=p.navigation;!K&&!J&&le&&he&&ot&&(K=t_(p.navigation));let De=K||J;if(aC.has(x.response.status)&&De&&Un(De.formMethod))await Gn(ee,X,{submission:Qe({},De,{formAction:$}),preventScrollReset:ae||S,enableViewTransition:P?I:void 0});else{let Ee=td(X,K);await Gn(ee,X,{overrideNavigation:Ee,fetcherSubmission:J,preventScrollReset:ae||S,enableViewTransition:P?I:void 0})}}async function Ki(R,x,P,H,K,J){let ae,Z={};try{ae=await dC(c,R,x,P,H,K,J,a,r)}catch($){return H.forEach(X=>{Z[X.route.id]={type:Ne.error,error:$}}),Z}for(let[$,X]of Object.entries(ae))if(_C(X)){let ee=X.result;Z[$]={type:Ne.redirect,response:pC(ee,P,$,K,u,m.v7_relativeSplatPath)}}else Z[$]=await gC(X);return Z}async function mt(R,x,P,H,K){let J=R.matches,ae=Ki("loader",R,K,P,x,null),Z=Promise.all(H.map(async ee=>{if(ee.matches&&ee.match&&ee.controller){let he=(await Ki("loader",R,Ka(t.history,ee.path,ee.controller.signal),[ee.match],ee.matches,ee.key))[ee.match.route.id];return{[ee.key]:he}}else return Promise.resolve({[ee.key]:{type:Ne.error,error:Zt(404,{pathname:ee.path})}})})),$=await ae,X=(await Z).reduce((ee,le)=>Object.assign(ee,le),{});return await Promise.all([SC(x,$,K.signal,J,R.loaderData),AC(x,X,H)]),{loaderResults:$,fetcherResults:X}}function gt(){ft=!0,Q.push(...Yr()),Le.forEach((R,x)=>{W.has(x)&&re.add(x),xn(x)})}function an(R,x,P){P===void 0&&(P={}),p.fetchers.set(R,x),dt({fetchers:new Map(p.fetchers)},{flushSync:(P&&P.flushSync)===!0})}function Tn(R,x,P,H){H===void 0&&(H={});let K=aa(p.matches,x);Ua(R),dt({errors:{[K.route.id]:P},fetchers:new Map(p.fetchers)},{flushSync:(H&&H.flushSync)===!0})}function ho(R){return qt.set(R,(qt.get(R)||0)+1),et.has(R)&&et.delete(R),p.fetchers.get(R)||sC}function Ua(R){let x=p.fetchers.get(R);W.has(R)&&!(x&&x.state==="loading"&&rn.has(R))&&xn(R),Le.delete(R),rn.delete(R),Ze.delete(R),m.v7_fetcherPersist&&et.delete(R),re.delete(R),p.fetchers.delete(R)}function Kr(R){let x=(qt.get(R)||0)-1;x<=0?(qt.delete(R),et.add(R),m.v7_fetcherPersist||Ua(R)):qt.set(R,x),dt({fetchers:new Map(p.fetchers)})}function xn(R){let x=W.get(R);x&&(x.abort(),W.delete(R))}function fo(R){for(let x of R){let P=ho(x),H=nr(P.data);p.fetchers.set(x,H)}}function ka(){let R=[],x=!1;for(let P of Ze){let H=p.fetchers.get(P);ge(H,"Expected fetcher: "+P),H.state==="loading"&&(Ze.delete(P),R.push(P),x=!0)}return fo(R),x}function fu(R){let x=[];for(let[P,H]of rn)if(H<R){let K=p.fetchers.get(P);ge(K,"Expected fetcher: "+P),K.state==="loading"&&(xn(P),rn.delete(P),x.push(P))}return fo(x),x.length>0}function ff(R,x){let P=p.blockers.get(R)||Mo;return En.get(R)!==x&&En.set(R,x),P}function za(R){p.blockers.delete(R),En.delete(R)}function Qr(R,x){let P=p.blockers.get(R)||Mo;ge(P.state==="unblocked"&&x.state==="blocked"||P.state==="blocked"&&x.state==="blocked"||P.state==="blocked"&&x.state==="proceeding"||P.state==="blocked"&&x.state==="unblocked"||P.state==="proceeding"&&x.state==="unblocked","Invalid blocker state transition: "+P.state+" -> "+x.state);let H=new Map(p.blockers);H.set(R,x),dt({blockers:H})}function mo(R){let{currentLocation:x,nextLocation:P,historyAction:H}=R;if(En.size===0)return;En.size>1&&Ls(!1,"A router only supports one blocker at a time");let K=Array.from(En.entries()),[J,ae]=K[K.length-1],Z=p.blockers.get(J);if(!(Z&&Z.state==="proceeding")&&ae({currentLocation:x,nextLocation:P,historyAction:H}))return J}function fi(R){let x=Zt(404,{pathname:R}),P=l||s,{matches:H,route:K}=Jv(P);return Yr(),{notFoundMatches:H,route:K,error:x}}function Yr(R){let x=[];return hi.forEach((P,H)=>{(!R||R(H))&&(P.cancel(),x.push(H),hi.delete(H))}),x}function go(R,x,P){if(C=R,M=x,O=P||null,!T&&p.navigation===ed){T=!0;let H=Xr(p.location,p.matches);H!=null&&dt({restoreScrollPosition:H})}return()=>{C=null,M=null,O=null}}function Kn(R,x){return O&&O(R,x.map(H=>UI(H,p.loaderData)))||R.key}function du(R,x){if(C&&M){let P=Kn(R,x);C[P]=M()}}function Xr(R,x){if(C){let P=Kn(R,x),H=C[P];if(typeof H=="number")return H}return null}function $r(R,x,P){if(f)if(R){if(Object.keys(R[0].params).length>0)return{active:!0,matches:uc(x,P,u,!0)}}else return{active:!0,matches:uc(x,P,u,!0)||[]};return{active:!1,matches:null}}async function Qn(R,x,P,H){if(!f)return{type:"success",matches:R};let K=R;for(;;){let J=l==null,ae=l||s,Z=a;try{await f({signal:P,path:x,matches:K,fetcherKey:H,patch:(ee,le)=>{P.aborted||Qv(ee,le,ae,Z,r)}})}catch(ee){return{type:"error",error:ee,partialMatches:K}}finally{J&&!P.aborted&&(s=[...s])}if(P.aborted)return{type:"aborted"};let $=ra(ae,x,u);if($)return{type:"success",matches:$};let X=uc(ae,x,u,!0);if(!X||K.length===X.length&&K.every((ee,le)=>ee.route.id===X[le].route.id))return{type:"success",matches:null};K=X}}function mu(R){a={},l=$c(R,r,void 0,a)}function It(R,x){let P=l==null;Qv(R,x,l||s,a,r),P&&(s=[...s],dt({}))}return q={get basename(){return u},get future(){return m},get state(){return p},get routes(){return s},get window(){return e},initialize:lf,subscribe:Pa,enableScrollRestoration:go,navigate:La,fetch:hu,revalidate:oo,createHref:R=>t.history.createHref(R),encodeLocation:R=>t.history.encodeLocation(R),getFetcher:ho,deleteFetcher:Kr,dispose:Va,getBlocker:ff,deleteBlocker:za,patchRoutes:It,_internalFetchControllers:W,_internalActiveDeferreds:hi,_internalSetRoutes:mu},q}function uC(t){return t!=null&&("formData"in t&&t.formData!=null||"body"in t&&t.body!==void 0)}function lm(t,e,n,i,r,a,s,l){let u,c;if(s){u=[];for(let m of e)if(u.push(m),m.route.id===s){c=m;break}}else u=e,c=e[e.length-1];let f=zg(r||".",kg(u,a),Ui(t.pathname,n)||t.pathname,l==="path");if(r==null&&(f.search=t.search,f.hash=t.hash),(r==null||r===""||r===".")&&c){let m=Hg(f.search);if(c.route.index&&!m)f.search=f.search?f.search.replace(/^\?/,"?index&"):"?index";else if(!c.route.index&&m){let g=new URLSearchParams(f.search),y=g.getAll("index");g.delete("index"),y.filter(O=>O).forEach(O=>g.append("index",O));let C=g.toString();f.search=C?"?"+C:""}}return i&&n!=="/"&&(f.pathname=f.pathname==="/"?n:Ni([n,f.pathname])),Ta(f)}function Fv(t,e,n,i){if(!i||!uC(i))return{path:n};if(i.formMethod&&!TC(i.formMethod))return{path:n,error:Zt(405,{method:i.formMethod})};let r=()=>({path:n,error:Zt(400,{type:"invalid-body"})}),a=i.formMethod||"get",s=t?a.toUpperCase():a.toLowerCase(),l=PS(n);if(i.body!==void 0){if(i.formEncType==="text/plain"){if(!Un(s))return r();let g=typeof i.body=="string"?i.body:i.body instanceof FormData||i.body instanceof URLSearchParams?Array.from(i.body.entries()).reduce((y,C)=>{let[O,M]=C;return""+y+O+"="+M+`
`},""):String(i.body);return{path:n,submission:{formMethod:s,formAction:l,formEncType:i.formEncType,formData:void 0,json:void 0,text:g}}}else if(i.formEncType==="application/json"){if(!Un(s))return r();try{let g=typeof i.body=="string"?JSON.parse(i.body):i.body;return{path:n,submission:{formMethod:s,formAction:l,formEncType:i.formEncType,formData:void 0,json:g,text:void 0}}}catch{return r()}}}ge(typeof FormData=="function","FormData is not available in this environment");let u,c;if(i.formData)u=cm(i.formData),c=i.formData;else if(i.body instanceof FormData)u=cm(i.body),c=i.body;else if(i.body instanceof URLSearchParams)u=i.body,c=Xv(u);else if(i.body==null)u=new URLSearchParams,c=new FormData;else try{u=new URLSearchParams(i.body),c=Xv(u)}catch{return r()}let f={formMethod:s,formAction:l,formEncType:i&&i.formEncType||"application/x-www-form-urlencoded",formData:c,json:void 0,text:void 0};if(Un(f.formMethod))return{path:n,submission:f};let m=Hr(n);return e&&m.search&&Hg(m.search)&&u.append("index",""),m.search="?"+u,{path:Ta(m),submission:f}}function qv(t,e,n){n===void 0&&(n=!1);let i=t.findIndex(r=>r.route.id===e);return i>=0?t.slice(0,n?i+1:i):t}function Gv(t,e,n,i,r,a,s,l,u,c,f,m,g,y,C,O){let M=O?hn(O[1])?O[1].error:O[1].data:void 0,T=t.createURL(e.location),E=t.createURL(r),b=n;a&&e.errors?b=qv(n,Object.keys(e.errors)[0],!0):O&&hn(O[1])&&(b=qv(n,O[0]));let N=O?O[1].statusCode:void 0,j=s&&N&&N>=400,q=b.filter((v,S)=>{let{route:A}=v;if(A.lazy)return!0;if(A.loader==null)return!1;if(a)return um(A,e.loaderData,e.errors);if(cC(e.loaderData,e.matches[S],v)||u.some(w=>w===v.route.id))return!0;let I=e.matches[S],D=v;return Kv(v,Qe({currentUrl:T,currentParams:I.params,nextUrl:E,nextParams:D.params},i,{actionResult:M,actionStatus:N,defaultShouldRevalidate:j?!1:l||T.pathname+T.search===E.pathname+E.search||T.search!==E.search||xS(I,D)}))}),p=[];return m.forEach((v,S)=>{if(a||!n.some(ze=>ze.route.id===v.routeId)||f.has(S))return;let A=ra(y,v.path,C);if(!A){p.push({key:S,routeId:v.routeId,path:v.path,matches:null,match:null,controller:null});return}let I=e.fetchers.get(S),D=zo(A,v.path),w=!1;g.has(S)?w=!1:c.has(S)?(c.delete(S),w=!0):I&&I.state!=="idle"&&I.data===void 0?w=l:w=Kv(D,Qe({currentUrl:T,currentParams:e.matches[e.matches.length-1].params,nextUrl:E,nextParams:n[n.length-1].params},i,{actionResult:M,actionStatus:N,defaultShouldRevalidate:j?!1:l})),w&&p.push({key:S,routeId:v.routeId,path:v.path,matches:A,match:D,controller:new AbortController})}),[q,p]}function um(t,e,n){if(t.lazy)return!0;if(!t.loader)return!1;let i=e!=null&&e[t.id]!==void 0,r=n!=null&&n[t.id]!==void 0;return!i&&r?!1:typeof t.loader=="function"&&t.loader.hydrate===!0?!0:!i&&!r}function cC(t,e,n){let i=!e||n.route.id!==e.route.id,r=t[n.route.id]===void 0;return i||r}function xS(t,e){let n=t.route.path;return t.pathname!==e.pathname||n!=null&&n.endsWith("*")&&t.params["*"]!==e.params["*"]}function Kv(t,e){if(t.route.shouldRevalidate){let n=t.route.shouldRevalidate(e);if(typeof n=="boolean")return n}return e.defaultShouldRevalidate}function Qv(t,e,n,i,r){var a;let s;if(t){let c=i[t];ge(c,"No route found to patch children into: routeId = "+t),c.children||(c.children=[]),s=c.children}else s=n;let l=e.filter(c=>!s.some(f=>VS(c,f))),u=$c(l,r,[t||"_","patch",String(((a=s)==null?void 0:a.length)||"0")],i);s.push(...u)}function VS(t,e){return"id"in t&&"id"in e&&t.id===e.id?!0:t.index===e.index&&t.path===e.path&&t.caseSensitive===e.caseSensitive?(!t.children||t.children.length===0)&&(!e.children||e.children.length===0)?!0:t.children.every((n,i)=>{var r;return(r=e.children)==null?void 0:r.some(a=>VS(n,a))}):!1}async function hC(t,e,n){if(!t.lazy)return;let i=await t.lazy();if(!t.lazy)return;let r=n[t.id];ge(r,"No route found in manifest");let a={};for(let s in i){let u=r[s]!==void 0&&s!=="hasErrorBoundary";Ls(!u,'Route "'+r.id+'" has a static property "'+s+'" defined but its lazy function is also returning a value for this property. '+('The lazy route property "'+s+'" will be ignored.')),!u&&!PI.has(s)&&(a[s]=i[s])}Object.assign(r,a),Object.assign(r,Qe({},e(r),{lazy:void 0}))}async function fC(t){let{matches:e}=t,n=e.filter(r=>r.shouldLoad);return(await Promise.all(n.map(r=>r.resolve()))).reduce((r,a,s)=>Object.assign(r,{[n[s].route.id]:a}),{})}async function dC(t,e,n,i,r,a,s,l,u,c){let f=a.map(y=>y.route.lazy?hC(y.route,u,l):void 0),m=a.map((y,C)=>{let O=f[C],M=r.some(E=>E.route.id===y.route.id);return Qe({},y,{shouldLoad:M,resolve:async E=>(E&&i.method==="GET"&&(y.route.lazy||y.route.loader)&&(M=!0),M?mC(e,i,y,O,E,c):Promise.resolve({type:Ne.data,result:void 0}))})}),g=await t({matches:m,request:i,params:a[0].params,fetcherKey:s,context:c});try{await Promise.all(f)}catch{}return g}async function mC(t,e,n,i,r,a){let s,l,u=c=>{let f,m=new Promise((C,O)=>f=O);l=()=>f(),e.signal.addEventListener("abort",l);let g=C=>typeof c!="function"?Promise.reject(new Error("You cannot call the handler for a route which defines a boolean "+('"'+t+'" [routeId: '+n.route.id+"]"))):c({request:e,params:n.params,context:a},...C!==void 0?[C]:[]),y=(async()=>{try{return{type:"data",result:await(r?r(O=>g(O)):g())}}catch(C){return{type:"error",result:C}}})();return Promise.race([y,m])};try{let c=n.route[t];if(i)if(c){let f,[m]=await Promise.all([u(c).catch(g=>{f=g}),i]);if(f!==void 0)throw f;s=m}else if(await i,c=n.route[t],c)s=await u(c);else if(t==="action"){let f=new URL(e.url),m=f.pathname+f.search;throw Zt(405,{method:e.method,pathname:m,routeId:n.route.id})}else return{type:Ne.data,result:void 0};else if(c)s=await u(c);else{let f=new URL(e.url),m=f.pathname+f.search;throw Zt(404,{pathname:m})}ge(s.result!==void 0,"You defined "+(t==="action"?"an action":"a loader")+" for route "+('"'+n.route.id+"\" but didn't return anything from your `"+t+"` ")+"function. Please return a value or `null`.")}catch(c){return{type:Ne.error,result:c}}finally{l&&e.signal.removeEventListener("abort",l)}return s}async function gC(t){let{result:e,type:n}=t;if(LS(e)){let m;try{let g=e.headers.get("Content-Type");g&&/\bapplication\/json\b/.test(g)?e.body==null?m=null:m=await e.json():m=await e.text()}catch(g){return{type:Ne.error,error:g}}return n===Ne.error?{type:Ne.error,error:new Wc(e.status,e.statusText,m),statusCode:e.status,headers:e.headers}:{type:Ne.data,data:m,statusCode:e.status,headers:e.headers}}if(n===Ne.error){if(e_(e)){var i,r;if(e.data instanceof Error){var a,s;return{type:Ne.error,error:e.data,statusCode:(a=e.init)==null?void 0:a.status,headers:(s=e.init)!=null&&s.headers?new Headers(e.init.headers):void 0}}return{type:Ne.error,error:new Wc(((i=e.init)==null?void 0:i.status)||500,void 0,e.data),statusCode:wl(e)?e.status:void 0,headers:(r=e.init)!=null&&r.headers?new Headers(e.init.headers):void 0}}return{type:Ne.error,error:e,statusCode:wl(e)?e.status:void 0}}if(EC(e)){var l,u;return{type:Ne.deferred,deferredData:e,statusCode:(l=e.init)==null?void 0:l.status,headers:((u=e.init)==null?void 0:u.headers)&&new Headers(e.init.headers)}}if(e_(e)){var c,f;return{type:Ne.data,data:e.data,statusCode:(c=e.init)==null?void 0:c.status,headers:(f=e.init)!=null&&f.headers?new Headers(e.init.headers):void 0}}return{type:Ne.data,data:e}}function pC(t,e,n,i,r,a){let s=t.headers.get("Location");if(ge(s,"Redirects returned/thrown from loaders/actions must have a Location header"),!jg.test(s)){let l=i.slice(0,i.findIndex(u=>u.route.id===n)+1);s=lm(new URL(e.url),l,r,!0,s,a),t.headers.set("Location",s)}return t}function Yv(t,e,n){if(jg.test(t)){let i=t,r=i.startsWith("//")?new URL(e.protocol+i):new URL(i),a=Ui(r.pathname,n)!=null;if(r.origin===e.origin&&a)return r.pathname+r.search+r.hash}return t}function Ka(t,e,n,i){let r=t.createURL(PS(e)).toString(),a={signal:n};if(i&&Un(i.formMethod)){let{formMethod:s,formEncType:l}=i;a.method=s.toUpperCase(),l==="application/json"?(a.headers=new Headers({"Content-Type":l}),a.body=JSON.stringify(i.json)):l==="text/plain"?a.body=i.text:l==="application/x-www-form-urlencoded"&&i.formData?a.body=cm(i.formData):a.body=i.formData}return new Request(r,a)}function cm(t){let e=new URLSearchParams;for(let[n,i]of t.entries())e.append(n,typeof i=="string"?i:i.name);return e}function Xv(t){let e=new FormData;for(let[n,i]of t.entries())e.append(n,i);return e}function yC(t,e,n,i,r){let a={},s=null,l,u=!1,c={},f=n&&hn(n[1])?n[1].error:void 0;return t.forEach(m=>{if(!(m.route.id in e))return;let g=m.route.id,y=e[g];if(ge(!sa(y),"Cannot handle redirect results in processLoaderData"),hn(y)){let C=y.error;f!==void 0&&(C=f,f=void 0),s=s||{};{let O=aa(t,g);s[O.route.id]==null&&(s[O.route.id]=C)}a[g]=void 0,u||(u=!0,l=wl(y.error)?y.error.status:500),y.headers&&(c[g]=y.headers)}else pr(y)?(i.set(g,y.deferredData),a[g]=y.deferredData.data,y.statusCode!=null&&y.statusCode!==200&&!u&&(l=y.statusCode),y.headers&&(c[g]=y.headers)):(a[g]=y.data,y.statusCode&&y.statusCode!==200&&!u&&(l=y.statusCode),y.headers&&(c[g]=y.headers))}),f!==void 0&&n&&(s={[n[0]]:f},a[n[0]]=void 0),{loaderData:a,errors:s,statusCode:l||200,loaderHeaders:c}}function $v(t,e,n,i,r,a,s){let{loaderData:l,errors:u}=yC(e,n,i,s);return r.forEach(c=>{let{key:f,match:m,controller:g}=c,y=a[f];if(ge(y,"Did not find corresponding fetcher result"),!(g&&g.signal.aborted))if(hn(y)){let C=aa(t.matches,m==null?void 0:m.route.id);u&&u[C.route.id]||(u=Qe({},u,{[C.route.id]:y.error})),t.fetchers.delete(f)}else if(sa(y))ge(!1,"Unhandled fetcher revalidation redirect");else if(pr(y))ge(!1,"Unhandled fetcher deferred data");else{let C=nr(y.data);t.fetchers.set(f,C)}}),{loaderData:l,errors:u}}function Zv(t,e,n,i){let r=Qe({},e);for(let a of n){let s=a.route.id;if(e.hasOwnProperty(s)?e[s]!==void 0&&(r[s]=e[s]):t[s]!==void 0&&a.route.loader&&(r[s]=t[s]),i&&i.hasOwnProperty(s))break}return r}function Wv(t){return t?hn(t[1])?{actionData:{}}:{actionData:{[t[0]]:t[1].data}}:{}}function aa(t,e){return(e?t.slice(0,t.findIndex(i=>i.route.id===e)+1):[...t]).reverse().find(i=>i.route.hasErrorBoundary===!0)||t[0]}function Jv(t){let e=t.length===1?t[0]:t.find(n=>n.index||!n.path||n.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:e}],route:e}}function Zt(t,e){let{pathname:n,routeId:i,method:r,type:a,message:s}=e===void 0?{}:e,l="Unknown Server Error",u="Unknown @remix-run/router error";return t===400?(l="Bad Request",r&&n&&i?u="You made a "+r+' request to "'+n+'" but '+('did not provide a `loader` for route "'+i+'", ')+"so there is no way to handle the request.":a==="defer-action"?u="defer() is not supported in actions":a==="invalid-body"&&(u="Unable to encode submission body")):t===403?(l="Forbidden",u='Route "'+i+'" does not match URL "'+n+'"'):t===404?(l="Not Found",u='No route matches URL "'+n+'"'):t===405&&(l="Method Not Allowed",r&&n&&i?u="You made a "+r.toUpperCase()+' request to "'+n+'" but '+('did not provide an `action` for route "'+i+'", ')+"so there is no way to handle the request.":r&&(u='Invalid request method "'+r.toUpperCase()+'"')),new Wc(t||500,l,new Error(u),!0)}function Hu(t){let e=Object.entries(t);for(let n=e.length-1;n>=0;n--){let[i,r]=e[n];if(sa(r))return{key:i,result:r}}}function PS(t){let e=typeof t=="string"?Hr(t):t;return Ta(Qe({},e,{hash:""}))}function vC(t,e){return t.pathname!==e.pathname||t.search!==e.search?!1:t.hash===""?e.hash!=="":t.hash===e.hash?!0:e.hash!==""}function _C(t){return LS(t.result)&&rC.has(t.result.status)}function pr(t){return t.type===Ne.deferred}function hn(t){return t.type===Ne.error}function sa(t){return(t&&t.type)===Ne.redirect}function e_(t){return typeof t=="object"&&t!=null&&"type"in t&&"data"in t&&"init"in t&&t.type==="DataWithResponseInit"}function EC(t){let e=t;return e&&typeof e=="object"&&typeof e.data=="object"&&typeof e.subscribe=="function"&&typeof e.cancel=="function"&&typeof e.resolveData=="function"}function LS(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.headers=="object"&&typeof t.body<"u"}function TC(t){return iC.has(t.toLowerCase())}function Un(t){return tC.has(t.toLowerCase())}async function SC(t,e,n,i,r){let a=Object.entries(e);for(let s=0;s<a.length;s++){let[l,u]=a[s],c=t.find(g=>(g==null?void 0:g.route.id)===l);if(!c)continue;let f=i.find(g=>g.route.id===c.route.id),m=f!=null&&!xS(f,c)&&(r&&r[c.route.id])!==void 0;pr(u)&&m&&await Bg(u,n,!1).then(g=>{g&&(e[l]=g)})}}async function AC(t,e,n){for(let i=0;i<n.length;i++){let{key:r,routeId:a,controller:s}=n[i],l=e[r];t.find(c=>(c==null?void 0:c.route.id)===a)&&pr(l)&&(ge(s,"Expected an AbortController for revalidating fetcher deferred result"),await Bg(l,s.signal,!0).then(c=>{c&&(e[r]=c)}))}}async function Bg(t,e,n){if(n===void 0&&(n=!1),!await t.deferredData.resolveData(e)){if(n)try{return{type:Ne.data,data:t.deferredData.unwrappedData}}catch(r){return{type:Ne.error,error:r}}return{type:Ne.data,data:t.deferredData.data}}}function Hg(t){return new URLSearchParams(t).getAll("index").some(e=>e==="")}function zo(t,e){let n=typeof e=="string"?Hr(e).search:e.search;if(t[t.length-1].route.index&&Hg(n||""))return t[t.length-1];let i=OS(t);return i[i.length-1]}function t_(t){let{formMethod:e,formAction:n,formEncType:i,text:r,formData:a,json:s}=t;if(!(!e||!n||!i)){if(r!=null)return{formMethod:e,formAction:n,formEncType:i,formData:void 0,json:void 0,text:r};if(a!=null)return{formMethod:e,formAction:n,formEncType:i,formData:a,json:void 0,text:void 0};if(s!==void 0)return{formMethod:e,formAction:n,formEncType:i,formData:void 0,json:s,text:void 0}}}function td(t,e){return e?{state:"loading",location:t,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}:{state:"loading",location:t,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function bC(t,e){return{state:"submitting",location:t,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}}function xo(t,e){return t?{state:"loading",formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text,data:e}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function wC(t,e){return{state:"submitting",formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text,data:e?e.data:void 0}}function nr(t){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:t}}function RC(t,e){try{let n=t.sessionStorage.getItem(MS);if(n){let i=JSON.parse(n);for(let[r,a]of Object.entries(i||{}))a&&Array.isArray(a)&&e.set(r,new Set(a||[]))}}catch{}}function IC(t,e){if(e.size>0){let n={};for(let[i,r]of e)n[i]=[...r];try{t.sessionStorage.setItem(MS,JSON.stringify(n))}catch(i){Ls(!1,"Failed to save applied view transitions in sessionStorage ("+i+").")}}}/**
 * React Router v6.30.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Jc(){return Jc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Jc.apply(this,arguments)}const Zl=U.createContext(null),Fg=U.createContext(null),Fr=U.createContext(null),qg=U.createContext(null),qi=U.createContext({outlet:null,matches:[],isDataRoute:!1}),US=U.createContext(null);function CC(t,e){let{relative:n}=e===void 0?{}:e;Wl()||ge(!1);let{basename:i,navigator:r}=U.useContext(Fr),{hash:a,pathname:s,search:l}=zh(t,{relative:n}),u=s;return i!=="/"&&(u=s==="/"?i:Ni([i,s])),r.createHref({pathname:u,search:l,hash:a})}function Wl(){return U.useContext(qg)!=null}function Jl(){return Wl()||ge(!1),U.useContext(qg).location}function kS(t){U.useContext(Fr).static||U.useLayoutEffect(t)}function eu(){let{isDataRoute:t}=U.useContext(qi);return t?FC():DC()}function DC(){Wl()||ge(!1);let t=U.useContext(Zl),{basename:e,future:n,navigator:i}=U.useContext(Fr),{matches:r}=U.useContext(qi),{pathname:a}=Jl(),s=JSON.stringify(kg(r,n.v7_relativeSplatPath)),l=U.useRef(!1);return kS(()=>{l.current=!0}),U.useCallback(function(c,f){if(f===void 0&&(f={}),!l.current)return;if(typeof c=="number"){i.go(c);return}let m=zg(c,JSON.parse(s),a,f.relative==="path");t==null&&e!=="/"&&(m.pathname=m.pathname==="/"?e:Ni([e,m.pathname])),(f.replace?i.replace:i.push)(m,f.state,f)},[e,i,s,a,t])}const OC=U.createContext(null);function NC(t){let e=U.useContext(qi).outlet;return e&&U.createElement(OC.Provider,{value:t},e)}function MC(){let{matches:t}=U.useContext(qi),e=t[t.length-1];return e?e.params:{}}function zh(t,e){let{relative:n}=e===void 0?{}:e,{future:i}=U.useContext(Fr),{matches:r}=U.useContext(qi),{pathname:a}=Jl(),s=JSON.stringify(kg(r,i.v7_relativeSplatPath));return U.useMemo(()=>zg(t,JSON.parse(s),a,n==="path"),[t,s,a,n])}function xC(t,e,n,i){Wl()||ge(!1);let{navigator:r,static:a}=U.useContext(Fr),{matches:s}=U.useContext(qi),l=s[s.length-1],u=l?l.params:{};l&&l.pathname;let c=l?l.pathnameBase:"/";l&&l.route;let f=Jl(),m;m=f;let g=m.pathname||"/",y=g;if(c!=="/"){let M=c.replace(/^\//,"").split("/");y="/"+g.replace(/^\//,"").split("/").slice(M.length).join("/")}let C=!a&&n&&n.matches&&n.matches.length>0?n.matches:ra(t,{pathname:y});return kC(C&&C.map(M=>Object.assign({},M,{params:Object.assign({},u,M.params),pathname:Ni([c,r.encodeLocation?r.encodeLocation(M.pathname).pathname:M.pathname]),pathnameBase:M.pathnameBase==="/"?c:Ni([c,r.encodeLocation?r.encodeLocation(M.pathnameBase).pathname:M.pathnameBase])})),s,n,i)}function VC(){let t=HC(),e=wl(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return U.createElement(U.Fragment,null,U.createElement("h2",null,"Unexpected Application Error!"),U.createElement("h3",{style:{fontStyle:"italic"}},e),n?U.createElement("pre",{style:r},n):null,null)}const PC=U.createElement(VC,null);class LC extends U.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?U.createElement(qi.Provider,{value:this.props.routeContext},U.createElement(US.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function UC(t){let{routeContext:e,match:n,children:i}=t,r=U.useContext(Zl);return r&&r.static&&r.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=n.route.id),U.createElement(qi.Provider,{value:e},i)}function kC(t,e,n,i){var r;if(e===void 0&&(e=[]),n===void 0&&(n=null),i===void 0&&(i=null),t==null){var a;if(!n)return null;if(n.errors)t=n.matches;else if((a=i)!=null&&a.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let s=t,l=(r=n)==null?void 0:r.errors;if(l!=null){let f=s.findIndex(m=>m.route.id&&(l==null?void 0:l[m.route.id])!==void 0);f>=0||ge(!1),s=s.slice(0,Math.min(s.length,f+1))}let u=!1,c=-1;if(n&&i&&i.v7_partialHydration)for(let f=0;f<s.length;f++){let m=s[f];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(c=f),m.route.id){let{loaderData:g,errors:y}=n,C=m.route.loader&&g[m.route.id]===void 0&&(!y||y[m.route.id]===void 0);if(m.route.lazy||C){u=!0,c>=0?s=s.slice(0,c+1):s=[s[0]];break}}}return s.reduceRight((f,m,g)=>{let y,C=!1,O=null,M=null;n&&(y=l&&m.route.id?l[m.route.id]:void 0,O=m.route.errorElement||PC,u&&(c<0&&g===0?(qC("route-fallback"),C=!0,M=null):c===g&&(C=!0,M=m.route.hydrateFallbackElement||null)));let T=e.concat(s.slice(0,g+1)),E=()=>{let b;return y?b=O:C?b=M:m.route.Component?b=U.createElement(m.route.Component,null):m.route.element?b=m.route.element:b=f,U.createElement(UC,{match:m,routeContext:{outlet:f,matches:T,isDataRoute:n!=null},children:b})};return n&&(m.route.ErrorBoundary||m.route.errorElement||g===0)?U.createElement(LC,{location:n.location,revalidation:n.revalidation,component:O,error:y,children:E(),routeContext:{outlet:null,matches:T,isDataRoute:!0}}):E()},null)}var zS=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(zS||{}),jS=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(jS||{});function zC(t){let e=U.useContext(Zl);return e||ge(!1),e}function jC(t){let e=U.useContext(Fg);return e||ge(!1),e}function BC(t){let e=U.useContext(qi);return e||ge(!1),e}function BS(t){let e=BC(),n=e.matches[e.matches.length-1];return n.route.id||ge(!1),n.route.id}function HC(){var t;let e=U.useContext(US),n=jC(jS.UseRouteError),i=BS();return e!==void 0?e:(t=n.errors)==null?void 0:t[i]}function FC(){let{router:t}=zC(zS.UseNavigateStable),e=BS(),n=U.useRef(!1);return kS(()=>{n.current=!0}),U.useCallback(function(r,a){a===void 0&&(a={}),n.current&&(typeof r=="number"?t.navigate(r):t.navigate(r,Jc({fromRouteId:e},a)))},[t,e])}const n_={};function qC(t,e,n){n_[t]||(n_[t]=!0)}function GC(t,e){t==null||t.v7_startTransition,(t==null?void 0:t.v7_relativeSplatPath)===void 0&&(!e||e.v7_relativeSplatPath),e&&(e.v7_fetcherPersist,e.v7_normalizeFormMethod,e.v7_partialHydration,e.v7_skipActionErrorRevalidation)}function KC(t){return NC(t.context)}function QC(t){let{basename:e="/",children:n=null,location:i,navigationType:r=ut.Pop,navigator:a,static:s=!1,future:l}=t;Wl()&&ge(!1);let u=e.replace(/^\/*/,"/"),c=U.useMemo(()=>({basename:u,navigator:a,static:s,future:Jc({v7_relativeSplatPath:!1},l)}),[u,l,a,s]);typeof i=="string"&&(i=Hr(i));let{pathname:f="/",search:m="",hash:g="",state:y=null,key:C="default"}=i,O=U.useMemo(()=>{let M=Ui(f,u);return M==null?null:{location:{pathname:M,search:m,hash:g,state:y,key:C},navigationType:r}},[u,f,m,g,y,C,r]);return O==null?null:U.createElement(Fr.Provider,{value:c},U.createElement(qg.Provider,{children:n,value:O}))}new Promise(()=>{});function YC(t){let e={hasErrorBoundary:t.ErrorBoundary!=null||t.errorElement!=null};return t.Component&&Object.assign(e,{element:U.createElement(t.Component),Component:void 0}),t.HydrateFallback&&Object.assign(e,{hydrateFallbackElement:U.createElement(t.HydrateFallback),HydrateFallback:void 0}),t.ErrorBoundary&&Object.assign(e,{errorElement:U.createElement(t.ErrorBoundary),ErrorBoundary:void 0}),e}/**
 * React Router DOM v6.30.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Us(){return Us=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Us.apply(this,arguments)}function HS(t,e){if(t==null)return{};var n={},i=Object.keys(t),r,a;for(a=0;a<i.length;a++)r=i[a],!(e.indexOf(r)>=0)&&(n[r]=t[r]);return n}function XC(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function $C(t,e){return t.button===0&&(!e||e==="_self")&&!XC(t)}const ZC=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],WC=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],JC="6";try{window.__reactRouterVersion=JC}catch{}function eD(t,e){return lC({basename:void 0,future:Us({},void 0,{v7_prependBasename:!0}),history:MI({window:void 0}),hydrationData:tD(),routes:t,mapRouteProperties:YC,dataStrategy:void 0,patchRoutesOnNavigation:void 0,window:void 0}).initialize()}function tD(){var t;let e=(t=window)==null?void 0:t.__staticRouterHydrationData;return e&&e.errors&&(e=Us({},e,{errors:nD(e.errors)})),e}function nD(t){if(!t)return null;let e=Object.entries(t),n={};for(let[i,r]of e)if(r&&r.__type==="RouteErrorResponse")n[i]=new Wc(r.status,r.statusText,r.data,r.internal===!0);else if(r&&r.__type==="Error"){if(r.__subType){let a=window[r.__subType];if(typeof a=="function")try{let s=new a(r.message);s.stack="",n[i]=s}catch{}}if(n[i]==null){let a=new Error(r.message);a.stack="",n[i]=a}}else n[i]=r;return n}const FS=U.createContext({isTransitioning:!1}),iD=U.createContext(new Map),rD="startTransition",i_=$w[rD],aD="flushSync",r_=nR[aD];function sD(t){i_?i_(t):t()}function Vo(t){r_?r_(t):t()}let oD=class{constructor(){this.status="pending",this.promise=new Promise((e,n)=>{this.resolve=i=>{this.status==="pending"&&(this.status="resolved",e(i))},this.reject=i=>{this.status==="pending"&&(this.status="rejected",n(i))}})}};function lD(t){let{fallbackElement:e,router:n,future:i}=t,[r,a]=U.useState(n.state),[s,l]=U.useState(),[u,c]=U.useState({isTransitioning:!1}),[f,m]=U.useState(),[g,y]=U.useState(),[C,O]=U.useState(),M=U.useRef(new Map),{v7_startTransition:T}=i||{},E=U.useCallback(v=>{T?sD(v):v()},[T]),b=U.useCallback((v,S)=>{let{deletedFetchers:A,flushSync:I,viewTransitionOpts:D}=S;v.fetchers.forEach((ze,ft)=>{ze.data!==void 0&&M.current.set(ft,ze.data)}),A.forEach(ze=>M.current.delete(ze));let w=n.window==null||n.window.document==null||typeof n.window.document.startViewTransition!="function";if(!D||w){I?Vo(()=>a(v)):E(()=>a(v));return}if(I){Vo(()=>{g&&(f&&f.resolve(),g.skipTransition()),c({isTransitioning:!0,flushSync:!0,currentLocation:D.currentLocation,nextLocation:D.nextLocation})});let ze=n.window.document.startViewTransition(()=>{Vo(()=>a(v))});ze.finished.finally(()=>{Vo(()=>{m(void 0),y(void 0),l(void 0),c({isTransitioning:!1})})}),Vo(()=>y(ze));return}g?(f&&f.resolve(),g.skipTransition(),O({state:v,currentLocation:D.currentLocation,nextLocation:D.nextLocation})):(l(v),c({isTransitioning:!0,flushSync:!1,currentLocation:D.currentLocation,nextLocation:D.nextLocation}))},[n.window,g,f,M,E]);U.useLayoutEffect(()=>n.subscribe(b),[n,b]),U.useEffect(()=>{u.isTransitioning&&!u.flushSync&&m(new oD)},[u]),U.useEffect(()=>{if(f&&s&&n.window){let v=s,S=f.promise,A=n.window.document.startViewTransition(async()=>{E(()=>a(v)),await S});A.finished.finally(()=>{m(void 0),y(void 0),l(void 0),c({isTransitioning:!1})}),y(A)}},[E,s,f,n.window]),U.useEffect(()=>{f&&s&&r.location.key===s.location.key&&f.resolve()},[f,g,r.location,s]),U.useEffect(()=>{!u.isTransitioning&&C&&(l(C.state),c({isTransitioning:!0,flushSync:!1,currentLocation:C.currentLocation,nextLocation:C.nextLocation}),O(void 0))},[u.isTransitioning,C]),U.useEffect(()=>{},[]);let N=U.useMemo(()=>({createHref:n.createHref,encodeLocation:n.encodeLocation,go:v=>n.navigate(v),push:(v,S,A)=>n.navigate(v,{state:S,preventScrollReset:A==null?void 0:A.preventScrollReset}),replace:(v,S,A)=>n.navigate(v,{replace:!0,state:S,preventScrollReset:A==null?void 0:A.preventScrollReset})}),[n]),j=n.basename||"/",q=U.useMemo(()=>({router:n,navigator:N,static:!1,basename:j}),[n,N,j]),p=U.useMemo(()=>({v7_relativeSplatPath:n.future.v7_relativeSplatPath}),[n.future.v7_relativeSplatPath]);return U.useEffect(()=>GC(i,n.future),[i,n.future]),U.createElement(U.Fragment,null,U.createElement(Zl.Provider,{value:q},U.createElement(Fg.Provider,{value:r},U.createElement(iD.Provider,{value:M.current},U.createElement(FS.Provider,{value:u},U.createElement(QC,{basename:j,location:r.location,navigationType:r.historyAction,navigator:N,future:p},r.initialized||n.future.v7_partialHydration?U.createElement(uD,{routes:n.routes,future:n.future,state:r}):e))))),null)}const uD=U.memo(cD);function cD(t){let{routes:e,future:n,state:i}=t;return xC(e,void 0,i,n)}const hD=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",fD=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,dD=U.forwardRef(function(e,n){let{onClick:i,relative:r,reloadDocument:a,replace:s,state:l,target:u,to:c,preventScrollReset:f,viewTransition:m}=e,g=HS(e,ZC),{basename:y}=U.useContext(Fr),C,O=!1;if(typeof c=="string"&&fD.test(c)&&(C=c,hD))try{let b=new URL(window.location.href),N=c.startsWith("//")?new URL(b.protocol+c):new URL(c),j=Ui(N.pathname,y);N.origin===b.origin&&j!=null?c=j+N.search+N.hash:O=!0}catch{}let M=CC(c,{relative:r}),T=gD(c,{replace:s,state:l,target:u,preventScrollReset:f,relative:r,viewTransition:m});function E(b){i&&i(b),b.defaultPrevented||T(b)}return U.createElement("a",Us({},g,{href:C||M,onClick:O||a?i:E,ref:n,target:u}))}),Fu=U.forwardRef(function(e,n){let{"aria-current":i="page",caseSensitive:r=!1,className:a="",end:s=!1,style:l,to:u,viewTransition:c,children:f}=e,m=HS(e,WC),g=zh(u,{relative:m.relative}),y=Jl(),C=U.useContext(Fg),{navigator:O,basename:M}=U.useContext(Fr),T=C!=null&&pD(g)&&c===!0,E=O.encodeLocation?O.encodeLocation(g).pathname:g.pathname,b=y.pathname,N=C&&C.navigation&&C.navigation.location?C.navigation.location.pathname:null;r||(b=b.toLowerCase(),N=N?N.toLowerCase():null,E=E.toLowerCase()),N&&M&&(N=Ui(N,M)||N);const j=E!=="/"&&E.endsWith("/")?E.length-1:E.length;let q=b===E||!s&&b.startsWith(E)&&b.charAt(j)==="/",p=N!=null&&(N===E||!s&&N.startsWith(E)&&N.charAt(E.length)==="/"),v={isActive:q,isPending:p,isTransitioning:T},S=q?i:void 0,A;typeof a=="function"?A=a(v):A=[a,q?"active":null,p?"pending":null,T?"transitioning":null].filter(Boolean).join(" ");let I=typeof l=="function"?l(v):l;return U.createElement(dD,Us({},m,{"aria-current":S,className:A,ref:n,style:I,to:u,viewTransition:c}),typeof f=="function"?f(v):f)});var hm;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(hm||(hm={}));var a_;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(a_||(a_={}));function mD(t){let e=U.useContext(Zl);return e||ge(!1),e}function gD(t,e){let{target:n,replace:i,state:r,preventScrollReset:a,relative:s,viewTransition:l}=e===void 0?{}:e,u=eu(),c=Jl(),f=zh(t,{relative:s});return U.useCallback(m=>{if($C(m,n)){m.preventDefault();let g=i!==void 0?i:Ta(c)===Ta(f);u(t,{replace:g,state:r,preventScrollReset:a,relative:s,viewTransition:l})}},[c,u,f,i,r,n,t,a,s,l])}function pD(t,e){e===void 0&&(e={});let n=U.useContext(FS);n==null&&ge(!1);let{basename:i}=mD(hm.useViewTransitionState),r=zh(t,{relative:e.relative});if(!n.isTransitioning)return!1;let a=Ui(n.currentLocation.pathname,i)||n.currentLocation.pathname,s=Ui(n.nextLocation.pathname,i)||n.nextLocation.pathname;return Zc(r.pathname,s)!=null||Zc(r.pathname,a)!=null}const qS="appleworm_favorites",yD=(t,e)=>{switch(e.type){case"ADD":return t.some(n=>n.id===e.book.id)?t:[...t,e.book];case"REMOVE":return t.filter(n=>n.id!==e.id);default:return t}},vD=()=>{try{const t=localStorage.getItem(qS);return t?JSON.parse(t):[]}catch{return[]}},GS=U.createContext(null),_D=({children:t})=>{const[e,n]=U.useReducer(yD,void 0,vD),i=s=>n({type:"ADD",book:s}),r=s=>n({type:"REMOVE",id:s});U.useEffect(()=>{localStorage.setItem(qS,JSON.stringify(e))},[e]);const a=U.useMemo(()=>({favorites:e,addFavorite:i,removeFavorite:r}),[e]);return B.jsx(GS.Provider,{value:a,children:t})},KS=()=>{const t=U.useContext(GS);if(!t)throw new Error("useFavorites must be used within FavoritesProvider");return t};function ED(){const{favorites:t}=KS();return B.jsxs("nav",{style:{display:"flex",gap:"1rem",padding:"1rem"},children:[B.jsx(Fu,{to:"/",children:"Home"}),B.jsx(Fu,{to:"/new",children:"Add new book"}),B.jsx(Fu,{to:"/login",children:"Login"}),B.jsxs(Fu,{to:"/favorites",children:["Favorites (",t.length,")"]})]})}function TD(){return B.jsx("footer",{className:"center",children:B.jsx("a",{className:"email",href:"mailto:273018@student.pwr.edu.pl",children:"Contact: 273018@student.pwr.edu.pl"})})}const SD=()=>{};var s_={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QS=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let r=t.charCodeAt(i);r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=r&63|128):(r&64512)===55296&&i+1<t.length&&(t.charCodeAt(i+1)&64512)===56320?(r=65536+((r&1023)<<10)+(t.charCodeAt(++i)&1023),e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=r&63|128):(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=r&63|128)}return e},AD=function(t){const e=[];let n=0,i=0;for(;n<t.length;){const r=t[n++];if(r<128)e[i++]=String.fromCharCode(r);else if(r>191&&r<224){const a=t[n++];e[i++]=String.fromCharCode((r&31)<<6|a&63)}else if(r>239&&r<365){const a=t[n++],s=t[n++],l=t[n++],u=((r&7)<<18|(a&63)<<12|(s&63)<<6|l&63)-65536;e[i++]=String.fromCharCode(55296+(u>>10)),e[i++]=String.fromCharCode(56320+(u&1023))}else{const a=t[n++],s=t[n++];e[i++]=String.fromCharCode((r&15)<<12|(a&63)<<6|s&63)}}return e.join("")},YS={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<t.length;r+=3){const a=t[r],s=r+1<t.length,l=s?t[r+1]:0,u=r+2<t.length,c=u?t[r+2]:0,f=a>>2,m=(a&3)<<4|l>>4;let g=(l&15)<<2|c>>6,y=c&63;u||(y=64,s||(g=64)),i.push(n[f],n[m],n[g],n[y])}return i.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(QS(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):AD(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<t.length;){const a=n[t.charAt(r++)],l=r<t.length?n[t.charAt(r)]:0;++r;const c=r<t.length?n[t.charAt(r)]:64;++r;const m=r<t.length?n[t.charAt(r)]:64;if(++r,a==null||l==null||c==null||m==null)throw new bD;const g=a<<2|l>>4;if(i.push(g),c!==64){const y=l<<4&240|c>>2;if(i.push(y),m!==64){const C=c<<6&192|m;i.push(C)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class bD extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const wD=function(t){const e=QS(t);return YS.encodeByteArray(e,!0)},eh=function(t){return wD(t).replace(/\./g,"")},XS=function(t){try{return YS.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RD(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ID=()=>RD().__FIREBASE_DEFAULTS__,CD=()=>{if(typeof process>"u"||typeof s_>"u")return;const t=s_.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},DD=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&XS(t[1]);return e&&JSON.parse(e)},jh=()=>{try{return SD()||ID()||CD()||DD()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},$S=t=>{var e,n;return(n=(e=jh())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},OD=t=>{const e=$S(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),i]:[e.substring(0,n),i]},ZS=()=>{var t;return(t=jh())===null||t===void 0?void 0:t.config},WS=t=>{var e;return(e=jh())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ND{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MD(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=e||"demo-project",r=t.iat||0,a=t.sub||t.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:r,exp:r+3600,auth_time:r,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}}},t);return[eh(JSON.stringify(n)),eh(JSON.stringify(s)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ht(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function xD(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ht())}function VD(){var t;const e=(t=jh())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function PD(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function LD(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function UD(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function kD(){const t=Ht();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function zD(){return!VD()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function jD(){try{return typeof indexedDB=="object"}catch{return!1}}function BD(){return new Promise((t,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(i),t(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var a;e(((a=r.error)===null||a===void 0?void 0:a.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HD="FirebaseError";class Gi extends Error{constructor(e,n,i){super(n),this.code=e,this.customData=i,this.name=HD,Object.setPrototypeOf(this,Gi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,tu.prototype.create)}}class tu{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){const i=n[0]||{},r=`${this.service}/${e}`,a=this.errors[e],s=a?FD(a,i):"Error",l=`${this.serviceName}: ${s} (${r}).`;return new Gi(r,l,i)}}function FD(t,e){return t.replace(qD,(n,i)=>{const r=e[i];return r!=null?String(r):`<${i}?>`})}const qD=/\{\$([^}]+)}/g;function GD(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Sa(t,e){if(t===e)return!0;const n=Object.keys(t),i=Object.keys(e);for(const r of n){if(!i.includes(r))return!1;const a=t[r],s=e[r];if(o_(a)&&o_(s)){if(!Sa(a,s))return!1}else if(a!==s)return!1}for(const r of i)if(!n.includes(r))return!1;return!0}function o_(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nu(t){const e=[];for(const[n,i]of Object.entries(t))Array.isArray(i)?i.forEach(r=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function KD(t,e){const n=new QD(t,e);return n.subscribe.bind(n)}class QD{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,i){let r;if(e===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");YD(e,["next","error","complete"])?r=e:r={next:e,error:n,complete:i},r.next===void 0&&(r.next=nd),r.error===void 0&&(r.error=nd),r.complete===void 0&&(r.complete=nd);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function YD(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function nd(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ft(t){return t&&t._delegate?t._delegate:t}class Aa{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ia="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XD{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const i=new ND;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:n});r&&i.resolve(r)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const i=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(a){if(r)return null;throw a}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(ZD(e))try{this.getOrInitializeService({instanceIdentifier:ia})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(n);try{const a=this.getOrInitializeService({instanceIdentifier:r});i.resolve(a)}catch{}}}}clearInstance(e=ia){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ia){return this.instances.has(e)}getOptions(e=ia){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[a,s]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(a);i===l&&s.resolve(r)}return r}onInit(e,n){var i;const r=this.normalizeInstanceIdentifier(n),a=(i=this.onInitCallbacks.get(r))!==null&&i!==void 0?i:new Set;a.add(e),this.onInitCallbacks.set(r,a);const s=this.instances.get(r);return s&&e(s,r),()=>{a.delete(e)}}invokeOnInitCallbacks(e,n){const i=this.onInitCallbacks.get(n);if(i)for(const r of i)try{r(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:$D(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=ia){return this.component?this.component.multipleInstances?e:ia:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function $D(t){return t===ia?void 0:t}function ZD(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WD{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new XD(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ve;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ve||(ve={}));const JD={debug:ve.DEBUG,verbose:ve.VERBOSE,info:ve.INFO,warn:ve.WARN,error:ve.ERROR,silent:ve.SILENT},e2=ve.INFO,t2={[ve.DEBUG]:"log",[ve.VERBOSE]:"log",[ve.INFO]:"info",[ve.WARN]:"warn",[ve.ERROR]:"error"},n2=(t,e,...n)=>{if(e<t.logLevel)return;const i=new Date().toISOString(),r=t2[e];if(r)console[r](`[${i}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Gg{constructor(e){this.name=e,this._logLevel=e2,this._logHandler=n2,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ve))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?JD[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ve.DEBUG,...e),this._logHandler(this,ve.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ve.VERBOSE,...e),this._logHandler(this,ve.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ve.INFO,...e),this._logHandler(this,ve.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ve.WARN,...e),this._logHandler(this,ve.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ve.ERROR,...e),this._logHandler(this,ve.ERROR,...e)}}const i2=(t,e)=>e.some(n=>t instanceof n);let l_,u_;function r2(){return l_||(l_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function a2(){return u_||(u_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const JS=new WeakMap,fm=new WeakMap,eA=new WeakMap,id=new WeakMap,Kg=new WeakMap;function s2(t){const e=new Promise((n,i)=>{const r=()=>{t.removeEventListener("success",a),t.removeEventListener("error",s)},a=()=>{n(Rr(t.result)),r()},s=()=>{i(t.error),r()};t.addEventListener("success",a),t.addEventListener("error",s)});return e.then(n=>{n instanceof IDBCursor&&JS.set(n,t)}).catch(()=>{}),Kg.set(e,t),e}function o2(t){if(fm.has(t))return;const e=new Promise((n,i)=>{const r=()=>{t.removeEventListener("complete",a),t.removeEventListener("error",s),t.removeEventListener("abort",s)},a=()=>{n(),r()},s=()=>{i(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",a),t.addEventListener("error",s),t.addEventListener("abort",s)});fm.set(t,e)}let dm={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return fm.get(t);if(e==="objectStoreNames")return t.objectStoreNames||eA.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Rr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function l2(t){dm=t(dm)}function u2(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const i=t.call(rd(this),e,...n);return eA.set(i,e.sort?e.sort():[e]),Rr(i)}:a2().includes(t)?function(...e){return t.apply(rd(this),e),Rr(JS.get(this))}:function(...e){return Rr(t.apply(rd(this),e))}}function c2(t){return typeof t=="function"?u2(t):(t instanceof IDBTransaction&&o2(t),i2(t,r2())?new Proxy(t,dm):t)}function Rr(t){if(t instanceof IDBRequest)return s2(t);if(id.has(t))return id.get(t);const e=c2(t);return e!==t&&(id.set(t,e),Kg.set(e,t)),e}const rd=t=>Kg.get(t);function h2(t,e,{blocked:n,upgrade:i,blocking:r,terminated:a}={}){const s=indexedDB.open(t,e),l=Rr(s);return i&&s.addEventListener("upgradeneeded",u=>{i(Rr(s.result),u.oldVersion,u.newVersion,Rr(s.transaction),u)}),n&&s.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),l.then(u=>{a&&u.addEventListener("close",()=>a()),r&&u.addEventListener("versionchange",c=>r(c.oldVersion,c.newVersion,c))}).catch(()=>{}),l}const f2=["get","getKey","getAll","getAllKeys","count"],d2=["put","add","delete","clear"],ad=new Map;function c_(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(ad.get(e))return ad.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,r=d2.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(r||f2.includes(n)))return;const a=async function(s,...l){const u=this.transaction(s,r?"readwrite":"readonly");let c=u.store;return i&&(c=c.index(l.shift())),(await Promise.all([c[n](...l),r&&u.done]))[0]};return ad.set(e,a),a}l2(t=>({...t,get:(e,n,i)=>c_(e,n)||t.get(e,n,i),has:(e,n)=>!!c_(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m2{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(g2(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function g2(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const mm="@firebase/app",h_="0.11.5";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ki=new Gg("@firebase/app"),p2="@firebase/app-compat",y2="@firebase/analytics-compat",v2="@firebase/analytics",_2="@firebase/app-check-compat",E2="@firebase/app-check",T2="@firebase/auth",S2="@firebase/auth-compat",A2="@firebase/database",b2="@firebase/data-connect",w2="@firebase/database-compat",R2="@firebase/functions",I2="@firebase/functions-compat",C2="@firebase/installations",D2="@firebase/installations-compat",O2="@firebase/messaging",N2="@firebase/messaging-compat",M2="@firebase/performance",x2="@firebase/performance-compat",V2="@firebase/remote-config",P2="@firebase/remote-config-compat",L2="@firebase/storage",U2="@firebase/storage-compat",k2="@firebase/firestore",z2="@firebase/vertexai",j2="@firebase/firestore-compat",B2="firebase",H2="11.6.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gm="[DEFAULT]",F2={[mm]:"fire-core",[p2]:"fire-core-compat",[v2]:"fire-analytics",[y2]:"fire-analytics-compat",[E2]:"fire-app-check",[_2]:"fire-app-check-compat",[T2]:"fire-auth",[S2]:"fire-auth-compat",[A2]:"fire-rtdb",[b2]:"fire-data-connect",[w2]:"fire-rtdb-compat",[R2]:"fire-fn",[I2]:"fire-fn-compat",[C2]:"fire-iid",[D2]:"fire-iid-compat",[O2]:"fire-fcm",[N2]:"fire-fcm-compat",[M2]:"fire-perf",[x2]:"fire-perf-compat",[V2]:"fire-rc",[P2]:"fire-rc-compat",[L2]:"fire-gcs",[U2]:"fire-gcs-compat",[k2]:"fire-fst",[j2]:"fire-fst-compat",[z2]:"fire-vertex","fire-js":"fire-js",[B2]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const th=new Map,q2=new Map,pm=new Map;function f_(t,e){try{t.container.addComponent(e)}catch(n){ki.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function ks(t){const e=t.name;if(pm.has(e))return ki.debug(`There were multiple attempts to register component ${e}.`),!1;pm.set(e,t);for(const n of th.values())f_(n,t);for(const n of q2.values())f_(n,t);return!0}function Qg(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function kn(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G2={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ir=new tu("app","Firebase",G2);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K2{constructor(e,n,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Aa("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ir.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eo=H2;function tA(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const i=Object.assign({name:gm,automaticDataCollectionEnabled:!1},e),r=i.name;if(typeof r!="string"||!r)throw Ir.create("bad-app-name",{appName:String(r)});if(n||(n=ZS()),!n)throw Ir.create("no-options");const a=th.get(r);if(a){if(Sa(n,a.options)&&Sa(i,a.config))return a;throw Ir.create("duplicate-app",{appName:r})}const s=new WD(r);for(const u of pm.values())s.addComponent(u);const l=new K2(n,i,s);return th.set(r,l),l}function nA(t=gm){const e=th.get(t);if(!e&&t===gm&&ZS())return tA();if(!e)throw Ir.create("no-app",{appName:t});return e}function Cr(t,e,n){var i;let r=(i=F2[t])!==null&&i!==void 0?i:t;n&&(r+=`-${n}`);const a=r.match(/\s|\//),s=e.match(/\s|\//);if(a||s){const l=[`Unable to register library "${r}" with version "${e}":`];a&&l.push(`library name "${r}" contains illegal characters (whitespace or "/")`),a&&s&&l.push("and"),s&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ki.warn(l.join(" "));return}ks(new Aa(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q2="firebase-heartbeat-database",Y2=1,Rl="firebase-heartbeat-store";let sd=null;function iA(){return sd||(sd=h2(Q2,Y2,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Rl)}catch(n){console.warn(n)}}}}).catch(t=>{throw Ir.create("idb-open",{originalErrorMessage:t.message})})),sd}async function X2(t){try{const n=(await iA()).transaction(Rl),i=await n.objectStore(Rl).get(rA(t));return await n.done,i}catch(e){if(e instanceof Gi)ki.warn(e.message);else{const n=Ir.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});ki.warn(n.message)}}}async function d_(t,e){try{const i=(await iA()).transaction(Rl,"readwrite");await i.objectStore(Rl).put(e,rA(t)),await i.done}catch(n){if(n instanceof Gi)ki.warn(n.message);else{const i=Ir.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});ki.warn(i.message)}}}function rA(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $2=1024,Z2=30;class W2{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new eO(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,n;try{const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=m_();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(s=>s.date===a))return;if(this._heartbeatsCache.heartbeats.push({date:a,agent:r}),this._heartbeatsCache.heartbeats.length>Z2){const s=tO(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(s,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){ki.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=m_(),{heartbeatsToSend:i,unsentEntries:r}=J2(this._heartbeatsCache.heartbeats),a=eh(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=n,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(n){return ki.warn(n),""}}}function m_(){return new Date().toISOString().substring(0,10)}function J2(t,e=$2){const n=[];let i=t.slice();for(const r of t){const a=n.find(s=>s.agent===r.agent);if(a){if(a.dates.push(r.date),g_(n)>e){a.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),g_(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class eO{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return jD()?BD().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await X2(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const r=await this.read();return d_(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const r=await this.read();return d_(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function g_(t){return eh(JSON.stringify({version:2,heartbeats:t})).length}function tO(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let i=1;i<t.length;i++)t[i].date<n&&(n=t[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nO(t){ks(new Aa("platform-logger",e=>new m2(e),"PRIVATE")),ks(new Aa("heartbeat",e=>new W2(e),"PRIVATE")),Cr(mm,h_,t),Cr(mm,h_,"esm2017"),Cr("fire-js","")}nO("");var p_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Dr,aA;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(p,v){function S(){}S.prototype=v.prototype,p.D=v.prototype,p.prototype=new S,p.prototype.constructor=p,p.C=function(A,I,D){for(var w=Array(arguments.length-2),ze=2;ze<arguments.length;ze++)w[ze-2]=arguments[ze];return v.prototype[I].apply(A,w)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,n),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(p,v,S){S||(S=0);var A=Array(16);if(typeof v=="string")for(var I=0;16>I;++I)A[I]=v.charCodeAt(S++)|v.charCodeAt(S++)<<8|v.charCodeAt(S++)<<16|v.charCodeAt(S++)<<24;else for(I=0;16>I;++I)A[I]=v[S++]|v[S++]<<8|v[S++]<<16|v[S++]<<24;v=p.g[0],S=p.g[1],I=p.g[2];var D=p.g[3],w=v+(D^S&(I^D))+A[0]+3614090360&4294967295;v=S+(w<<7&4294967295|w>>>25),w=D+(I^v&(S^I))+A[1]+3905402710&4294967295,D=v+(w<<12&4294967295|w>>>20),w=I+(S^D&(v^S))+A[2]+606105819&4294967295,I=D+(w<<17&4294967295|w>>>15),w=S+(v^I&(D^v))+A[3]+3250441966&4294967295,S=I+(w<<22&4294967295|w>>>10),w=v+(D^S&(I^D))+A[4]+4118548399&4294967295,v=S+(w<<7&4294967295|w>>>25),w=D+(I^v&(S^I))+A[5]+1200080426&4294967295,D=v+(w<<12&4294967295|w>>>20),w=I+(S^D&(v^S))+A[6]+2821735955&4294967295,I=D+(w<<17&4294967295|w>>>15),w=S+(v^I&(D^v))+A[7]+4249261313&4294967295,S=I+(w<<22&4294967295|w>>>10),w=v+(D^S&(I^D))+A[8]+1770035416&4294967295,v=S+(w<<7&4294967295|w>>>25),w=D+(I^v&(S^I))+A[9]+2336552879&4294967295,D=v+(w<<12&4294967295|w>>>20),w=I+(S^D&(v^S))+A[10]+4294925233&4294967295,I=D+(w<<17&4294967295|w>>>15),w=S+(v^I&(D^v))+A[11]+2304563134&4294967295,S=I+(w<<22&4294967295|w>>>10),w=v+(D^S&(I^D))+A[12]+1804603682&4294967295,v=S+(w<<7&4294967295|w>>>25),w=D+(I^v&(S^I))+A[13]+4254626195&4294967295,D=v+(w<<12&4294967295|w>>>20),w=I+(S^D&(v^S))+A[14]+2792965006&4294967295,I=D+(w<<17&4294967295|w>>>15),w=S+(v^I&(D^v))+A[15]+1236535329&4294967295,S=I+(w<<22&4294967295|w>>>10),w=v+(I^D&(S^I))+A[1]+4129170786&4294967295,v=S+(w<<5&4294967295|w>>>27),w=D+(S^I&(v^S))+A[6]+3225465664&4294967295,D=v+(w<<9&4294967295|w>>>23),w=I+(v^S&(D^v))+A[11]+643717713&4294967295,I=D+(w<<14&4294967295|w>>>18),w=S+(D^v&(I^D))+A[0]+3921069994&4294967295,S=I+(w<<20&4294967295|w>>>12),w=v+(I^D&(S^I))+A[5]+3593408605&4294967295,v=S+(w<<5&4294967295|w>>>27),w=D+(S^I&(v^S))+A[10]+38016083&4294967295,D=v+(w<<9&4294967295|w>>>23),w=I+(v^S&(D^v))+A[15]+3634488961&4294967295,I=D+(w<<14&4294967295|w>>>18),w=S+(D^v&(I^D))+A[4]+3889429448&4294967295,S=I+(w<<20&4294967295|w>>>12),w=v+(I^D&(S^I))+A[9]+568446438&4294967295,v=S+(w<<5&4294967295|w>>>27),w=D+(S^I&(v^S))+A[14]+3275163606&4294967295,D=v+(w<<9&4294967295|w>>>23),w=I+(v^S&(D^v))+A[3]+4107603335&4294967295,I=D+(w<<14&4294967295|w>>>18),w=S+(D^v&(I^D))+A[8]+1163531501&4294967295,S=I+(w<<20&4294967295|w>>>12),w=v+(I^D&(S^I))+A[13]+2850285829&4294967295,v=S+(w<<5&4294967295|w>>>27),w=D+(S^I&(v^S))+A[2]+4243563512&4294967295,D=v+(w<<9&4294967295|w>>>23),w=I+(v^S&(D^v))+A[7]+1735328473&4294967295,I=D+(w<<14&4294967295|w>>>18),w=S+(D^v&(I^D))+A[12]+2368359562&4294967295,S=I+(w<<20&4294967295|w>>>12),w=v+(S^I^D)+A[5]+4294588738&4294967295,v=S+(w<<4&4294967295|w>>>28),w=D+(v^S^I)+A[8]+2272392833&4294967295,D=v+(w<<11&4294967295|w>>>21),w=I+(D^v^S)+A[11]+1839030562&4294967295,I=D+(w<<16&4294967295|w>>>16),w=S+(I^D^v)+A[14]+4259657740&4294967295,S=I+(w<<23&4294967295|w>>>9),w=v+(S^I^D)+A[1]+2763975236&4294967295,v=S+(w<<4&4294967295|w>>>28),w=D+(v^S^I)+A[4]+1272893353&4294967295,D=v+(w<<11&4294967295|w>>>21),w=I+(D^v^S)+A[7]+4139469664&4294967295,I=D+(w<<16&4294967295|w>>>16),w=S+(I^D^v)+A[10]+3200236656&4294967295,S=I+(w<<23&4294967295|w>>>9),w=v+(S^I^D)+A[13]+681279174&4294967295,v=S+(w<<4&4294967295|w>>>28),w=D+(v^S^I)+A[0]+3936430074&4294967295,D=v+(w<<11&4294967295|w>>>21),w=I+(D^v^S)+A[3]+3572445317&4294967295,I=D+(w<<16&4294967295|w>>>16),w=S+(I^D^v)+A[6]+76029189&4294967295,S=I+(w<<23&4294967295|w>>>9),w=v+(S^I^D)+A[9]+3654602809&4294967295,v=S+(w<<4&4294967295|w>>>28),w=D+(v^S^I)+A[12]+3873151461&4294967295,D=v+(w<<11&4294967295|w>>>21),w=I+(D^v^S)+A[15]+530742520&4294967295,I=D+(w<<16&4294967295|w>>>16),w=S+(I^D^v)+A[2]+3299628645&4294967295,S=I+(w<<23&4294967295|w>>>9),w=v+(I^(S|~D))+A[0]+4096336452&4294967295,v=S+(w<<6&4294967295|w>>>26),w=D+(S^(v|~I))+A[7]+1126891415&4294967295,D=v+(w<<10&4294967295|w>>>22),w=I+(v^(D|~S))+A[14]+2878612391&4294967295,I=D+(w<<15&4294967295|w>>>17),w=S+(D^(I|~v))+A[5]+4237533241&4294967295,S=I+(w<<21&4294967295|w>>>11),w=v+(I^(S|~D))+A[12]+1700485571&4294967295,v=S+(w<<6&4294967295|w>>>26),w=D+(S^(v|~I))+A[3]+2399980690&4294967295,D=v+(w<<10&4294967295|w>>>22),w=I+(v^(D|~S))+A[10]+4293915773&4294967295,I=D+(w<<15&4294967295|w>>>17),w=S+(D^(I|~v))+A[1]+2240044497&4294967295,S=I+(w<<21&4294967295|w>>>11),w=v+(I^(S|~D))+A[8]+1873313359&4294967295,v=S+(w<<6&4294967295|w>>>26),w=D+(S^(v|~I))+A[15]+4264355552&4294967295,D=v+(w<<10&4294967295|w>>>22),w=I+(v^(D|~S))+A[6]+2734768916&4294967295,I=D+(w<<15&4294967295|w>>>17),w=S+(D^(I|~v))+A[13]+1309151649&4294967295,S=I+(w<<21&4294967295|w>>>11),w=v+(I^(S|~D))+A[4]+4149444226&4294967295,v=S+(w<<6&4294967295|w>>>26),w=D+(S^(v|~I))+A[11]+3174756917&4294967295,D=v+(w<<10&4294967295|w>>>22),w=I+(v^(D|~S))+A[2]+718787259&4294967295,I=D+(w<<15&4294967295|w>>>17),w=S+(D^(I|~v))+A[9]+3951481745&4294967295,p.g[0]=p.g[0]+v&4294967295,p.g[1]=p.g[1]+(I+(w<<21&4294967295|w>>>11))&4294967295,p.g[2]=p.g[2]+I&4294967295,p.g[3]=p.g[3]+D&4294967295}i.prototype.u=function(p,v){v===void 0&&(v=p.length);for(var S=v-this.blockSize,A=this.B,I=this.h,D=0;D<v;){if(I==0)for(;D<=S;)r(this,p,D),D+=this.blockSize;if(typeof p=="string"){for(;D<v;)if(A[I++]=p.charCodeAt(D++),I==this.blockSize){r(this,A),I=0;break}}else for(;D<v;)if(A[I++]=p[D++],I==this.blockSize){r(this,A),I=0;break}}this.h=I,this.o+=v},i.prototype.v=function(){var p=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);p[0]=128;for(var v=1;v<p.length-8;++v)p[v]=0;var S=8*this.o;for(v=p.length-8;v<p.length;++v)p[v]=S&255,S/=256;for(this.u(p),p=Array(16),v=S=0;4>v;++v)for(var A=0;32>A;A+=8)p[S++]=this.g[v]>>>A&255;return p};function a(p,v){var S=l;return Object.prototype.hasOwnProperty.call(S,p)?S[p]:S[p]=v(p)}function s(p,v){this.h=v;for(var S=[],A=!0,I=p.length-1;0<=I;I--){var D=p[I]|0;A&&D==v||(S[I]=D,A=!1)}this.g=S}var l={};function u(p){return-128<=p&&128>p?a(p,function(v){return new s([v|0],0>v?-1:0)}):new s([p|0],0>p?-1:0)}function c(p){if(isNaN(p)||!isFinite(p))return m;if(0>p)return M(c(-p));for(var v=[],S=1,A=0;p>=S;A++)v[A]=p/S|0,S*=4294967296;return new s(v,0)}function f(p,v){if(p.length==0)throw Error("number format error: empty string");if(v=v||10,2>v||36<v)throw Error("radix out of range: "+v);if(p.charAt(0)=="-")return M(f(p.substring(1),v));if(0<=p.indexOf("-"))throw Error('number format error: interior "-" character');for(var S=c(Math.pow(v,8)),A=m,I=0;I<p.length;I+=8){var D=Math.min(8,p.length-I),w=parseInt(p.substring(I,I+D),v);8>D?(D=c(Math.pow(v,D)),A=A.j(D).add(c(w))):(A=A.j(S),A=A.add(c(w)))}return A}var m=u(0),g=u(1),y=u(16777216);t=s.prototype,t.m=function(){if(O(this))return-M(this).m();for(var p=0,v=1,S=0;S<this.g.length;S++){var A=this.i(S);p+=(0<=A?A:4294967296+A)*v,v*=4294967296}return p},t.toString=function(p){if(p=p||10,2>p||36<p)throw Error("radix out of range: "+p);if(C(this))return"0";if(O(this))return"-"+M(this).toString(p);for(var v=c(Math.pow(p,6)),S=this,A="";;){var I=N(S,v).g;S=T(S,I.j(v));var D=((0<S.g.length?S.g[0]:S.h)>>>0).toString(p);if(S=I,C(S))return D+A;for(;6>D.length;)D="0"+D;A=D+A}},t.i=function(p){return 0>p?0:p<this.g.length?this.g[p]:this.h};function C(p){if(p.h!=0)return!1;for(var v=0;v<p.g.length;v++)if(p.g[v]!=0)return!1;return!0}function O(p){return p.h==-1}t.l=function(p){return p=T(this,p),O(p)?-1:C(p)?0:1};function M(p){for(var v=p.g.length,S=[],A=0;A<v;A++)S[A]=~p.g[A];return new s(S,~p.h).add(g)}t.abs=function(){return O(this)?M(this):this},t.add=function(p){for(var v=Math.max(this.g.length,p.g.length),S=[],A=0,I=0;I<=v;I++){var D=A+(this.i(I)&65535)+(p.i(I)&65535),w=(D>>>16)+(this.i(I)>>>16)+(p.i(I)>>>16);A=w>>>16,D&=65535,w&=65535,S[I]=w<<16|D}return new s(S,S[S.length-1]&-2147483648?-1:0)};function T(p,v){return p.add(M(v))}t.j=function(p){if(C(this)||C(p))return m;if(O(this))return O(p)?M(this).j(M(p)):M(M(this).j(p));if(O(p))return M(this.j(M(p)));if(0>this.l(y)&&0>p.l(y))return c(this.m()*p.m());for(var v=this.g.length+p.g.length,S=[],A=0;A<2*v;A++)S[A]=0;for(A=0;A<this.g.length;A++)for(var I=0;I<p.g.length;I++){var D=this.i(A)>>>16,w=this.i(A)&65535,ze=p.i(I)>>>16,ft=p.i(I)&65535;S[2*A+2*I]+=w*ft,E(S,2*A+2*I),S[2*A+2*I+1]+=D*ft,E(S,2*A+2*I+1),S[2*A+2*I+1]+=w*ze,E(S,2*A+2*I+1),S[2*A+2*I+2]+=D*ze,E(S,2*A+2*I+2)}for(A=0;A<v;A++)S[A]=S[2*A+1]<<16|S[2*A];for(A=v;A<2*v;A++)S[A]=0;return new s(S,0)};function E(p,v){for(;(p[v]&65535)!=p[v];)p[v+1]+=p[v]>>>16,p[v]&=65535,v++}function b(p,v){this.g=p,this.h=v}function N(p,v){if(C(v))throw Error("division by zero");if(C(p))return new b(m,m);if(O(p))return v=N(M(p),v),new b(M(v.g),M(v.h));if(O(v))return v=N(p,M(v)),new b(M(v.g),v.h);if(30<p.g.length){if(O(p)||O(v))throw Error("slowDivide_ only works with positive integers.");for(var S=g,A=v;0>=A.l(p);)S=j(S),A=j(A);var I=q(S,1),D=q(A,1);for(A=q(A,2),S=q(S,2);!C(A);){var w=D.add(A);0>=w.l(p)&&(I=I.add(S),D=w),A=q(A,1),S=q(S,1)}return v=T(p,I.j(v)),new b(I,v)}for(I=m;0<=p.l(v);){for(S=Math.max(1,Math.floor(p.m()/v.m())),A=Math.ceil(Math.log(S)/Math.LN2),A=48>=A?1:Math.pow(2,A-48),D=c(S),w=D.j(v);O(w)||0<w.l(p);)S-=A,D=c(S),w=D.j(v);C(D)&&(D=g),I=I.add(D),p=T(p,w)}return new b(I,p)}t.A=function(p){return N(this,p).h},t.and=function(p){for(var v=Math.max(this.g.length,p.g.length),S=[],A=0;A<v;A++)S[A]=this.i(A)&p.i(A);return new s(S,this.h&p.h)},t.or=function(p){for(var v=Math.max(this.g.length,p.g.length),S=[],A=0;A<v;A++)S[A]=this.i(A)|p.i(A);return new s(S,this.h|p.h)},t.xor=function(p){for(var v=Math.max(this.g.length,p.g.length),S=[],A=0;A<v;A++)S[A]=this.i(A)^p.i(A);return new s(S,this.h^p.h)};function j(p){for(var v=p.g.length+1,S=[],A=0;A<v;A++)S[A]=p.i(A)<<1|p.i(A-1)>>>31;return new s(S,p.h)}function q(p,v){var S=v>>5;v%=32;for(var A=p.g.length-S,I=[],D=0;D<A;D++)I[D]=0<v?p.i(D+S)>>>v|p.i(D+S+1)<<32-v:p.i(D+S);return new s(I,p.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,aA=i,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=c,s.fromString=f,Dr=s}).apply(typeof p_<"u"?p_:typeof self<"u"?self:typeof window<"u"?window:{});var qu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var sA,jo,oA,cc,ym,lA,uA,cA;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(o,h,d){return o==Array.prototype||o==Object.prototype||(o[h]=d.value),o};function n(o){o=[typeof globalThis=="object"&&globalThis,o,typeof window=="object"&&window,typeof self=="object"&&self,typeof qu=="object"&&qu];for(var h=0;h<o.length;++h){var d=o[h];if(d&&d.Math==Math)return d}throw Error("Cannot find global object")}var i=n(this);function r(o,h){if(h)e:{var d=i;o=o.split(".");for(var _=0;_<o.length-1;_++){var V=o[_];if(!(V in d))break e;d=d[V]}o=o[o.length-1],_=d[o],h=h(_),h!=_&&h!=null&&e(d,o,{configurable:!0,writable:!0,value:h})}}function a(o,h){o instanceof String&&(o+="");var d=0,_=!1,V={next:function(){if(!_&&d<o.length){var L=d++;return{value:h(L,o[L]),done:!1}}return _=!0,{done:!0,value:void 0}}};return V[Symbol.iterator]=function(){return V},V}r("Array.prototype.values",function(o){return o||function(){return a(this,function(h,d){return d})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var s=s||{},l=this||self;function u(o){var h=typeof o;return h=h!="object"?h:o?Array.isArray(o)?"array":h:"null",h=="array"||h=="object"&&typeof o.length=="number"}function c(o){var h=typeof o;return h=="object"&&o!=null||h=="function"}function f(o,h,d){return o.call.apply(o.bind,arguments)}function m(o,h,d){if(!o)throw Error();if(2<arguments.length){var _=Array.prototype.slice.call(arguments,2);return function(){var V=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(V,_),o.apply(h,V)}}return function(){return o.apply(h,arguments)}}function g(o,h,d){return g=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?f:m,g.apply(null,arguments)}function y(o,h){var d=Array.prototype.slice.call(arguments,1);return function(){var _=d.slice();return _.push.apply(_,arguments),o.apply(this,_)}}function C(o,h){function d(){}d.prototype=h.prototype,o.aa=h.prototype,o.prototype=new d,o.prototype.constructor=o,o.Qb=function(_,V,L){for(var G=Array(arguments.length-2),Ue=2;Ue<arguments.length;Ue++)G[Ue-2]=arguments[Ue];return h.prototype[V].apply(_,G)}}function O(o){const h=o.length;if(0<h){const d=Array(h);for(let _=0;_<h;_++)d[_]=o[_];return d}return[]}function M(o,h){for(let d=1;d<arguments.length;d++){const _=arguments[d];if(u(_)){const V=o.length||0,L=_.length||0;o.length=V+L;for(let G=0;G<L;G++)o[V+G]=_[G]}else o.push(_)}}class T{constructor(h,d){this.i=h,this.j=d,this.h=0,this.g=null}get(){let h;return 0<this.h?(this.h--,h=this.g,this.g=h.next,h.next=null):h=this.i(),h}}function E(o){return/^[\s\xa0]*$/.test(o)}function b(){var o=l.navigator;return o&&(o=o.userAgent)?o:""}function N(o){return N[" "](o),o}N[" "]=function(){};var j=b().indexOf("Gecko")!=-1&&!(b().toLowerCase().indexOf("webkit")!=-1&&b().indexOf("Edge")==-1)&&!(b().indexOf("Trident")!=-1||b().indexOf("MSIE")!=-1)&&b().indexOf("Edge")==-1;function q(o,h,d){for(const _ in o)h.call(d,o[_],_,o)}function p(o,h){for(const d in o)h.call(void 0,o[d],d,o)}function v(o){const h={};for(const d in o)h[d]=o[d];return h}const S="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function A(o,h){let d,_;for(let V=1;V<arguments.length;V++){_=arguments[V];for(d in _)o[d]=_[d];for(let L=0;L<S.length;L++)d=S[L],Object.prototype.hasOwnProperty.call(_,d)&&(o[d]=_[d])}}function I(o){var h=1;o=o.split(":");const d=[];for(;0<h&&o.length;)d.push(o.shift()),h--;return o.length&&d.push(o.join(":")),d}function D(o){l.setTimeout(()=>{throw o},0)}function w(){var o=Ie;let h=null;return o.g&&(h=o.g,o.g=o.g.next,o.g||(o.h=null),h.next=null),h}class ze{constructor(){this.h=this.g=null}add(h,d){const _=ft.get();_.set(h,d),this.h?this.h.next=_:this.g=_,this.h=_}}var ft=new T(()=>new Q,o=>o.reset());class Q{constructor(){this.next=this.g=this.h=null}set(h,d){this.h=h,this.g=d,this.next=null}reset(){this.next=this.g=this.h=null}}let re,W=!1,Ie=new ze,Pe=()=>{const o=l.Promise.resolve(void 0);re=()=>{o.then(rn)}};var rn=()=>{for(var o;o=w();){try{o.h.call(o.g)}catch(d){D(d)}var h=ft;h.j(o),100>h.h&&(h.h++,o.next=h.g,h.g=o)}W=!1};function Ze(){this.s=this.s,this.C=this.C}Ze.prototype.s=!1,Ze.prototype.ma=function(){this.s||(this.s=!0,this.N())},Ze.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Le(o,h){this.type=o,this.g=this.target=h,this.defaultPrevented=!1}Le.prototype.h=function(){this.defaultPrevented=!0};var qt=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var o=!1,h=Object.defineProperty({},"passive",{get:function(){o=!0}});try{const d=()=>{};l.addEventListener("test",d,h),l.removeEventListener("test",d,h)}catch{}return o}();function et(o,h){if(Le.call(this,o?o.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,o){var d=this.type=o.type,_=o.changedTouches&&o.changedTouches.length?o.changedTouches[0]:null;if(this.target=o.target||o.srcElement,this.g=h,h=o.relatedTarget){if(j){e:{try{N(h.nodeName);var V=!0;break e}catch{}V=!1}V||(h=null)}}else d=="mouseover"?h=o.fromElement:d=="mouseout"&&(h=o.toElement);this.relatedTarget=h,_?(this.clientX=_.clientX!==void 0?_.clientX:_.pageX,this.clientY=_.clientY!==void 0?_.clientY:_.pageY,this.screenX=_.screenX||0,this.screenY=_.screenY||0):(this.clientX=o.clientX!==void 0?o.clientX:o.pageX,this.clientY=o.clientY!==void 0?o.clientY:o.pageY,this.screenX=o.screenX||0,this.screenY=o.screenY||0),this.button=o.button,this.key=o.key||"",this.ctrlKey=o.ctrlKey,this.altKey=o.altKey,this.shiftKey=o.shiftKey,this.metaKey=o.metaKey,this.pointerId=o.pointerId||0,this.pointerType=typeof o.pointerType=="string"?o.pointerType:hi[o.pointerType]||"",this.state=o.state,this.i=o,o.defaultPrevented&&et.aa.h.call(this)}}C(et,Le);var hi={2:"touch",3:"pen",4:"mouse"};et.prototype.h=function(){et.aa.h.call(this);var o=this.i;o.preventDefault?o.preventDefault():o.returnValue=!1};var En="closure_listenable_"+(1e6*Math.random()|0),xa=0;function lf(o,h,d,_,V){this.listener=o,this.proxy=null,this.src=h,this.type=d,this.capture=!!_,this.ha=V,this.key=++xa,this.da=this.fa=!1}function Va(o){o.da=!0,o.listener=null,o.proxy=null,o.src=null,o.ha=null}function Pa(o){this.src=o,this.g={},this.h=0}Pa.prototype.add=function(o,h,d,_,V){var L=o.toString();o=this.g[L],o||(o=this.g[L]=[],this.h++);var G=qn(o,h,_,V);return-1<G?(h=o[G],d||(h.fa=!1)):(h=new lf(h,this.src,L,!!_,V),h.fa=d,o.push(h)),h};function dt(o,h){var d=h.type;if(d in o.g){var _=o.g[d],V=Array.prototype.indexOf.call(_,h,void 0),L;(L=0<=V)&&Array.prototype.splice.call(_,V,1),L&&(Va(h),o.g[d].length==0&&(delete o.g[d],o.h--))}}function qn(o,h,d,_){for(var V=0;V<o.length;++V){var L=o[V];if(!L.da&&L.listener==h&&L.capture==!!d&&L.ha==_)return V}return-1}var La="closure_lm_"+(1e6*Math.random()|0),oo={};function Gn(o,h,d,_,V){if(Array.isArray(h)){for(var L=0;L<h.length;L++)Gn(o,h[L],d,_,V);return null}return d=Ki(d),o&&o[En]?o.K(h,d,c(_)?!!_.capture:!1,V):uf(o,h,d,!1,_,V)}function uf(o,h,d,_,V,L){if(!h)throw Error("Invalid event type");var G=c(V)?!!V.capture:!!V,Ue=co(o);if(Ue||(o[La]=Ue=new Pa(o)),d=Ue.add(h,d,_,G,L),d.proxy)return d;if(_=cf(),d.proxy=_,_.src=o,_.listener=d,o.addEventListener)qt||(V=G),V===void 0&&(V=!1),o.addEventListener(h.toString(),_,V);else if(o.attachEvent)o.attachEvent(hu(h.toString()),_);else if(o.addListener&&o.removeListener)o.addListener(_);else throw Error("addEventListener and attachEvent are unavailable.");return d}function cf(){function o(d){return h.call(o.src,o.listener,d)}const h=hf;return o}function lo(o,h,d,_,V){if(Array.isArray(h))for(var L=0;L<h.length;L++)lo(o,h[L],d,_,V);else _=c(_)?!!_.capture:!!_,d=Ki(d),o&&o[En]?(o=o.i,h=String(h).toString(),h in o.g&&(L=o.g[h],d=qn(L,d,_,V),-1<d&&(Va(L[d]),Array.prototype.splice.call(L,d,1),L.length==0&&(delete o.g[h],o.h--)))):o&&(o=co(o))&&(h=o.g[h.toString()],o=-1,h&&(o=qn(h,d,_,V)),(d=-1<o?h[o]:null)&&uo(d))}function uo(o){if(typeof o!="number"&&o&&!o.da){var h=o.src;if(h&&h[En])dt(h.i,o);else{var d=o.type,_=o.proxy;h.removeEventListener?h.removeEventListener(d,_,o.capture):h.detachEvent?h.detachEvent(hu(d),_):h.addListener&&h.removeListener&&h.removeListener(_),(d=co(h))?(dt(d,o),d.h==0&&(d.src=null,h[La]=null)):Va(o)}}}function hu(o){return o in oo?oo[o]:oo[o]="on"+o}function hf(o,h){if(o.da)o=!0;else{h=new et(h,this);var d=o.listener,_=o.ha||o.src;o.fa&&uo(o),o=d.call(_,h)}return o}function co(o){return o=o[La],o instanceof Pa?o:null}var Mn="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ki(o){return typeof o=="function"?o:(o[Mn]||(o[Mn]=function(h){return o.handleEvent(h)}),o[Mn])}function mt(){Ze.call(this),this.i=new Pa(this),this.M=this,this.F=null}C(mt,Ze),mt.prototype[En]=!0,mt.prototype.removeEventListener=function(o,h,d,_){lo(this,o,h,d,_)};function gt(o,h){var d,_=o.F;if(_)for(d=[];_;_=_.F)d.push(_);if(o=o.M,_=h.type||h,typeof h=="string")h=new Le(h,o);else if(h instanceof Le)h.target=h.target||o;else{var V=h;h=new Le(_,o),A(h,V)}if(V=!0,d)for(var L=d.length-1;0<=L;L--){var G=h.g=d[L];V=an(G,_,!0,h)&&V}if(G=h.g=o,V=an(G,_,!0,h)&&V,V=an(G,_,!1,h)&&V,d)for(L=0;L<d.length;L++)G=h.g=d[L],V=an(G,_,!1,h)&&V}mt.prototype.N=function(){if(mt.aa.N.call(this),this.i){var o=this.i,h;for(h in o.g){for(var d=o.g[h],_=0;_<d.length;_++)Va(d[_]);delete o.g[h],o.h--}}this.F=null},mt.prototype.K=function(o,h,d,_){return this.i.add(String(o),h,!1,d,_)},mt.prototype.L=function(o,h,d,_){return this.i.add(String(o),h,!0,d,_)};function an(o,h,d,_){if(h=o.i.g[String(h)],!h)return!0;h=h.concat();for(var V=!0,L=0;L<h.length;++L){var G=h[L];if(G&&!G.da&&G.capture==d){var Ue=G.listener,Ct=G.ha||G.src;G.fa&&dt(o.i,G),V=Ue.call(Ct,_)!==!1&&V}}return V&&!_.defaultPrevented}function Tn(o,h,d){if(typeof o=="function")d&&(o=g(o,d));else if(o&&typeof o.handleEvent=="function")o=g(o.handleEvent,o);else throw Error("Invalid listener argument");return 2147483647<Number(h)?-1:l.setTimeout(o,h||0)}function ho(o){o.g=Tn(()=>{o.g=null,o.i&&(o.i=!1,ho(o))},o.l);const h=o.h;o.h=null,o.m.apply(null,h)}class Ua extends Ze{constructor(h,d){super(),this.m=h,this.l=d,this.h=null,this.i=!1,this.g=null}j(h){this.h=arguments,this.g?this.i=!0:ho(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Kr(o){Ze.call(this),this.h=o,this.g={}}C(Kr,Ze);var xn=[];function fo(o){q(o.g,function(h,d){this.g.hasOwnProperty(d)&&uo(h)},o),o.g={}}Kr.prototype.N=function(){Kr.aa.N.call(this),fo(this)},Kr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ka=l.JSON.stringify,fu=l.JSON.parse,ff=class{stringify(o){return l.JSON.stringify(o,void 0)}parse(o){return l.JSON.parse(o,void 0)}};function za(){}za.prototype.h=null;function Qr(o){return o.h||(o.h=o.i())}function mo(){}var fi={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Yr(){Le.call(this,"d")}C(Yr,Le);function go(){Le.call(this,"c")}C(go,Le);var Kn={},du=null;function Xr(){return du=du||new mt}Kn.La="serverreachability";function $r(o){Le.call(this,Kn.La,o)}C($r,Le);function Qn(o){const h=Xr();gt(h,new $r(h))}Kn.STAT_EVENT="statevent";function mu(o,h){Le.call(this,Kn.STAT_EVENT,o),this.stat=h}C(mu,Le);function It(o){const h=Xr();gt(h,new mu(h,o))}Kn.Ma="timingevent";function R(o,h){Le.call(this,Kn.Ma,o),this.size=h}C(R,Le);function x(o,h){if(typeof o!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){o()},h)}function P(){this.g=!0}P.prototype.xa=function(){this.g=!1};function H(o,h,d,_,V,L){o.info(function(){if(o.g)if(L)for(var G="",Ue=L.split("&"),Ct=0;Ct<Ue.length;Ct++){var be=Ue[Ct].split("=");if(1<be.length){var Pt=be[0];be=be[1];var Lt=Pt.split("_");G=2<=Lt.length&&Lt[1]=="type"?G+(Pt+"="+be+"&"):G+(Pt+"=redacted&")}}else G=null;else G=L;return"XMLHTTP REQ ("+_+") [attempt "+V+"]: "+h+`
`+d+`
`+G})}function K(o,h,d,_,V,L,G){o.info(function(){return"XMLHTTP RESP ("+_+") [ attempt "+V+"]: "+h+`
`+d+`
`+L+" "+G})}function J(o,h,d,_){o.info(function(){return"XMLHTTP TEXT ("+h+"): "+Z(o,d)+(_?" "+_:"")})}function ae(o,h){o.info(function(){return"TIMEOUT: "+h})}P.prototype.info=function(){};function Z(o,h){if(!o.g)return h;if(!h)return null;try{var d=JSON.parse(h);if(d){for(o=0;o<d.length;o++)if(Array.isArray(d[o])){var _=d[o];if(!(2>_.length)){var V=_[1];if(Array.isArray(V)&&!(1>V.length)){var L=V[0];if(L!="noop"&&L!="stop"&&L!="close")for(var G=1;G<V.length;G++)V[G]=""}}}}return ka(d)}catch{return h}}var $={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},X={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},ee;function le(){}C(le,za),le.prototype.g=function(){return new XMLHttpRequest},le.prototype.i=function(){return{}},ee=new le;function he(o,h,d,_){this.j=o,this.i=h,this.l=d,this.R=_||1,this.U=new Kr(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new ot}function ot(){this.i=null,this.g="",this.h=!1}var De={},Ee={};function je(o,h,d){o.L=1,o.v=vu(pi(h)),o.m=d,o.P=!0,di(o,null)}function di(o,h){o.F=Date.now(),Gt(o),o.A=pi(o.v);var d=o.A,_=o.R;Array.isArray(_)||(_=[String(_)]),Qp(d.i,"t",_),o.C=0,d=o.j.J,o.h=new ot,o.g=hy(o.j,d?h:null,!o.m),0<o.O&&(o.M=new Ua(g(o.Y,o,o.g),o.O)),h=o.U,d=o.g,_=o.ca;var V="readystatechange";Array.isArray(V)||(V&&(xn[0]=V.toString()),V=xn);for(var L=0;L<V.length;L++){var G=Gn(d,V[L],_||h.handleEvent,!1,h.h||h);if(!G)break;h.g[G.key]=G}h=o.H?v(o.H):{},o.m?(o.u||(o.u="POST"),h["Content-Type"]="application/x-www-form-urlencoded",o.g.ea(o.A,o.u,o.m,h)):(o.u="GET",o.g.ea(o.A,o.u,null,h)),Qn(),H(o.i,o.u,o.A,o.l,o.R,o.m)}he.prototype.ca=function(o){o=o.target;const h=this.M;h&&yi(o)==3?h.j():this.Y(o)},he.prototype.Y=function(o){try{if(o==this.g)e:{const Lt=yi(this.g);var h=this.g.Ba();const Fa=this.g.Z();if(!(3>Lt)&&(Lt!=3||this.g&&(this.h.h||this.g.oa()||ey(this.g)))){this.J||Lt!=4||h==7||(h==8||0>=Fa?Qn(3):Qn(2)),mi(this);var d=this.g.Z();this.X=d;t:if(Qi(this)){var _=ey(this.g);o="";var V=_.length,L=yi(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Sn(this),sn(this);var G="";break t}this.h.i=new l.TextDecoder}for(h=0;h<V;h++)this.h.h=!0,o+=this.h.i.decode(_[h],{stream:!(L&&h==V-1)});_.length=0,this.h.g+=o,this.C=0,G=this.h.g}else G=this.g.oa();if(this.o=d==200,K(this.i,this.u,this.A,this.l,this.R,Lt,d),this.o){if(this.T&&!this.K){t:{if(this.g){var Ue,Ct=this.g;if((Ue=Ct.g?Ct.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!E(Ue)){var be=Ue;break t}}be=null}if(d=be)J(this.i,this.l,d,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Yi(this,d);else{this.o=!1,this.s=3,It(12),Sn(this),sn(this);break e}}if(this.P){d=!0;let Pn;for(;!this.J&&this.C<G.length;)if(Pn=Vn(this,G),Pn==Ee){Lt==4&&(this.s=4,It(14),d=!1),J(this.i,this.l,null,"[Incomplete Response]");break}else if(Pn==De){this.s=4,It(15),J(this.i,this.l,G,"[Invalid Chunk]"),d=!1;break}else J(this.i,this.l,Pn,null),Yi(this,Pn);if(Qi(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Lt!=4||G.length!=0||this.h.h||(this.s=1,It(16),d=!1),this.o=this.o&&d,!d)J(this.i,this.l,G,"[Invalid Chunked Response]"),Sn(this),sn(this);else if(0<G.length&&!this.W){this.W=!0;var Pt=this.j;Pt.g==this&&Pt.ba&&!Pt.M&&(Pt.j.info("Great, no buffering proxy detected. Bytes received: "+G.length),pf(Pt),Pt.M=!0,It(11))}}else J(this.i,this.l,G,null),Yi(this,G);Lt==4&&Sn(this),this.o&&!this.J&&(Lt==4?oy(this.j,this):(this.o=!1,Gt(this)))}else Nw(this.g),d==400&&0<G.indexOf("Unknown SID")?(this.s=3,It(12)):(this.s=0,It(13)),Sn(this),sn(this)}}}catch{}finally{}};function Qi(o){return o.g?o.u=="GET"&&o.L!=2&&o.j.Ca:!1}function Vn(o,h){var d=o.C,_=h.indexOf(`
`,d);return _==-1?Ee:(d=Number(h.substring(d,_)),isNaN(d)?De:(_+=1,_+d>h.length?Ee:(h=h.slice(_,_+d),o.C=_+d,h)))}he.prototype.cancel=function(){this.J=!0,Sn(this)};function Gt(o){o.S=Date.now()+o.I,ja(o,o.I)}function ja(o,h){if(o.B!=null)throw Error("WatchDog timer not null");o.B=x(g(o.ba,o),h)}function mi(o){o.B&&(l.clearTimeout(o.B),o.B=null)}he.prototype.ba=function(){this.B=null;const o=Date.now();0<=o-this.S?(ae(this.i,this.A),this.L!=2&&(Qn(),It(17)),Sn(this),this.s=2,sn(this)):ja(this,this.S-o)};function sn(o){o.j.G==0||o.J||oy(o.j,o)}function Sn(o){mi(o);var h=o.M;h&&typeof h.ma=="function"&&h.ma(),o.M=null,fo(o.U),o.g&&(h=o.g,o.g=null,h.abort(),h.ma())}function Yi(o,h){try{var d=o.j;if(d.G!=0&&(d.g==o||Ge(d.h,o))){if(!o.K&&Ge(d.h,o)&&d.G==3){try{var _=d.Da.g.parse(h)}catch{_=null}if(Array.isArray(_)&&_.length==3){var V=_;if(V[0]==0){e:if(!d.u){if(d.g)if(d.g.F+3e3<o.F)bu(d),Su(d);else break e;gf(d),It(18)}}else d.za=V[1],0<d.za-d.T&&37500>V[2]&&d.F&&d.v==0&&!d.C&&(d.C=x(g(d.Za,d),6e3));if(1>=Xi(d.h)&&d.ca){try{d.ca()}catch{}d.ca=void 0}}else Wr(d,11)}else if((o.K||d.g==o)&&bu(d),!E(h))for(V=d.Da.g.parse(h),h=0;h<V.length;h++){let be=V[h];if(d.T=be[0],be=be[1],d.G==2)if(be[0]=="c"){d.K=be[1],d.ia=be[2];const Pt=be[3];Pt!=null&&(d.la=Pt,d.j.info("VER="+d.la));const Lt=be[4];Lt!=null&&(d.Aa=Lt,d.j.info("SVER="+d.Aa));const Fa=be[5];Fa!=null&&typeof Fa=="number"&&0<Fa&&(_=1.5*Fa,d.L=_,d.j.info("backChannelRequestTimeoutMs_="+_)),_=d;const Pn=o.g;if(Pn){const Ru=Pn.g?Pn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ru){var L=_.h;L.g||Ru.indexOf("spdy")==-1&&Ru.indexOf("quic")==-1&&Ru.indexOf("h2")==-1||(L.j=L.l,L.g=new Set,L.h&&(Yn(L,L.h),L.h=null))}if(_.D){const yf=Pn.g?Pn.g.getResponseHeader("X-HTTP-Session-Id"):null;yf&&(_.ya=yf,Fe(_.I,_.D,yf))}}d.G=3,d.l&&d.l.ua(),d.ba&&(d.R=Date.now()-o.F,d.j.info("Handshake RTT: "+d.R+"ms")),_=d;var G=o;if(_.qa=cy(_,_.J?_.ia:null,_.W),G.K){po(_.h,G);var Ue=G,Ct=_.L;Ct&&(Ue.I=Ct),Ue.B&&(mi(Ue),Gt(Ue)),_.g=G}else ay(_);0<d.i.length&&Au(d)}else be[0]!="stop"&&be[0]!="close"||Wr(d,7);else d.G==3&&(be[0]=="stop"||be[0]=="close"?be[0]=="stop"?Wr(d,7):mf(d):be[0]!="noop"&&d.l&&d.l.ta(be),d.v=0)}}Qn(4)}catch{}}var Te=class{constructor(o,h){this.g=o,this.map=h}};function He(o){this.l=o||10,l.PerformanceNavigationTiming?(o=l.performance.getEntriesByType("navigation"),o=0<o.length&&(o[0].nextHopProtocol=="hq"||o[0].nextHopProtocol=="h2")):o=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=o?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function gi(o){return o.h?!0:o.g?o.g.size>=o.j:!1}function Xi(o){return o.h?1:o.g?o.g.size:0}function Ge(o,h){return o.h?o.h==h:o.g?o.g.has(h):!1}function Yn(o,h){o.g?o.g.add(h):o.h=h}function po(o,h){o.h&&o.h==h?o.h=null:o.g&&o.g.has(h)&&o.g.delete(h)}He.prototype.cancel=function(){if(this.i=gu(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const o of this.g.values())o.cancel();this.g.clear()}};function gu(o){if(o.h!=null)return o.i.concat(o.h.D);if(o.g!=null&&o.g.size!==0){let h=o.i;for(const d of o.g.values())h=h.concat(d.D);return h}return O(o.i)}function pw(o){if(o.V&&typeof o.V=="function")return o.V();if(typeof Map<"u"&&o instanceof Map||typeof Set<"u"&&o instanceof Set)return Array.from(o.values());if(typeof o=="string")return o.split("");if(u(o)){for(var h=[],d=o.length,_=0;_<d;_++)h.push(o[_]);return h}h=[],d=0;for(_ in o)h[d++]=o[_];return h}function yw(o){if(o.na&&typeof o.na=="function")return o.na();if(!o.V||typeof o.V!="function"){if(typeof Map<"u"&&o instanceof Map)return Array.from(o.keys());if(!(typeof Set<"u"&&o instanceof Set)){if(u(o)||typeof o=="string"){var h=[];o=o.length;for(var d=0;d<o;d++)h.push(d);return h}h=[],d=0;for(const _ in o)h[d++]=_;return h}}}function Bp(o,h){if(o.forEach&&typeof o.forEach=="function")o.forEach(h,void 0);else if(u(o)||typeof o=="string")Array.prototype.forEach.call(o,h,void 0);else for(var d=yw(o),_=pw(o),V=_.length,L=0;L<V;L++)h.call(void 0,_[L],d&&d[L],o)}var Hp=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function vw(o,h){if(o){o=o.split("&");for(var d=0;d<o.length;d++){var _=o[d].indexOf("="),V=null;if(0<=_){var L=o[d].substring(0,_);V=o[d].substring(_+1)}else L=o[d];h(L,V?decodeURIComponent(V.replace(/\+/g," ")):"")}}}function Zr(o){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,o instanceof Zr){this.h=o.h,pu(this,o.j),this.o=o.o,this.g=o.g,yu(this,o.s),this.l=o.l;var h=o.i,d=new _o;d.i=h.i,h.g&&(d.g=new Map(h.g),d.h=h.h),Fp(this,d),this.m=o.m}else o&&(h=String(o).match(Hp))?(this.h=!1,pu(this,h[1]||"",!0),this.o=yo(h[2]||""),this.g=yo(h[3]||"",!0),yu(this,h[4]),this.l=yo(h[5]||"",!0),Fp(this,h[6]||"",!0),this.m=yo(h[7]||"")):(this.h=!1,this.i=new _o(null,this.h))}Zr.prototype.toString=function(){var o=[],h=this.j;h&&o.push(vo(h,qp,!0),":");var d=this.g;return(d||h=="file")&&(o.push("//"),(h=this.o)&&o.push(vo(h,qp,!0),"@"),o.push(encodeURIComponent(String(d)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d=this.s,d!=null&&o.push(":",String(d))),(d=this.l)&&(this.g&&d.charAt(0)!="/"&&o.push("/"),o.push(vo(d,d.charAt(0)=="/"?Tw:Ew,!0))),(d=this.i.toString())&&o.push("?",d),(d=this.m)&&o.push("#",vo(d,Aw)),o.join("")};function pi(o){return new Zr(o)}function pu(o,h,d){o.j=d?yo(h,!0):h,o.j&&(o.j=o.j.replace(/:$/,""))}function yu(o,h){if(h){if(h=Number(h),isNaN(h)||0>h)throw Error("Bad port number "+h);o.s=h}else o.s=null}function Fp(o,h,d){h instanceof _o?(o.i=h,bw(o.i,o.h)):(d||(h=vo(h,Sw)),o.i=new _o(h,o.h))}function Fe(o,h,d){o.i.set(h,d)}function vu(o){return Fe(o,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),o}function yo(o,h){return o?h?decodeURI(o.replace(/%25/g,"%2525")):decodeURIComponent(o):""}function vo(o,h,d){return typeof o=="string"?(o=encodeURI(o).replace(h,_w),d&&(o=o.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),o):null}function _w(o){return o=o.charCodeAt(0),"%"+(o>>4&15).toString(16)+(o&15).toString(16)}var qp=/[#\/\?@]/g,Ew=/[#\?:]/g,Tw=/[#\?]/g,Sw=/[#\?@]/g,Aw=/#/g;function _o(o,h){this.h=this.g=null,this.i=o||null,this.j=!!h}function $i(o){o.g||(o.g=new Map,o.h=0,o.i&&vw(o.i,function(h,d){o.add(decodeURIComponent(h.replace(/\+/g," ")),d)}))}t=_o.prototype,t.add=function(o,h){$i(this),this.i=null,o=Ba(this,o);var d=this.g.get(o);return d||this.g.set(o,d=[]),d.push(h),this.h+=1,this};function Gp(o,h){$i(o),h=Ba(o,h),o.g.has(h)&&(o.i=null,o.h-=o.g.get(h).length,o.g.delete(h))}function Kp(o,h){return $i(o),h=Ba(o,h),o.g.has(h)}t.forEach=function(o,h){$i(this),this.g.forEach(function(d,_){d.forEach(function(V){o.call(h,V,_,this)},this)},this)},t.na=function(){$i(this);const o=Array.from(this.g.values()),h=Array.from(this.g.keys()),d=[];for(let _=0;_<h.length;_++){const V=o[_];for(let L=0;L<V.length;L++)d.push(h[_])}return d},t.V=function(o){$i(this);let h=[];if(typeof o=="string")Kp(this,o)&&(h=h.concat(this.g.get(Ba(this,o))));else{o=Array.from(this.g.values());for(let d=0;d<o.length;d++)h=h.concat(o[d])}return h},t.set=function(o,h){return $i(this),this.i=null,o=Ba(this,o),Kp(this,o)&&(this.h-=this.g.get(o).length),this.g.set(o,[h]),this.h+=1,this},t.get=function(o,h){return o?(o=this.V(o),0<o.length?String(o[0]):h):h};function Qp(o,h,d){Gp(o,h),0<d.length&&(o.i=null,o.g.set(Ba(o,h),O(d)),o.h+=d.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const o=[],h=Array.from(this.g.keys());for(var d=0;d<h.length;d++){var _=h[d];const L=encodeURIComponent(String(_)),G=this.V(_);for(_=0;_<G.length;_++){var V=L;G[_]!==""&&(V+="="+encodeURIComponent(String(G[_]))),o.push(V)}}return this.i=o.join("&")};function Ba(o,h){return h=String(h),o.j&&(h=h.toLowerCase()),h}function bw(o,h){h&&!o.j&&($i(o),o.i=null,o.g.forEach(function(d,_){var V=_.toLowerCase();_!=V&&(Gp(this,_),Qp(this,V,d))},o)),o.j=h}function ww(o,h){const d=new P;if(l.Image){const _=new Image;_.onload=y(Zi,d,"TestLoadImage: loaded",!0,h,_),_.onerror=y(Zi,d,"TestLoadImage: error",!1,h,_),_.onabort=y(Zi,d,"TestLoadImage: abort",!1,h,_),_.ontimeout=y(Zi,d,"TestLoadImage: timeout",!1,h,_),l.setTimeout(function(){_.ontimeout&&_.ontimeout()},1e4),_.src=o}else h(!1)}function Rw(o,h){const d=new P,_=new AbortController,V=setTimeout(()=>{_.abort(),Zi(d,"TestPingServer: timeout",!1,h)},1e4);fetch(o,{signal:_.signal}).then(L=>{clearTimeout(V),L.ok?Zi(d,"TestPingServer: ok",!0,h):Zi(d,"TestPingServer: server error",!1,h)}).catch(()=>{clearTimeout(V),Zi(d,"TestPingServer: error",!1,h)})}function Zi(o,h,d,_,V){try{V&&(V.onload=null,V.onerror=null,V.onabort=null,V.ontimeout=null),_(d)}catch{}}function Iw(){this.g=new ff}function Cw(o,h,d){const _=d||"";try{Bp(o,function(V,L){let G=V;c(V)&&(G=ka(V)),h.push(_+L+"="+encodeURIComponent(G))})}catch(V){throw h.push(_+"type="+encodeURIComponent("_badmap")),V}}function _u(o){this.l=o.Ub||null,this.j=o.eb||!1}C(_u,za),_u.prototype.g=function(){return new Eu(this.l,this.j)},_u.prototype.i=function(o){return function(){return o}}({});function Eu(o,h){mt.call(this),this.D=o,this.o=h,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}C(Eu,mt),t=Eu.prototype,t.open=function(o,h){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=o,this.A=h,this.readyState=1,To(this)},t.send=function(o){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const h={headers:this.u,method:this.B,credentials:this.m,cache:void 0};o&&(h.body=o),(this.D||l).fetch(new Request(this.A,h)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Eo(this)),this.readyState=0},t.Sa=function(o){if(this.g&&(this.l=o,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=o.headers,this.readyState=2,To(this)),this.g&&(this.readyState=3,To(this),this.g)))if(this.responseType==="arraybuffer")o.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in o){if(this.j=o.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Yp(this)}else o.text().then(this.Ra.bind(this),this.ga.bind(this))};function Yp(o){o.j.read().then(o.Pa.bind(o)).catch(o.ga.bind(o))}t.Pa=function(o){if(this.g){if(this.o&&o.value)this.response.push(o.value);else if(!this.o){var h=o.value?o.value:new Uint8Array(0);(h=this.v.decode(h,{stream:!o.done}))&&(this.response=this.responseText+=h)}o.done?Eo(this):To(this),this.readyState==3&&Yp(this)}},t.Ra=function(o){this.g&&(this.response=this.responseText=o,Eo(this))},t.Qa=function(o){this.g&&(this.response=o,Eo(this))},t.ga=function(){this.g&&Eo(this)};function Eo(o){o.readyState=4,o.l=null,o.j=null,o.v=null,To(o)}t.setRequestHeader=function(o,h){this.u.append(o,h)},t.getResponseHeader=function(o){return this.h&&this.h.get(o.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const o=[],h=this.h.entries();for(var d=h.next();!d.done;)d=d.value,o.push(d[0]+": "+d[1]),d=h.next();return o.join(`\r
`)};function To(o){o.onreadystatechange&&o.onreadystatechange.call(o)}Object.defineProperty(Eu.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(o){this.m=o?"include":"same-origin"}});function Xp(o){let h="";return q(o,function(d,_){h+=_,h+=":",h+=d,h+=`\r
`}),h}function df(o,h,d){e:{for(_ in d){var _=!1;break e}_=!0}_||(d=Xp(d),typeof o=="string"?d!=null&&encodeURIComponent(String(d)):Fe(o,h,d))}function tt(o){mt.call(this),this.headers=new Map,this.o=o||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}C(tt,mt);var Dw=/^https?$/i,Ow=["POST","PUT"];t=tt.prototype,t.Ha=function(o){this.J=o},t.ea=function(o,h,d,_){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+o);h=h?h.toUpperCase():"GET",this.D=o,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():ee.g(),this.v=this.o?Qr(this.o):Qr(ee),this.g.onreadystatechange=g(this.Ea,this);try{this.B=!0,this.g.open(h,String(o),!0),this.B=!1}catch(L){$p(this,L);return}if(o=d||"",d=new Map(this.headers),_)if(Object.getPrototypeOf(_)===Object.prototype)for(var V in _)d.set(V,_[V]);else if(typeof _.keys=="function"&&typeof _.get=="function")for(const L of _.keys())d.set(L,_.get(L));else throw Error("Unknown input type for opt_headers: "+String(_));_=Array.from(d.keys()).find(L=>L.toLowerCase()=="content-type"),V=l.FormData&&o instanceof l.FormData,!(0<=Array.prototype.indexOf.call(Ow,h,void 0))||_||V||d.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[L,G]of d)this.g.setRequestHeader(L,G);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Jp(this),this.u=!0,this.g.send(o),this.u=!1}catch(L){$p(this,L)}};function $p(o,h){o.h=!1,o.g&&(o.j=!0,o.g.abort(),o.j=!1),o.l=h,o.m=5,Zp(o),Tu(o)}function Zp(o){o.A||(o.A=!0,gt(o,"complete"),gt(o,"error"))}t.abort=function(o){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=o||7,gt(this,"complete"),gt(this,"abort"),Tu(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Tu(this,!0)),tt.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Wp(this):this.bb())},t.bb=function(){Wp(this)};function Wp(o){if(o.h&&typeof s<"u"&&(!o.v[1]||yi(o)!=4||o.Z()!=2)){if(o.u&&yi(o)==4)Tn(o.Ea,0,o);else if(gt(o,"readystatechange"),yi(o)==4){o.h=!1;try{const G=o.Z();e:switch(G){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var h=!0;break e;default:h=!1}var d;if(!(d=h)){var _;if(_=G===0){var V=String(o.D).match(Hp)[1]||null;!V&&l.self&&l.self.location&&(V=l.self.location.protocol.slice(0,-1)),_=!Dw.test(V?V.toLowerCase():"")}d=_}if(d)gt(o,"complete"),gt(o,"success");else{o.m=6;try{var L=2<yi(o)?o.g.statusText:""}catch{L=""}o.l=L+" ["+o.Z()+"]",Zp(o)}}finally{Tu(o)}}}}function Tu(o,h){if(o.g){Jp(o);const d=o.g,_=o.v[0]?()=>{}:null;o.g=null,o.v=null,h||gt(o,"ready");try{d.onreadystatechange=_}catch{}}}function Jp(o){o.I&&(l.clearTimeout(o.I),o.I=null)}t.isActive=function(){return!!this.g};function yi(o){return o.g?o.g.readyState:0}t.Z=function(){try{return 2<yi(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(o){if(this.g){var h=this.g.responseText;return o&&h.indexOf(o)==0&&(h=h.substring(o.length)),fu(h)}};function ey(o){try{if(!o.g)return null;if("response"in o.g)return o.g.response;switch(o.H){case"":case"text":return o.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in o.g)return o.g.mozResponseArrayBuffer}return null}catch{return null}}function Nw(o){const h={};o=(o.g&&2<=yi(o)&&o.g.getAllResponseHeaders()||"").split(`\r
`);for(let _=0;_<o.length;_++){if(E(o[_]))continue;var d=I(o[_]);const V=d[0];if(d=d[1],typeof d!="string")continue;d=d.trim();const L=h[V]||[];h[V]=L,L.push(d)}p(h,function(_){return _.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function So(o,h,d){return d&&d.internalChannelParams&&d.internalChannelParams[o]||h}function ty(o){this.Aa=0,this.i=[],this.j=new P,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=So("failFast",!1,o),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=So("baseRetryDelayMs",5e3,o),this.cb=So("retryDelaySeedMs",1e4,o),this.Wa=So("forwardChannelMaxRetries",2,o),this.wa=So("forwardChannelRequestTimeoutMs",2e4,o),this.pa=o&&o.xmlHttpFactory||void 0,this.Xa=o&&o.Tb||void 0,this.Ca=o&&o.useFetchStreams||!1,this.L=void 0,this.J=o&&o.supportsCrossDomainXhr||!1,this.K="",this.h=new He(o&&o.concurrentRequestLimit),this.Da=new Iw,this.P=o&&o.fastHandshake||!1,this.O=o&&o.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=o&&o.Rb||!1,o&&o.xa&&this.j.xa(),o&&o.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&o&&o.detectBufferingProxy||!1,this.ja=void 0,o&&o.longPollingTimeout&&0<o.longPollingTimeout&&(this.ja=o.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=ty.prototype,t.la=8,t.G=1,t.connect=function(o,h,d,_){It(0),this.W=o,this.H=h||{},d&&_!==void 0&&(this.H.OSID=d,this.H.OAID=_),this.F=this.X,this.I=cy(this,null,this.W),Au(this)};function mf(o){if(ny(o),o.G==3){var h=o.U++,d=pi(o.I);if(Fe(d,"SID",o.K),Fe(d,"RID",h),Fe(d,"TYPE","terminate"),Ao(o,d),h=new he(o,o.j,h),h.L=2,h.v=vu(pi(d)),d=!1,l.navigator&&l.navigator.sendBeacon)try{d=l.navigator.sendBeacon(h.v.toString(),"")}catch{}!d&&l.Image&&(new Image().src=h.v,d=!0),d||(h.g=hy(h.j,null),h.g.ea(h.v)),h.F=Date.now(),Gt(h)}uy(o)}function Su(o){o.g&&(pf(o),o.g.cancel(),o.g=null)}function ny(o){Su(o),o.u&&(l.clearTimeout(o.u),o.u=null),bu(o),o.h.cancel(),o.s&&(typeof o.s=="number"&&l.clearTimeout(o.s),o.s=null)}function Au(o){if(!gi(o.h)&&!o.s){o.s=!0;var h=o.Ga;re||Pe(),W||(re(),W=!0),Ie.add(h,o),o.B=0}}function Mw(o,h){return Xi(o.h)>=o.h.j-(o.s?1:0)?!1:o.s?(o.i=h.D.concat(o.i),!0):o.G==1||o.G==2||o.B>=(o.Va?0:o.Wa)?!1:(o.s=x(g(o.Ga,o,h),ly(o,o.B)),o.B++,!0)}t.Ga=function(o){if(this.s)if(this.s=null,this.G==1){if(!o){this.U=Math.floor(1e5*Math.random()),o=this.U++;const V=new he(this,this.j,o);let L=this.o;if(this.S&&(L?(L=v(L),A(L,this.S)):L=this.S),this.m!==null||this.O||(V.H=L,L=null),this.P)e:{for(var h=0,d=0;d<this.i.length;d++){t:{var _=this.i[d];if("__data__"in _.map&&(_=_.map.__data__,typeof _=="string")){_=_.length;break t}_=void 0}if(_===void 0)break;if(h+=_,4096<h){h=d;break e}if(h===4096||d===this.i.length-1){h=d+1;break e}}h=1e3}else h=1e3;h=ry(this,V,h),d=pi(this.I),Fe(d,"RID",o),Fe(d,"CVER",22),this.D&&Fe(d,"X-HTTP-Session-Id",this.D),Ao(this,d),L&&(this.O?h="headers="+encodeURIComponent(String(Xp(L)))+"&"+h:this.m&&df(d,this.m,L)),Yn(this.h,V),this.Ua&&Fe(d,"TYPE","init"),this.P?(Fe(d,"$req",h),Fe(d,"SID","null"),V.T=!0,je(V,d,null)):je(V,d,h),this.G=2}}else this.G==3&&(o?iy(this,o):this.i.length==0||gi(this.h)||iy(this))};function iy(o,h){var d;h?d=h.l:d=o.U++;const _=pi(o.I);Fe(_,"SID",o.K),Fe(_,"RID",d),Fe(_,"AID",o.T),Ao(o,_),o.m&&o.o&&df(_,o.m,o.o),d=new he(o,o.j,d,o.B+1),o.m===null&&(d.H=o.o),h&&(o.i=h.D.concat(o.i)),h=ry(o,d,1e3),d.I=Math.round(.5*o.wa)+Math.round(.5*o.wa*Math.random()),Yn(o.h,d),je(d,_,h)}function Ao(o,h){o.H&&q(o.H,function(d,_){Fe(h,_,d)}),o.l&&Bp({},function(d,_){Fe(h,_,d)})}function ry(o,h,d){d=Math.min(o.i.length,d);var _=o.l?g(o.l.Na,o.l,o):null;e:{var V=o.i;let L=-1;for(;;){const G=["count="+d];L==-1?0<d?(L=V[0].g,G.push("ofs="+L)):L=0:G.push("ofs="+L);let Ue=!0;for(let Ct=0;Ct<d;Ct++){let be=V[Ct].g;const Pt=V[Ct].map;if(be-=L,0>be)L=Math.max(0,V[Ct].g-100),Ue=!1;else try{Cw(Pt,G,"req"+be+"_")}catch{_&&_(Pt)}}if(Ue){_=G.join("&");break e}}}return o=o.i.splice(0,d),h.D=o,_}function ay(o){if(!o.g&&!o.u){o.Y=1;var h=o.Fa;re||Pe(),W||(re(),W=!0),Ie.add(h,o),o.v=0}}function gf(o){return o.g||o.u||3<=o.v?!1:(o.Y++,o.u=x(g(o.Fa,o),ly(o,o.v)),o.v++,!0)}t.Fa=function(){if(this.u=null,sy(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var o=2*this.R;this.j.info("BP detection timer enabled: "+o),this.A=x(g(this.ab,this),o)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,It(10),Su(this),sy(this))};function pf(o){o.A!=null&&(l.clearTimeout(o.A),o.A=null)}function sy(o){o.g=new he(o,o.j,"rpc",o.Y),o.m===null&&(o.g.H=o.o),o.g.O=0;var h=pi(o.qa);Fe(h,"RID","rpc"),Fe(h,"SID",o.K),Fe(h,"AID",o.T),Fe(h,"CI",o.F?"0":"1"),!o.F&&o.ja&&Fe(h,"TO",o.ja),Fe(h,"TYPE","xmlhttp"),Ao(o,h),o.m&&o.o&&df(h,o.m,o.o),o.L&&(o.g.I=o.L);var d=o.g;o=o.ia,d.L=1,d.v=vu(pi(h)),d.m=null,d.P=!0,di(d,o)}t.Za=function(){this.C!=null&&(this.C=null,Su(this),gf(this),It(19))};function bu(o){o.C!=null&&(l.clearTimeout(o.C),o.C=null)}function oy(o,h){var d=null;if(o.g==h){bu(o),pf(o),o.g=null;var _=2}else if(Ge(o.h,h))d=h.D,po(o.h,h),_=1;else return;if(o.G!=0){if(h.o)if(_==1){d=h.m?h.m.length:0,h=Date.now()-h.F;var V=o.B;_=Xr(),gt(_,new R(_,d)),Au(o)}else ay(o);else if(V=h.s,V==3||V==0&&0<h.X||!(_==1&&Mw(o,h)||_==2&&gf(o)))switch(d&&0<d.length&&(h=o.h,h.i=h.i.concat(d)),V){case 1:Wr(o,5);break;case 4:Wr(o,10);break;case 3:Wr(o,6);break;default:Wr(o,2)}}}function ly(o,h){let d=o.Ta+Math.floor(Math.random()*o.cb);return o.isActive()||(d*=2),d*h}function Wr(o,h){if(o.j.info("Error code "+h),h==2){var d=g(o.fb,o),_=o.Xa;const V=!_;_=new Zr(_||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||pu(_,"https"),vu(_),V?ww(_.toString(),d):Rw(_.toString(),d)}else It(2);o.G=0,o.l&&o.l.sa(h),uy(o),ny(o)}t.fb=function(o){o?(this.j.info("Successfully pinged google.com"),It(2)):(this.j.info("Failed to ping google.com"),It(1))};function uy(o){if(o.G=0,o.ka=[],o.l){const h=gu(o.h);(h.length!=0||o.i.length!=0)&&(M(o.ka,h),M(o.ka,o.i),o.h.i.length=0,O(o.i),o.i.length=0),o.l.ra()}}function cy(o,h,d){var _=d instanceof Zr?pi(d):new Zr(d);if(_.g!="")h&&(_.g=h+"."+_.g),yu(_,_.s);else{var V=l.location;_=V.protocol,h=h?h+"."+V.hostname:V.hostname,V=+V.port;var L=new Zr(null);_&&pu(L,_),h&&(L.g=h),V&&yu(L,V),d&&(L.l=d),_=L}return d=o.D,h=o.ya,d&&h&&Fe(_,d,h),Fe(_,"VER",o.la),Ao(o,_),_}function hy(o,h,d){if(h&&!o.J)throw Error("Can't create secondary domain capable XhrIo object.");return h=o.Ca&&!o.pa?new tt(new _u({eb:d})):new tt(o.pa),h.Ha(o.J),h}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function fy(){}t=fy.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function wu(){}wu.prototype.g=function(o,h){return new on(o,h)};function on(o,h){mt.call(this),this.g=new ty(h),this.l=o,this.h=h&&h.messageUrlParams||null,o=h&&h.messageHeaders||null,h&&h.clientProtocolHeaderRequired&&(o?o["X-Client-Protocol"]="webchannel":o={"X-Client-Protocol":"webchannel"}),this.g.o=o,o=h&&h.initMessageHeaders||null,h&&h.messageContentType&&(o?o["X-WebChannel-Content-Type"]=h.messageContentType:o={"X-WebChannel-Content-Type":h.messageContentType}),h&&h.va&&(o?o["X-WebChannel-Client-Profile"]=h.va:o={"X-WebChannel-Client-Profile":h.va}),this.g.S=o,(o=h&&h.Sb)&&!E(o)&&(this.g.m=o),this.v=h&&h.supportsCrossDomainXhr||!1,this.u=h&&h.sendRawJson||!1,(h=h&&h.httpSessionIdParam)&&!E(h)&&(this.g.D=h,o=this.h,o!==null&&h in o&&(o=this.h,h in o&&delete o[h])),this.j=new Ha(this)}C(on,mt),on.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},on.prototype.close=function(){mf(this.g)},on.prototype.o=function(o){var h=this.g;if(typeof o=="string"){var d={};d.__data__=o,o=d}else this.u&&(d={},d.__data__=ka(o),o=d);h.i.push(new Te(h.Ya++,o)),h.G==3&&Au(h)},on.prototype.N=function(){this.g.l=null,delete this.j,mf(this.g),delete this.g,on.aa.N.call(this)};function dy(o){Yr.call(this),o.__headers__&&(this.headers=o.__headers__,this.statusCode=o.__status__,delete o.__headers__,delete o.__status__);var h=o.__sm__;if(h){e:{for(const d in h){o=d;break e}o=void 0}(this.i=o)&&(o=this.i,h=h!==null&&o in h?h[o]:void 0),this.data=h}else this.data=o}C(dy,Yr);function my(){go.call(this),this.status=1}C(my,go);function Ha(o){this.g=o}C(Ha,fy),Ha.prototype.ua=function(){gt(this.g,"a")},Ha.prototype.ta=function(o){gt(this.g,new dy(o))},Ha.prototype.sa=function(o){gt(this.g,new my)},Ha.prototype.ra=function(){gt(this.g,"b")},wu.prototype.createWebChannel=wu.prototype.g,on.prototype.send=on.prototype.o,on.prototype.open=on.prototype.m,on.prototype.close=on.prototype.close,cA=function(){return new wu},uA=function(){return Xr()},lA=Kn,ym={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},$.NO_ERROR=0,$.TIMEOUT=8,$.HTTP_ERROR=6,cc=$,X.COMPLETE="complete",oA=X,mo.EventType=fi,fi.OPEN="a",fi.CLOSE="b",fi.ERROR="c",fi.MESSAGE="d",mt.prototype.listen=mt.prototype.K,jo=mo,tt.prototype.listenOnce=tt.prototype.L,tt.prototype.getLastError=tt.prototype.Ka,tt.prototype.getLastErrorCode=tt.prototype.Ba,tt.prototype.getStatus=tt.prototype.Z,tt.prototype.getResponseJson=tt.prototype.Oa,tt.prototype.getResponseText=tt.prototype.oa,tt.prototype.send=tt.prototype.ea,tt.prototype.setWithCredentials=tt.prototype.Ha,sA=tt}).apply(typeof qu<"u"?qu:typeof self<"u"?self:typeof window<"u"?window:{});const y_="@firebase/firestore",v_="4.7.11";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}kt.UNAUTHENTICATED=new kt(null),kt.GOOGLE_CREDENTIALS=new kt("google-credentials-uid"),kt.FIRST_PARTY=new kt("first-party-uid"),kt.MOCK_USER=new kt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let to="11.6.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ba=new Gg("@firebase/firestore");function Za(){return ba.logLevel}function Y(t,...e){if(ba.logLevel<=ve.DEBUG){const n=e.map(Yg);ba.debug(`Firestore (${to}): ${t}`,...n)}}function zi(t,...e){if(ba.logLevel<=ve.ERROR){const n=e.map(Yg);ba.error(`Firestore (${to}): ${t}`,...n)}}function zs(t,...e){if(ba.logLevel<=ve.WARN){const n=e.map(Yg);ba.warn(`Firestore (${to}): ${t}`,...n)}}function Yg(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ie(t,e,n){let i="Unexpected state";typeof e=="string"?i=e:n=e,hA(t,i,n)}function hA(t,e,n){let i=`FIRESTORE (${to}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{i+=" CONTEXT: "+JSON.stringify(n)}catch{i+=" CONTEXT: "+n}throw zi(i),new Error(i)}function Ce(t,e,n,i){let r="Unexpected state";typeof n=="string"?r=n:i=n,t||hA(e,r,i)}function ce(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class te extends Gi{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mi{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fA{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class iO{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(kt.UNAUTHENTICATED))}shutdown(){}}class rO{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class aO{constructor(e){this.t=e,this.currentUser=kt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Ce(this.o===void 0,42304);let i=this.i;const r=u=>this.i!==i?(i=this.i,n(u)):Promise.resolve();let a=new Mi;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new Mi,e.enqueueRetryable(()=>r(this.currentUser))};const s=()=>{const u=a;e.enqueueRetryable(async()=>{await u.promise,await r(this.currentUser)})},l=u=>{Y("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(u=>l(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?l(u):(Y("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new Mi)}},0),s()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(i=>this.i!==e?(Y("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Ce(typeof i.accessToken=="string",31837,{l:i}),new fA(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ce(e===null||typeof e=="string",2055,{h:e}),new kt(e)}}class sO{constructor(e,n,i){this.P=e,this.T=n,this.I=i,this.type="FirstParty",this.user=kt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class oO{constructor(e,n,i){this.P=e,this.T=n,this.I=i}getToken(){return Promise.resolve(new sO(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(kt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class __{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class lO{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,kn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Ce(this.o===void 0,3512);const i=a=>{a.error!=null&&Y("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const s=a.token!==this.m;return this.m=a.token,Y("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?n(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>i(a))};const r=a=>{Y("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(a=>r(a)),setTimeout(()=>{if(!this.appCheck){const a=this.V.getImmediate({optional:!0});a?r(a):Y("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new __(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Ce(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new __(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uO(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let i=0;i<t;i++)n[i]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dA(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mA{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const r=uO(40);for(let a=0;a<r.length;++a)i.length<20&&r[a]<n&&(i+=e.charAt(r[a]%62))}return i}}function de(t,e){return t<e?-1:t>e?1:0}function vm(t,e){let n=0;for(;n<t.length&&n<e.length;){const i=t.codePointAt(n),r=e.codePointAt(n);if(i!==r){if(i<128&&r<128)return de(i,r);{const a=dA(),s=cO(a.encode(E_(t,n)),a.encode(E_(e,n)));return s!==0?s:de(i,r)}}n+=i>65535?2:1}return de(t.length,e.length)}function E_(t,e){return t.codePointAt(e)>65535?t.substring(e,e+2):t.substring(e,e+1)}function cO(t,e){for(let n=0;n<t.length&&n<e.length;++n)if(t[n]!==e[n])return de(t[n],e[n]);return de(t.length,e.length)}function js(t,e,n){return t.length===e.length&&t.every((i,r)=>n(i,e[r]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T_=-62135596800,S_=1e6;class _t{static now(){return _t.fromMillis(Date.now())}static fromDate(e){return _t.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),i=Math.floor((e-1e3*n)*S_);return new _t(n,i)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new te(F.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new te(F.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<T_)throw new te(F.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new te(F.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/S_}_compareTo(e){return this.seconds===e.seconds?de(this.nanoseconds,e.nanoseconds):de(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-T_;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ue{static fromTimestamp(e){return new ue(e)}static min(){return new ue(new _t(0,0))}static max(){return new ue(new _t(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A_="__name__";class $n{constructor(e,n,i){n===void 0?n=0:n>e.length&&ie(637,{offset:n,range:e.length}),i===void 0?i=e.length-n:i>e.length-n&&ie(1746,{length:i,range:e.length-n}),this.segments=e,this.offset=n,this.len=i}get length(){return this.len}isEqual(e){return $n.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof $n?e.forEach(i=>{n.push(i)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,i=this.limit();n<i;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const i=Math.min(e.length,n.length);for(let r=0;r<i;r++){const a=$n.compareSegments(e.get(r),n.get(r));if(a!==0)return a}return de(e.length,n.length)}static compareSegments(e,n){const i=$n.isNumericId(e),r=$n.isNumericId(n);return i&&!r?-1:!i&&r?1:i&&r?$n.extractNumericId(e).compare($n.extractNumericId(n)):vm(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Dr.fromString(e.substring(4,e.length-2))}}class Ye extends $n{construct(e,n,i){return new Ye(e,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const i of e){if(i.indexOf("//")>=0)throw new te(F.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter(r=>r.length>0))}return new Ye(n)}static emptyPath(){return new Ye([])}}const hO=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Mt extends $n{construct(e,n,i){return new Mt(e,n,i)}static isValidIdentifier(e){return hO.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Mt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===A_}static keyField(){return new Mt([A_])}static fromServerFormat(e){const n=[];let i="",r=0;const a=()=>{if(i.length===0)throw new te(F.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""};let s=!1;for(;r<e.length;){const l=e[r];if(l==="\\"){if(r+1===e.length)throw new te(F.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[r+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new te(F.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=u,r+=2}else l==="`"?(s=!s,r++):l!=="."||s?(i+=l,r++):(a(),r++)}if(a(),s)throw new te(F.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Mt(n)}static emptyPath(){return new Mt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ne{constructor(e){this.path=e}static fromPath(e){return new ne(Ye.fromString(e))}static fromName(e){return new ne(Ye.fromString(e).popFirst(5))}static empty(){return new ne(Ye.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ye.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Ye.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ne(new Ye(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Il=-1;function fO(t,e){const n=t.toTimestamp().seconds,i=t.toTimestamp().nanoseconds+1,r=ue.fromTimestamp(i===1e9?new _t(n+1,0):new _t(n,i));return new Vr(r,ne.empty(),e)}function dO(t){return new Vr(t.readTime,t.key,Il)}class Vr{constructor(e,n,i){this.readTime=e,this.documentKey=n,this.largestBatchId=i}static min(){return new Vr(ue.min(),ne.empty(),Il)}static max(){return new Vr(ue.max(),ne.empty(),Il)}}function mO(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=ne.comparator(t.documentKey,e.documentKey),n!==0?n:de(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gO="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class pO{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function no(t){if(t.code!==F.FAILED_PRECONDITION||t.message!==gO)throw t;Y("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ie(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new k((i,r)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(i,r)},this.catchCallback=a=>{this.wrapFailure(n,a).next(i,r)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof k?n:k.resolve(n)}catch(n){return k.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):k.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):k.reject(n)}static resolve(e){return new k((n,i)=>{n(e)})}static reject(e){return new k((n,i)=>{i(e)})}static waitFor(e){return new k((n,i)=>{let r=0,a=0,s=!1;e.forEach(l=>{++r,l.next(()=>{++a,s&&a===r&&n()},u=>i(u))}),s=!0,a===r&&n()})}static or(e){let n=k.resolve(!1);for(const i of e)n=n.next(r=>r?k.resolve(r):i());return n}static forEach(e,n){const i=[];return e.forEach((r,a)=>{i.push(n.call(this,r,a))}),this.waitFor(i)}static mapArray(e,n){return new k((i,r)=>{const a=e.length,s=new Array(a);let l=0;for(let u=0;u<a;u++){const c=u;n(e[c]).next(f=>{s[c]=f,++l,l===a&&i(s)},f=>r(f))}})}static doWhile(e,n){return new k((i,r)=>{const a=()=>{e()===!0?n().next(()=>{a()},r):i()};a()})}}function yO(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function io(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bh{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=i=>this.ue(i),this.ce=i=>n.writeSequenceNumber(i))}ue(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ce&&this.ce(e),e}}Bh.le=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xg=-1;function Hh(t){return t==null}function nh(t){return t===0&&1/t==-1/0}function vO(t){return typeof t=="number"&&Number.isInteger(t)&&!nh(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gA="";function _O(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=b_(e)),e=EO(t.get(n),e);return b_(e)}function EO(t,e){let n=e;const i=t.length;for(let r=0;r<i;r++){const a=t.charAt(r);switch(a){case"\0":n+="";break;case gA:n+="";break;default:n+=a}}return n}function b_(t){return t+gA+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w_(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function qr(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function pA(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Je{constructor(e,n){this.comparator=e,this.root=n||Ot.EMPTY}insert(e,n){return new Je(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Ot.BLACK,null,null))}remove(e){return new Je(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ot.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(e){let n=0,i=this.root;for(;!i.isEmpty();){const r=this.comparator(e,i.key);if(r===0)return n+i.left.size;r<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,i)=>(e(n,i),!1))}toString(){const e=[];return this.inorderTraversal((n,i)=>(e.push(`${n}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Gu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Gu(this.root,e,this.comparator,!1)}getReverseIterator(){return new Gu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Gu(this.root,e,this.comparator,!0)}}class Gu{constructor(e,n,i,r){this.isReverse=r,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=n?i(e.key,n):1,n&&r&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ot{constructor(e,n,i,r,a){this.key=e,this.value=n,this.color=i??Ot.RED,this.left=r??Ot.EMPTY,this.right=a??Ot.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,i,r,a){return new Ot(e??this.key,n??this.value,i??this.color,r??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let r=this;const a=i(e,r.key);return r=a<0?r.copy(null,null,null,r.left.insert(e,n,i),null):a===0?r.copy(null,n,null,null,null):r.copy(null,null,null,null,r.right.insert(e,n,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Ot.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let i,r=this;if(n(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),n(e,r.key)===0){if(r.right.isEmpty())return Ot.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ot.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ot.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ie(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ie(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw ie(27949);return e+(this.isRed()?0:1)}}Ot.EMPTY=null,Ot.RED=!0,Ot.BLACK=!1;Ot.EMPTY=new class{constructor(){this.size=0}get key(){throw ie(57766)}get value(){throw ie(16141)}get color(){throw ie(16727)}get left(){throw ie(29726)}get right(){throw ie(36894)}copy(e,n,i,r,a){return this}insert(e,n,i){return new Ot(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Et{constructor(e){this.comparator=e,this.data=new Je(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,i)=>(e(n),!1))}forEachInRange(e,n){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const r=i.getNext();if(this.comparator(r.key,e[1])>=0)return;n(r.key)}}forEachWhile(e,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new R_(this.data.getIterator())}getIteratorFrom(e){return new R_(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(i=>{n=n.add(i)}),n}isEqual(e){if(!(e instanceof Et)||this.size!==e.size)return!1;const n=this.data.getIterator(),i=e.data.getIterator();for(;n.hasNext();){const r=n.getNext().key,a=i.getNext().key;if(this.comparator(r,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Et(this.comparator);return n.data=e,n}}class R_{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dn{constructor(e){this.fields=e,e.sort(Mt.comparator)}static empty(){return new dn([])}unionWith(e){let n=new Et(Mt.comparator);for(const i of this.fields)n=n.add(i);for(const i of e)n=n.add(i);return new dn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return js(this.fields,e.fields,(n,i)=>n.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yA extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(r){try{return atob(r)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new yA("Invalid base64 string: "+a):a}}(e);return new Vt(n)}static fromUint8Array(e){const n=function(r){let a="";for(let s=0;s<r.length;++s)a+=String.fromCharCode(r[s]);return a}(e);return new Vt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const i=new Uint8Array(n.length);for(let r=0;r<n.length;r++)i[r]=n.charCodeAt(r);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return de(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Vt.EMPTY_BYTE_STRING=new Vt("");const TO=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Pr(t){if(Ce(!!t,39018),typeof t=="string"){let e=0;const n=TO.exec(t);if(Ce(!!n,46558,{timestamp:t}),n[1]){let r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}const i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:st(t.seconds),nanos:st(t.nanos)}}function st(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Lr(t){return typeof t=="string"?Vt.fromBase64String(t):Vt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vA="server_timestamp",_A="__type__",EA="__previous_value__",TA="__local_write_time__";function $g(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[_A])===null||n===void 0?void 0:n.stringValue)===vA}function Fh(t){const e=t.mapValue.fields[EA];return $g(e)?Fh(e):e}function Cl(t){const e=Pr(t.mapValue.fields[TA].timestampValue);return new _t(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SO{constructor(e,n,i,r,a,s,l,u,c){this.databaseId=e,this.appId=n,this.persistenceKey=i,this.host=r,this.ssl=a,this.forceLongPolling=s,this.autoDetectLongPolling=l,this.longPollingOptions=u,this.useFetchStreams=c}}const ih="(default)";class Dl{constructor(e,n){this.projectId=e,this.database=n||ih}static empty(){return new Dl("","")}get isDefaultDatabase(){return this.database===ih}isEqual(e){return e instanceof Dl&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SA="__type__",AO="__max__",Ku={mapValue:{}},AA="__vector__",rh="value";function Ur(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?$g(t)?4:wO(t)?9007199254740991:bO(t)?10:11:ie(28295,{value:t})}function si(t,e){if(t===e)return!0;const n=Ur(t);if(n!==Ur(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Cl(t).isEqual(Cl(e));case 3:return function(r,a){if(typeof r.timestampValue=="string"&&typeof a.timestampValue=="string"&&r.timestampValue.length===a.timestampValue.length)return r.timestampValue===a.timestampValue;const s=Pr(r.timestampValue),l=Pr(a.timestampValue);return s.seconds===l.seconds&&s.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(r,a){return Lr(r.bytesValue).isEqual(Lr(a.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(r,a){return st(r.geoPointValue.latitude)===st(a.geoPointValue.latitude)&&st(r.geoPointValue.longitude)===st(a.geoPointValue.longitude)}(t,e);case 2:return function(r,a){if("integerValue"in r&&"integerValue"in a)return st(r.integerValue)===st(a.integerValue);if("doubleValue"in r&&"doubleValue"in a){const s=st(r.doubleValue),l=st(a.doubleValue);return s===l?nh(s)===nh(l):isNaN(s)&&isNaN(l)}return!1}(t,e);case 9:return js(t.arrayValue.values||[],e.arrayValue.values||[],si);case 10:case 11:return function(r,a){const s=r.mapValue.fields||{},l=a.mapValue.fields||{};if(w_(s)!==w_(l))return!1;for(const u in s)if(s.hasOwnProperty(u)&&(l[u]===void 0||!si(s[u],l[u])))return!1;return!0}(t,e);default:return ie(52216,{left:t})}}function Ol(t,e){return(t.values||[]).find(n=>si(n,e))!==void 0}function Bs(t,e){if(t===e)return 0;const n=Ur(t),i=Ur(e);if(n!==i)return de(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return de(t.booleanValue,e.booleanValue);case 2:return function(a,s){const l=st(a.integerValue||a.doubleValue),u=st(s.integerValue||s.doubleValue);return l<u?-1:l>u?1:l===u?0:isNaN(l)?isNaN(u)?0:-1:1}(t,e);case 3:return I_(t.timestampValue,e.timestampValue);case 4:return I_(Cl(t),Cl(e));case 5:return vm(t.stringValue,e.stringValue);case 6:return function(a,s){const l=Lr(a),u=Lr(s);return l.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(a,s){const l=a.split("/"),u=s.split("/");for(let c=0;c<l.length&&c<u.length;c++){const f=de(l[c],u[c]);if(f!==0)return f}return de(l.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(a,s){const l=de(st(a.latitude),st(s.latitude));return l!==0?l:de(st(a.longitude),st(s.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return C_(t.arrayValue,e.arrayValue);case 10:return function(a,s){var l,u,c,f;const m=a.fields||{},g=s.fields||{},y=(l=m[rh])===null||l===void 0?void 0:l.arrayValue,C=(u=g[rh])===null||u===void 0?void 0:u.arrayValue,O=de(((c=y==null?void 0:y.values)===null||c===void 0?void 0:c.length)||0,((f=C==null?void 0:C.values)===null||f===void 0?void 0:f.length)||0);return O!==0?O:C_(y,C)}(t.mapValue,e.mapValue);case 11:return function(a,s){if(a===Ku.mapValue&&s===Ku.mapValue)return 0;if(a===Ku.mapValue)return 1;if(s===Ku.mapValue)return-1;const l=a.fields||{},u=Object.keys(l),c=s.fields||{},f=Object.keys(c);u.sort(),f.sort();for(let m=0;m<u.length&&m<f.length;++m){const g=vm(u[m],f[m]);if(g!==0)return g;const y=Bs(l[u[m]],c[f[m]]);if(y!==0)return y}return de(u.length,f.length)}(t.mapValue,e.mapValue);default:throw ie(23264,{Pe:n})}}function I_(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return de(t,e);const n=Pr(t),i=Pr(e),r=de(n.seconds,i.seconds);return r!==0?r:de(n.nanos,i.nanos)}function C_(t,e){const n=t.values||[],i=e.values||[];for(let r=0;r<n.length&&r<i.length;++r){const a=Bs(n[r],i[r]);if(a)return a}return de(n.length,i.length)}function Hs(t){return _m(t)}function _m(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const i=Pr(n);return`time(${i.seconds},${i.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Lr(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return ne.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let i="[",r=!0;for(const a of n.values||[])r?r=!1:i+=",",i+=_m(a);return i+"]"}(t.arrayValue):"mapValue"in t?function(n){const i=Object.keys(n.fields||{}).sort();let r="{",a=!0;for(const s of i)a?a=!1:r+=",",r+=`${s}:${_m(n.fields[s])}`;return r+"}"}(t.mapValue):ie(61005,{value:t})}function hc(t){switch(Ur(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Fh(t);return e?16+hc(e):16;case 5:return 2*t.stringValue.length;case 6:return Lr(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(i){return(i.values||[]).reduce((r,a)=>r+hc(a),0)}(t.arrayValue);case 10:case 11:return function(i){let r=0;return qr(i.fields,(a,s)=>{r+=a.length+hc(s)}),r}(t.mapValue);default:throw ie(13486,{value:t})}}function Em(t){return!!t&&"integerValue"in t}function Zg(t){return!!t&&"arrayValue"in t}function D_(t){return!!t&&"nullValue"in t}function O_(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function fc(t){return!!t&&"mapValue"in t}function bO(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[SA])===null||n===void 0?void 0:n.stringValue)===AA}function al(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return qr(t.mapValue.fields,(n,i)=>e.mapValue.fields[n]=al(i)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=al(t.arrayValue.values[n]);return e}return Object.assign({},t)}function wO(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===AO}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class en{constructor(e){this.value=e}static empty(){return new en({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let i=0;i<e.length-1;++i)if(n=(n.mapValue.fields||{})[e.get(i)],!fc(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=al(n)}setAll(e){let n=Mt.emptyPath(),i={},r=[];e.forEach((s,l)=>{if(!n.isImmediateParentOf(l)){const u=this.getFieldsMap(n);this.applyChanges(u,i,r),i={},r=[],n=l.popLast()}s?i[l.lastSegment()]=al(s):r.push(l.lastSegment())});const a=this.getFieldsMap(n);this.applyChanges(a,i,r)}delete(e){const n=this.field(e.popLast());fc(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return si(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<e.length;++i){let r=n.mapValue.fields[e.get(i)];fc(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},n.mapValue.fields[e.get(i)]=r),n=r}return n.mapValue.fields}applyChanges(e,n,i){qr(n,(r,a)=>e[r]=a);for(const r of i)delete e[r]}clone(){return new en(al(this.value))}}function bA(t){const e=[];return qr(t.fields,(n,i)=>{const r=new Mt([n]);if(fc(i)){const a=bA(i.mapValue).fields;if(a.length===0)e.push(r);else for(const s of a)e.push(r.child(s))}else e.push(r)}),new dn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zt{constructor(e,n,i,r,a,s,l){this.key=e,this.documentType=n,this.version=i,this.readTime=r,this.createTime=a,this.data=s,this.documentState=l}static newInvalidDocument(e){return new zt(e,0,ue.min(),ue.min(),ue.min(),en.empty(),0)}static newFoundDocument(e,n,i,r){return new zt(e,1,n,ue.min(),i,r,0)}static newNoDocument(e,n){return new zt(e,2,n,ue.min(),ue.min(),en.empty(),0)}static newUnknownDocument(e,n){return new zt(e,3,n,ue.min(),ue.min(),en.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ue.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=en.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=en.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ue.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof zt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new zt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ah{constructor(e,n){this.position=e,this.inclusive=n}}function N_(t,e,n){let i=0;for(let r=0;r<t.position.length;r++){const a=e[r],s=t.position[r];if(a.field.isKeyField()?i=ne.comparator(ne.fromName(s.referenceValue),n.key):i=Bs(s,n.data.field(a.field)),a.dir==="desc"&&(i*=-1),i!==0)break}return i}function M_(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!si(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sh{constructor(e,n="asc"){this.field=e,this.dir=n}}function RO(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wA{}class vt extends wA{constructor(e,n,i){super(),this.field=e,this.op=n,this.value=i}static create(e,n,i){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,i):new CO(e,n,i):n==="array-contains"?new NO(e,i):n==="in"?new MO(e,i):n==="not-in"?new xO(e,i):n==="array-contains-any"?new VO(e,i):new vt(e,n,i)}static createKeyFieldInFilter(e,n,i){return n==="in"?new DO(e,i):new OO(e,i)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Bs(n,this.value)):n!==null&&Ur(this.value)===Ur(n)&&this.matchesComparison(Bs(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ie(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class oi extends wA{constructor(e,n){super(),this.filters=e,this.op=n,this.Te=null}static create(e,n){return new oi(e,n)}matches(e){return RA(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Te!==null||(this.Te=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Te}getFilters(){return Object.assign([],this.filters)}}function RA(t){return t.op==="and"}function IA(t){return IO(t)&&RA(t)}function IO(t){for(const e of t.filters)if(e instanceof oi)return!1;return!0}function Tm(t){if(t instanceof vt)return t.field.canonicalString()+t.op.toString()+Hs(t.value);if(IA(t))return t.filters.map(e=>Tm(e)).join(",");{const e=t.filters.map(n=>Tm(n)).join(",");return`${t.op}(${e})`}}function CA(t,e){return t instanceof vt?function(i,r){return r instanceof vt&&i.op===r.op&&i.field.isEqual(r.field)&&si(i.value,r.value)}(t,e):t instanceof oi?function(i,r){return r instanceof oi&&i.op===r.op&&i.filters.length===r.filters.length?i.filters.reduce((a,s,l)=>a&&CA(s,r.filters[l]),!0):!1}(t,e):void ie(19439)}function DA(t){return t instanceof vt?function(n){return`${n.field.canonicalString()} ${n.op} ${Hs(n.value)}`}(t):t instanceof oi?function(n){return n.op.toString()+" {"+n.getFilters().map(DA).join(" ,")+"}"}(t):"Filter"}class CO extends vt{constructor(e,n,i){super(e,n,i),this.key=ne.fromName(i.referenceValue)}matches(e){const n=ne.comparator(e.key,this.key);return this.matchesComparison(n)}}class DO extends vt{constructor(e,n){super(e,"in",n),this.keys=OA("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class OO extends vt{constructor(e,n){super(e,"not-in",n),this.keys=OA("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function OA(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(i=>ne.fromName(i.referenceValue))}class NO extends vt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Zg(n)&&Ol(n.arrayValue,this.value)}}class MO extends vt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Ol(this.value.arrayValue,n)}}class xO extends vt{constructor(e,n){super(e,"not-in",n)}matches(e){if(Ol(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Ol(this.value.arrayValue,n)}}class VO extends vt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Zg(n)||!n.arrayValue.values)&&n.arrayValue.values.some(i=>Ol(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PO{constructor(e,n=null,i=[],r=[],a=null,s=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=i,this.filters=r,this.limit=a,this.startAt=s,this.endAt=l,this.Ie=null}}function x_(t,e=null,n=[],i=[],r=null,a=null,s=null){return new PO(t,e,n,i,r,a,s)}function Wg(t){const e=ce(t);if(e.Ie===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(i=>Tm(i)).join(","),n+="|ob:",n+=e.orderBy.map(i=>function(a){return a.field.canonicalString()+a.dir}(i)).join(","),Hh(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(i=>Hs(i)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(i=>Hs(i)).join(",")),e.Ie=n}return e.Ie}function Jg(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!RO(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!CA(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!M_(t.startAt,e.startAt)&&M_(t.endAt,e.endAt)}function Sm(t){return ne.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qh{constructor(e,n=null,i=[],r=[],a=null,s="F",l=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=r,this.limit=a,this.limitType=s,this.startAt=l,this.endAt=u,this.Ee=null,this.de=null,this.Ae=null,this.startAt,this.endAt}}function LO(t,e,n,i,r,a,s,l){return new qh(t,e,n,i,r,a,s,l)}function ep(t){return new qh(t)}function V_(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function UO(t){return t.collectionGroup!==null}function sl(t){const e=ce(t);if(e.Ee===null){e.Ee=[];const n=new Set;for(const a of e.explicitOrderBy)e.Ee.push(a),n.add(a.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let l=new Et(Mt.comparator);return s.filters.forEach(u=>{u.getFlattenedFilters().forEach(c=>{c.isInequality()&&(l=l.add(c.field))})}),l})(e).forEach(a=>{n.has(a.canonicalString())||a.isKeyField()||e.Ee.push(new sh(a,i))}),n.has(Mt.keyField().canonicalString())||e.Ee.push(new sh(Mt.keyField(),i))}return e.Ee}function ii(t){const e=ce(t);return e.de||(e.de=kO(e,sl(t))),e.de}function kO(t,e){if(t.limitType==="F")return x_(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(r=>{const a=r.dir==="desc"?"asc":"desc";return new sh(r.field,a)});const n=t.endAt?new ah(t.endAt.position,t.endAt.inclusive):null,i=t.startAt?new ah(t.startAt.position,t.startAt.inclusive):null;return x_(t.path,t.collectionGroup,e,t.filters,t.limit,n,i)}}function Am(t,e,n){return new qh(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Gh(t,e){return Jg(ii(t),ii(e))&&t.limitType===e.limitType}function NA(t){return`${Wg(ii(t))}|lt:${t.limitType}`}function Wa(t){return`Query(target=${function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map(r=>DA(r)).join(", ")}]`),Hh(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map(r=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(r)).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map(r=>Hs(r)).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map(r=>Hs(r)).join(",")),`Target(${i})`}(ii(t))}; limitType=${t.limitType})`}function Kh(t,e){return e.isFoundDocument()&&function(i,r){const a=r.key.path;return i.collectionGroup!==null?r.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(a):ne.isDocumentKey(i.path)?i.path.isEqual(a):i.path.isImmediateParentOf(a)}(t,e)&&function(i,r){for(const a of sl(i))if(!a.field.isKeyField()&&r.data.field(a.field)===null)return!1;return!0}(t,e)&&function(i,r){for(const a of i.filters)if(!a.matches(r))return!1;return!0}(t,e)&&function(i,r){return!(i.startAt&&!function(s,l,u){const c=N_(s,l,u);return s.inclusive?c<=0:c<0}(i.startAt,sl(i),r)||i.endAt&&!function(s,l,u){const c=N_(s,l,u);return s.inclusive?c>=0:c>0}(i.endAt,sl(i),r))}(t,e)}function zO(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function MA(t){return(e,n)=>{let i=!1;for(const r of sl(t)){const a=jO(r,e,n);if(a!==0)return a;i=i||r.field.isKeyField()}return 0}}function jO(t,e,n){const i=t.field.isKeyField()?ne.comparator(e.key,n.key):function(a,s,l){const u=s.data.field(a),c=l.data.field(a);return u!==null&&c!==null?Bs(u,c):ie(42886)}(t.field,e,n);switch(t.dir){case"asc":return i;case"desc":return-1*i;default:return ie(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Na{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i!==void 0){for(const[r,a]of i)if(this.equalsFn(r,e))return a}}has(e){return this.get(e)!==void 0}set(e,n){const i=this.mapKeyFn(e),r=this.inner[i];if(r===void 0)return this.inner[i]=[[e,n]],void this.innerSize++;for(let a=0;a<r.length;a++)if(this.equalsFn(r[a][0],e))return void(r[a]=[e,n]);r.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],e))return i.length===1?delete this.inner[n]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(e){qr(this.inner,(n,i)=>{for(const[r,a]of i)e(r,a)})}isEmpty(){return pA(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BO=new Je(ne.comparator);function ji(){return BO}const xA=new Je(ne.comparator);function Bo(...t){let e=xA;for(const n of t)e=e.insert(n.key,n);return e}function VA(t){let e=xA;return t.forEach((n,i)=>e=e.insert(n,i.overlayedDocument)),e}function oa(){return ol()}function PA(){return ol()}function ol(){return new Na(t=>t.toString(),(t,e)=>t.isEqual(e))}const HO=new Je(ne.comparator),FO=new Et(ne.comparator);function _e(...t){let e=FO;for(const n of t)e=e.add(n);return e}const qO=new Et(de);function GO(){return qO}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tp(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:nh(e)?"-0":e}}function LA(t){return{integerValue:""+t}}function KO(t,e){return vO(e)?LA(e):tp(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qh{constructor(){this._=void 0}}function QO(t,e,n){return t instanceof oh?function(r,a){const s={fields:{[_A]:{stringValue:vA},[TA]:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return a&&$g(a)&&(a=Fh(a)),a&&(s.fields[EA]=a),{mapValue:s}}(n,e):t instanceof Nl?kA(t,e):t instanceof Ml?zA(t,e):function(r,a){const s=UA(r,a),l=P_(s)+P_(r.Re);return Em(s)&&Em(r.Re)?LA(l):tp(r.serializer,l)}(t,e)}function YO(t,e,n){return t instanceof Nl?kA(t,e):t instanceof Ml?zA(t,e):n}function UA(t,e){return t instanceof lh?function(i){return Em(i)||function(a){return!!a&&"doubleValue"in a}(i)}(e)?e:{integerValue:0}:null}class oh extends Qh{}class Nl extends Qh{constructor(e){super(),this.elements=e}}function kA(t,e){const n=jA(e);for(const i of t.elements)n.some(r=>si(r,i))||n.push(i);return{arrayValue:{values:n}}}class Ml extends Qh{constructor(e){super(),this.elements=e}}function zA(t,e){let n=jA(e);for(const i of t.elements)n=n.filter(r=>!si(r,i));return{arrayValue:{values:n}}}class lh extends Qh{constructor(e,n){super(),this.serializer=e,this.Re=n}}function P_(t){return st(t.integerValue||t.doubleValue)}function jA(t){return Zg(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function XO(t,e){return t.field.isEqual(e.field)&&function(i,r){return i instanceof Nl&&r instanceof Nl||i instanceof Ml&&r instanceof Ml?js(i.elements,r.elements,si):i instanceof lh&&r instanceof lh?si(i.Re,r.Re):i instanceof oh&&r instanceof oh}(t.transform,e.transform)}class $O{constructor(e,n){this.version=e,this.transformResults=n}}class Bn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Bn}static exists(e){return new Bn(void 0,e)}static updateTime(e){return new Bn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function dc(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Yh{}function BA(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new np(t.key,Bn.none()):new iu(t.key,t.data,Bn.none());{const n=t.data,i=en.empty();let r=new Et(Mt.comparator);for(let a of e.fields)if(!r.has(a)){let s=n.field(a);s===null&&a.length>1&&(a=a.popLast(),s=n.field(a)),s===null?i.delete(a):i.set(a,s),r=r.add(a)}return new Gr(t.key,i,new dn(r.toArray()),Bn.none())}}function ZO(t,e,n){t instanceof iu?function(r,a,s){const l=r.value.clone(),u=U_(r.fieldTransforms,a,s.transformResults);l.setAll(u),a.convertToFoundDocument(s.version,l).setHasCommittedMutations()}(t,e,n):t instanceof Gr?function(r,a,s){if(!dc(r.precondition,a))return void a.convertToUnknownDocument(s.version);const l=U_(r.fieldTransforms,a,s.transformResults),u=a.data;u.setAll(HA(r)),u.setAll(l),a.convertToFoundDocument(s.version,u).setHasCommittedMutations()}(t,e,n):function(r,a,s){a.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,n)}function ll(t,e,n,i){return t instanceof iu?function(a,s,l,u){if(!dc(a.precondition,s))return l;const c=a.value.clone(),f=k_(a.fieldTransforms,u,s);return c.setAll(f),s.convertToFoundDocument(s.version,c).setHasLocalMutations(),null}(t,e,n,i):t instanceof Gr?function(a,s,l,u){if(!dc(a.precondition,s))return l;const c=k_(a.fieldTransforms,u,s),f=s.data;return f.setAll(HA(a)),f.setAll(c),s.convertToFoundDocument(s.version,f).setHasLocalMutations(),l===null?null:l.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map(m=>m.field))}(t,e,n,i):function(a,s,l){return dc(a.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):l}(t,e,n)}function WO(t,e){let n=null;for(const i of t.fieldTransforms){const r=e.data.field(i.field),a=UA(i.transform,r||null);a!=null&&(n===null&&(n=en.empty()),n.set(i.field,a))}return n||null}function L_(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(i,r){return i===void 0&&r===void 0||!(!i||!r)&&js(i,r,(a,s)=>XO(a,s))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class iu extends Yh{constructor(e,n,i,r=[]){super(),this.key=e,this.value=n,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Gr extends Yh{constructor(e,n,i,r,a=[]){super(),this.key=e,this.data=n,this.fieldMask=i,this.precondition=r,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function HA(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const i=t.data.field(n);e.set(n,i)}}),e}function U_(t,e,n){const i=new Map;Ce(t.length===n.length,32656,{Ve:n.length,me:t.length});for(let r=0;r<n.length;r++){const a=t[r],s=a.transform,l=e.data.field(a.field);i.set(a.field,YO(s,l,n[r]))}return i}function k_(t,e,n){const i=new Map;for(const r of t){const a=r.transform,s=n.data.field(r.field);i.set(r.field,QO(a,s,e))}return i}class np extends Yh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class JO extends Yh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eN{constructor(e,n,i,r){this.batchId=e,this.localWriteTime=n,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(e,n){const i=n.mutationResults;for(let r=0;r<this.mutations.length;r++){const a=this.mutations[r];a.key.isEqual(e.key)&&ZO(a,e,i[r])}}applyToLocalView(e,n){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(n=ll(i,e,n,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(n=ll(i,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const i=PA();return this.mutations.forEach(r=>{const a=e.get(r.key),s=a.overlayedDocument;let l=this.applyToLocalView(s,a.mutatedFields);l=n.has(r.key)?null:l;const u=BA(s,l);u!==null&&i.set(r.key,u),s.isValidDocument()||s.convertToNoDocument(ue.min())}),i}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),_e())}isEqual(e){return this.batchId===e.batchId&&js(this.mutations,e.mutations,(n,i)=>L_(n,i))&&js(this.baseMutations,e.baseMutations,(n,i)=>L_(n,i))}}class ip{constructor(e,n,i,r){this.batch=e,this.commitVersion=n,this.mutationResults=i,this.docVersions=r}static from(e,n,i){Ce(e.mutations.length===i.length,58842,{fe:e.mutations.length,ge:i.length});let r=function(){return HO}();const a=e.mutations;for(let s=0;s<a.length;s++)r=r.insert(a[s].key,i[s].version);return new ip(e,n,i,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tN{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nN{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var lt,Se;function iN(t){switch(t){case F.OK:return ie(64938);case F.CANCELLED:case F.UNKNOWN:case F.DEADLINE_EXCEEDED:case F.RESOURCE_EXHAUSTED:case F.INTERNAL:case F.UNAVAILABLE:case F.UNAUTHENTICATED:return!1;case F.INVALID_ARGUMENT:case F.NOT_FOUND:case F.ALREADY_EXISTS:case F.PERMISSION_DENIED:case F.FAILED_PRECONDITION:case F.ABORTED:case F.OUT_OF_RANGE:case F.UNIMPLEMENTED:case F.DATA_LOSS:return!0;default:return ie(15467,{code:t})}}function FA(t){if(t===void 0)return zi("GRPC error has no .code"),F.UNKNOWN;switch(t){case lt.OK:return F.OK;case lt.CANCELLED:return F.CANCELLED;case lt.UNKNOWN:return F.UNKNOWN;case lt.DEADLINE_EXCEEDED:return F.DEADLINE_EXCEEDED;case lt.RESOURCE_EXHAUSTED:return F.RESOURCE_EXHAUSTED;case lt.INTERNAL:return F.INTERNAL;case lt.UNAVAILABLE:return F.UNAVAILABLE;case lt.UNAUTHENTICATED:return F.UNAUTHENTICATED;case lt.INVALID_ARGUMENT:return F.INVALID_ARGUMENT;case lt.NOT_FOUND:return F.NOT_FOUND;case lt.ALREADY_EXISTS:return F.ALREADY_EXISTS;case lt.PERMISSION_DENIED:return F.PERMISSION_DENIED;case lt.FAILED_PRECONDITION:return F.FAILED_PRECONDITION;case lt.ABORTED:return F.ABORTED;case lt.OUT_OF_RANGE:return F.OUT_OF_RANGE;case lt.UNIMPLEMENTED:return F.UNIMPLEMENTED;case lt.DATA_LOSS:return F.DATA_LOSS;default:return ie(39323,{code:t})}}(Se=lt||(lt={}))[Se.OK=0]="OK",Se[Se.CANCELLED=1]="CANCELLED",Se[Se.UNKNOWN=2]="UNKNOWN",Se[Se.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Se[Se.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Se[Se.NOT_FOUND=5]="NOT_FOUND",Se[Se.ALREADY_EXISTS=6]="ALREADY_EXISTS",Se[Se.PERMISSION_DENIED=7]="PERMISSION_DENIED",Se[Se.UNAUTHENTICATED=16]="UNAUTHENTICATED",Se[Se.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Se[Se.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Se[Se.ABORTED=10]="ABORTED",Se[Se.OUT_OF_RANGE=11]="OUT_OF_RANGE",Se[Se.UNIMPLEMENTED=12]="UNIMPLEMENTED",Se[Se.INTERNAL=13]="INTERNAL",Se[Se.UNAVAILABLE=14]="UNAVAILABLE",Se[Se.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rN=new Dr([4294967295,4294967295],0);function z_(t){const e=dA().encode(t),n=new aA;return n.update(e),new Uint8Array(n.digest())}function j_(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),i=e.getUint32(4,!0),r=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new Dr([n,i],0),new Dr([r,a],0)]}class rp{constructor(e,n,i){if(this.bitmap=e,this.padding=n,this.hashCount=i,n<0||n>=8)throw new Ho(`Invalid padding: ${n}`);if(i<0)throw new Ho(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new Ho(`Invalid hash count: ${i}`);if(e.length===0&&n!==0)throw new Ho(`Invalid padding when bitmap length is 0: ${n}`);this.pe=8*e.length-n,this.ye=Dr.fromNumber(this.pe)}we(e,n,i){let r=e.add(n.multiply(Dr.fromNumber(i)));return r.compare(rN)===1&&(r=new Dr([r.getBits(0),r.getBits(1)],0)),r.modulo(this.ye).toNumber()}be(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.pe===0)return!1;const n=z_(e),[i,r]=j_(n);for(let a=0;a<this.hashCount;a++){const s=this.we(i,r,a);if(!this.be(s))return!1}return!0}static create(e,n,i){const r=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),s=new rp(a,r,n);return i.forEach(l=>s.insert(l)),s}insert(e){if(this.pe===0)return;const n=z_(e),[i,r]=j_(n);for(let a=0;a<this.hashCount;a++){const s=this.we(i,r,a);this.Se(s)}}Se(e){const n=Math.floor(e/8),i=e%8;this.bitmap[n]|=1<<i}}class Ho extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xh{constructor(e,n,i,r,a){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,n,i){const r=new Map;return r.set(e,ru.createSynthesizedTargetChangeForCurrentChange(e,n,i)),new Xh(ue.min(),r,new Je(de),ji(),_e())}}class ru{constructor(e,n,i,r,a){this.resumeToken=e,this.current=n,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,n,i){return new ru(i,n,_e(),_e(),_e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mc{constructor(e,n,i,r){this.De=e,this.removedTargetIds=n,this.key=i,this.ve=r}}class qA{constructor(e,n){this.targetId=e,this.Ce=n}}class GA{constructor(e,n,i=Vt.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=n,this.resumeToken=i,this.cause=r}}class B_{constructor(){this.Fe=0,this.Me=H_(),this.xe=Vt.EMPTY_BYTE_STRING,this.Oe=!1,this.Ne=!0}get current(){return this.Oe}get resumeToken(){return this.xe}get Be(){return this.Fe!==0}get Le(){return this.Ne}ke(e){e.approximateByteSize()>0&&(this.Ne=!0,this.xe=e)}qe(){let e=_e(),n=_e(),i=_e();return this.Me.forEach((r,a)=>{switch(a){case 0:e=e.add(r);break;case 2:n=n.add(r);break;case 1:i=i.add(r);break;default:ie(38017,{changeType:a})}}),new ru(this.xe,this.Oe,e,n,i)}Qe(){this.Ne=!1,this.Me=H_()}$e(e,n){this.Ne=!0,this.Me=this.Me.insert(e,n)}Ue(e){this.Ne=!0,this.Me=this.Me.remove(e)}Ke(){this.Fe+=1}We(){this.Fe-=1,Ce(this.Fe>=0,3241,{Fe:this.Fe})}Ge(){this.Ne=!0,this.Oe=!0}}class aN{constructor(e){this.ze=e,this.je=new Map,this.He=ji(),this.Je=Qu(),this.Ye=Qu(),this.Ze=new Je(de)}Xe(e){for(const n of e.De)e.ve&&e.ve.isFoundDocument()?this.et(n,e.ve):this.tt(n,e.key,e.ve);for(const n of e.removedTargetIds)this.tt(n,e.key,e.ve)}nt(e){this.forEachTarget(e,n=>{const i=this.rt(n);switch(e.state){case 0:this.it(n)&&i.ke(e.resumeToken);break;case 1:i.We(),i.Be||i.Qe(),i.ke(e.resumeToken);break;case 2:i.We(),i.Be||this.removeTarget(n);break;case 3:this.it(n)&&(i.Ge(),i.ke(e.resumeToken));break;case 4:this.it(n)&&(this.st(n),i.ke(e.resumeToken));break;default:ie(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.je.forEach((i,r)=>{this.it(r)&&n(r)})}ot(e){const n=e.targetId,i=e.Ce.count,r=this._t(n);if(r){const a=r.target;if(Sm(a))if(i===0){const s=new ne(a.path);this.tt(n,s,zt.newNoDocument(s,ue.min()))}else Ce(i===1,20013,{expectedCount:i});else{const s=this.ut(n);if(s!==i){const l=this.ct(e),u=l?this.lt(l,e,s):1;if(u!==0){this.st(n);const c=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(n,c)}}}}}ct(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:i="",padding:r=0},hashCount:a=0}=n;let s,l;try{s=Lr(i).toUint8Array()}catch(u){if(u instanceof yA)return zs("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{l=new rp(s,r,a)}catch(u){return zs(u instanceof Ho?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return l.pe===0?null:l}lt(e,n,i){return n.Ce.count===i-this.Tt(e,n.targetId)?0:2}Tt(e,n){const i=this.ze.getRemoteKeysForTarget(n);let r=0;return i.forEach(a=>{const s=this.ze.Pt(),l=`projects/${s.projectId}/databases/${s.database}/documents/${a.path.canonicalString()}`;e.mightContain(l)||(this.tt(n,a,null),r++)}),r}It(e){const n=new Map;this.je.forEach((a,s)=>{const l=this._t(s);if(l){if(a.current&&Sm(l.target)){const u=new ne(l.target.path);this.Et(u).has(s)||this.dt(s,u)||this.tt(s,u,zt.newNoDocument(u,e))}a.Le&&(n.set(s,a.qe()),a.Qe())}});let i=_e();this.Ye.forEach((a,s)=>{let l=!0;s.forEachWhile(u=>{const c=this._t(u);return!c||c.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(i=i.add(a))}),this.He.forEach((a,s)=>s.setReadTime(e));const r=new Xh(e,n,this.Ze,this.He,i);return this.He=ji(),this.Je=Qu(),this.Ye=Qu(),this.Ze=new Je(de),r}et(e,n){if(!this.it(e))return;const i=this.dt(e,n.key)?2:0;this.rt(e).$e(n.key,i),this.He=this.He.insert(n.key,n),this.Je=this.Je.insert(n.key,this.Et(n.key).add(e)),this.Ye=this.Ye.insert(n.key,this.At(n.key).add(e))}tt(e,n,i){if(!this.it(e))return;const r=this.rt(e);this.dt(e,n)?r.$e(n,1):r.Ue(n),this.Ye=this.Ye.insert(n,this.At(n).delete(e)),this.Ye=this.Ye.insert(n,this.At(n).add(e)),i&&(this.He=this.He.insert(n,i))}removeTarget(e){this.je.delete(e)}ut(e){const n=this.rt(e).qe();return this.ze.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ke(e){this.rt(e).Ke()}rt(e){let n=this.je.get(e);return n||(n=new B_,this.je.set(e,n)),n}At(e){let n=this.Ye.get(e);return n||(n=new Et(de),this.Ye=this.Ye.insert(e,n)),n}Et(e){let n=this.Je.get(e);return n||(n=new Et(de),this.Je=this.Je.insert(e,n)),n}it(e){const n=this._t(e)!==null;return n||Y("WatchChangeAggregator","Detected inactive target",e),n}_t(e){const n=this.je.get(e);return n&&n.Be?null:this.ze.Rt(e)}st(e){this.je.set(e,new B_),this.ze.getRemoteKeysForTarget(e).forEach(n=>{this.tt(e,n,null)})}dt(e,n){return this.ze.getRemoteKeysForTarget(e).has(n)}}function Qu(){return new Je(ne.comparator)}function H_(){return new Je(ne.comparator)}const sN={asc:"ASCENDING",desc:"DESCENDING"},oN={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},lN={and:"AND",or:"OR"};class uN{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function bm(t,e){return t.useProto3Json||Hh(e)?e:{value:e}}function uh(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function KA(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function cN(t,e){return uh(t,e.toTimestamp())}function ri(t){return Ce(!!t,49232),ue.fromTimestamp(function(n){const i=Pr(n);return new _t(i.seconds,i.nanos)}(t))}function ap(t,e){return wm(t,e).canonicalString()}function wm(t,e){const n=function(r){return new Ye(["projects",r.projectId,"databases",r.database])}(t).child("documents");return e===void 0?n:n.child(e)}function QA(t){const e=Ye.fromString(t);return Ce(WA(e),10190,{key:e.toString()}),e}function Rm(t,e){return ap(t.databaseId,e.path)}function od(t,e){const n=QA(e);if(n.get(1)!==t.databaseId.projectId)throw new te(F.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new te(F.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ne(XA(n))}function YA(t,e){return ap(t.databaseId,e)}function hN(t){const e=QA(t);return e.length===4?Ye.emptyPath():XA(e)}function Im(t){return new Ye(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function XA(t){return Ce(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function F_(t,e,n){return{name:Rm(t,e),fields:n.value.mapValue.fields}}function fN(t,e){let n;if("targetChange"in e){e.targetChange;const i=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:ie(39313,{state:c})}(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],a=function(c,f){return c.useProto3Json?(Ce(f===void 0||typeof f=="string",58123),Vt.fromBase64String(f||"")):(Ce(f===void 0||f instanceof Buffer||f instanceof Uint8Array,16193),Vt.fromUint8Array(f||new Uint8Array))}(t,e.targetChange.resumeToken),s=e.targetChange.cause,l=s&&function(c){const f=c.code===void 0?F.UNKNOWN:FA(c.code);return new te(f,c.message||"")}(s);n=new GA(i,r,a,l||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const r=od(t,i.document.name),a=ri(i.document.updateTime),s=i.document.createTime?ri(i.document.createTime):ue.min(),l=new en({mapValue:{fields:i.document.fields}}),u=zt.newFoundDocument(r,a,s,l),c=i.targetIds||[],f=i.removedTargetIds||[];n=new mc(c,f,u.key,u)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const r=od(t,i.document),a=i.readTime?ri(i.readTime):ue.min(),s=zt.newNoDocument(r,a),l=i.removedTargetIds||[];n=new mc([],l,s.key,s)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const r=od(t,i.document),a=i.removedTargetIds||[];n=new mc([],a,r,null)}else{if(!("filter"in e))return ie(11601,{Vt:e});{e.filter;const i=e.filter;i.targetId;const{count:r=0,unchangedNames:a}=i,s=new nN(r,a),l=i.targetId;n=new qA(l,s)}}return n}function dN(t,e){let n;if(e instanceof iu)n={update:F_(t,e.key,e.value)};else if(e instanceof np)n={delete:Rm(t,e.key)};else if(e instanceof Gr)n={update:F_(t,e.key,e.data),updateMask:SN(e.fieldMask)};else{if(!(e instanceof JO))return ie(16599,{ft:e.type});n={verify:Rm(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(i=>function(a,s){const l=s.transform;if(l instanceof oh)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Nl)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Ml)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof lh)return{fieldPath:s.field.canonicalString(),increment:l.Re};throw ie(20930,{transform:s.transform})}(0,i))),e.precondition.isNone||(n.currentDocument=function(r,a){return a.updateTime!==void 0?{updateTime:cN(r,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:ie(27497)}(t,e.precondition)),n}function mN(t,e){return t&&t.length>0?(Ce(e!==void 0,14353),t.map(n=>function(r,a){let s=r.updateTime?ri(r.updateTime):ri(a);return s.isEqual(ue.min())&&(s=ri(a)),new $O(s,r.transformResults||[])}(n,e))):[]}function gN(t,e){return{documents:[YA(t,e.path)]}}function pN(t,e){const n={structuredQuery:{}},i=e.path;let r;e.collectionGroup!==null?(r=i,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=YA(t,r);const a=function(c){if(c.length!==0)return ZA(oi.create(c,"and"))}(e.filters);a&&(n.structuredQuery.where=a);const s=function(c){if(c.length!==0)return c.map(f=>function(g){return{field:Ja(g.field),direction:_N(g.dir)}}(f))}(e.orderBy);s&&(n.structuredQuery.orderBy=s);const l=bm(t,e.limit);return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{gt:n,parent:r}}function yN(t){let e=hN(t.parent);const n=t.structuredQuery,i=n.from?n.from.length:0;let r=null;if(i>0){Ce(i===1,65062);const f=n.from[0];f.allDescendants?r=f.collectionId:e=e.child(f.collectionId)}let a=[];n.where&&(a=function(m){const g=$A(m);return g instanceof oi&&IA(g)?g.getFilters():[g]}(n.where));let s=[];n.orderBy&&(s=function(m){return m.map(g=>function(C){return new sh(es(C.field),function(M){switch(M){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(C.direction))}(g))}(n.orderBy));let l=null;n.limit&&(l=function(m){let g;return g=typeof m=="object"?m.value:m,Hh(g)?null:g}(n.limit));let u=null;n.startAt&&(u=function(m){const g=!!m.before,y=m.values||[];return new ah(y,g)}(n.startAt));let c=null;return n.endAt&&(c=function(m){const g=!m.before,y=m.values||[];return new ah(y,g)}(n.endAt)),LO(e,r,s,a,l,"F",u,c)}function vN(t,e){const n=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ie(28987,{purpose:r})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function $A(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const i=es(n.unaryFilter.field);return vt.create(i,"==",{doubleValue:NaN});case"IS_NULL":const r=es(n.unaryFilter.field);return vt.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=es(n.unaryFilter.field);return vt.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=es(n.unaryFilter.field);return vt.create(s,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ie(61313);default:return ie(60726)}}(t):t.fieldFilter!==void 0?function(n){return vt.create(es(n.fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ie(58110);default:return ie(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return oi.create(n.compositeFilter.filters.map(i=>$A(i)),function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return ie(1026)}}(n.compositeFilter.op))}(t):ie(30097,{filter:t})}function _N(t){return sN[t]}function EN(t){return oN[t]}function TN(t){return lN[t]}function Ja(t){return{fieldPath:t.canonicalString()}}function es(t){return Mt.fromServerFormat(t.fieldPath)}function ZA(t){return t instanceof vt?function(n){if(n.op==="=="){if(O_(n.value))return{unaryFilter:{field:Ja(n.field),op:"IS_NAN"}};if(D_(n.value))return{unaryFilter:{field:Ja(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(O_(n.value))return{unaryFilter:{field:Ja(n.field),op:"IS_NOT_NAN"}};if(D_(n.value))return{unaryFilter:{field:Ja(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ja(n.field),op:EN(n.op),value:n.value}}}(t):t instanceof oi?function(n){const i=n.getFilters().map(r=>ZA(r));return i.length===1?i[0]:{compositeFilter:{op:TN(n.op),filters:i}}}(t):ie(54877,{filter:t})}function SN(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function WA(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yr{constructor(e,n,i,r,a=ue.min(),s=ue.min(),l=Vt.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=l,this.expectedCount=u}withSequenceNumber(e){return new yr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new yr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new yr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new yr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AN{constructor(e){this.wt=e}}function bN(t){const e=yN({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Am(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wN{constructor(){this.yn=new RN}addToCollectionParentIndex(e,n){return this.yn.add(n),k.resolve()}getCollectionParents(e,n){return k.resolve(this.yn.getEntries(n))}addFieldIndex(e,n){return k.resolve()}deleteFieldIndex(e,n){return k.resolve()}deleteAllFieldIndexes(e){return k.resolve()}createTargetIndexes(e,n){return k.resolve()}getDocumentsMatchingTarget(e,n){return k.resolve(null)}getIndexType(e,n){return k.resolve(0)}getFieldIndexes(e,n){return k.resolve([])}getNextCollectionGroupToUpdate(e){return k.resolve(null)}getMinOffset(e,n){return k.resolve(Vr.min())}getMinOffsetFromCollectionGroup(e,n){return k.resolve(Vr.min())}updateCollectionGroup(e,n,i){return k.resolve()}updateIndexEntries(e,n){return k.resolve()}}class RN{constructor(){this.index={}}add(e){const n=e.lastSegment(),i=e.popLast(),r=this.index[n]||new Et(Ye.comparator),a=!r.has(i);return this.index[n]=r.add(i),a}has(e){const n=e.lastSegment(),i=e.popLast(),r=this.index[n];return r&&r.has(i)}getEntries(e){return(this.index[e]||new Et(Ye.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q_={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},JA=41943040;class Jt{static withCacheSize(e){return new Jt(e,Jt.DEFAULT_COLLECTION_PERCENTILE,Jt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Jt.DEFAULT_COLLECTION_PERCENTILE=10,Jt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Jt.DEFAULT=new Jt(JA,Jt.DEFAULT_COLLECTION_PERCENTILE,Jt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Jt.DISABLED=new Jt(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fs{constructor(e){this.nr=e}next(){return this.nr+=2,this.nr}static rr(){return new Fs(0)}static ir(){return new Fs(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G_="LruGarbageCollector",IN=1048576;function K_([t,e],[n,i]){const r=de(t,n);return r===0?de(e,i):r}class CN{constructor(e){this.cr=e,this.buffer=new Et(K_),this.lr=0}hr(){return++this.lr}Pr(e){const n=[e,this.hr()];if(this.buffer.size<this.cr)this.buffer=this.buffer.add(n);else{const i=this.buffer.last();K_(n,i)<0&&(this.buffer=this.buffer.delete(i).add(n))}}get maxValue(){return this.buffer.last()[0]}}class DN{constructor(e,n,i){this.garbageCollector=e,this.asyncQueue=n,this.localStore=i,this.Tr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ir(6e4)}stop(){this.Tr&&(this.Tr.cancel(),this.Tr=null)}get started(){return this.Tr!==null}Ir(e){Y(G_,`Garbage collection scheduled in ${e}ms`),this.Tr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Tr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){io(n)?Y(G_,"Ignoring IndexedDB error during garbage collection: ",n):await no(n)}await this.Ir(3e5)})}}class ON{constructor(e,n){this.Er=e,this.params=n}calculateTargetCount(e,n){return this.Er.dr(e).next(i=>Math.floor(n/100*i))}nthSequenceNumber(e,n){if(n===0)return k.resolve(Bh.le);const i=new CN(n);return this.Er.forEachTarget(e,r=>i.Pr(r.sequenceNumber)).next(()=>this.Er.Ar(e,r=>i.Pr(r))).next(()=>i.maxValue)}removeTargets(e,n,i){return this.Er.removeTargets(e,n,i)}removeOrphanedDocuments(e,n){return this.Er.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(Y("LruGarbageCollector","Garbage collection skipped; disabled"),k.resolve(q_)):this.getCacheSize(e).next(i=>i<this.params.cacheSizeCollectionThreshold?(Y("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),q_):this.Rr(e,n))}getCacheSize(e){return this.Er.getCacheSize(e)}Rr(e,n){let i,r,a,s,l,u,c;const f=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(m=>(m>this.params.maximumSequenceNumbersToCollect?(Y("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${m}`),r=this.params.maximumSequenceNumbersToCollect):r=m,s=Date.now(),this.nthSequenceNumber(e,r))).next(m=>(i=m,l=Date.now(),this.removeTargets(e,i,n))).next(m=>(a=m,u=Date.now(),this.removeOrphanedDocuments(e,i))).next(m=>(c=Date.now(),Za()<=ve.DEBUG&&Y("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-f}ms
	Determined least recently used ${r} in `+(l-s)+`ms
	Removed ${a} targets in `+(u-l)+`ms
	Removed ${m} documents in `+(c-u)+`ms
Total Duration: ${c-f}ms`),k.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:a,documentsRemoved:m})))}}function NN(t,e){return new ON(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MN{constructor(){this.changes=new Na(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,zt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const i=this.changes.get(n);return i!==void 0?k.resolve(i):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xN{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VN{constructor(e,n,i,r){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=r}getDocument(e,n){let i=null;return this.documentOverlayCache.getOverlay(e,n).next(r=>(i=r,this.remoteDocumentCache.getEntry(e,n))).next(r=>(i!==null&&ll(i.mutation,r,dn.empty(),_t.now()),r))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.getLocalViewOfDocuments(e,i,_e()).next(()=>i))}getLocalViewOfDocuments(e,n,i=_e()){const r=oa();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,i).next(a=>{let s=Bo();return a.forEach((l,u)=>{s=s.insert(l,u.overlayedDocument)}),s}))}getOverlayedDocuments(e,n){const i=oa();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,_e()))}populateOverlays(e,n,i){const r=[];return i.forEach(a=>{n.has(a)||r.push(a)}),this.documentOverlayCache.getOverlays(e,r).next(a=>{a.forEach((s,l)=>{n.set(s,l)})})}computeViews(e,n,i,r){let a=ji();const s=ol(),l=function(){return ol()}();return n.forEach((u,c)=>{const f=i.get(c.key);r.has(c.key)&&(f===void 0||f.mutation instanceof Gr)?a=a.insert(c.key,c):f!==void 0?(s.set(c.key,f.mutation.getFieldMask()),ll(f.mutation,c,f.mutation.getFieldMask(),_t.now())):s.set(c.key,dn.empty())}),this.recalculateAndSaveOverlays(e,a).next(u=>(u.forEach((c,f)=>s.set(c,f)),n.forEach((c,f)=>{var m;return l.set(c,new xN(f,(m=s.get(c))!==null&&m!==void 0?m:null))}),l))}recalculateAndSaveOverlays(e,n){const i=ol();let r=new Je((s,l)=>s-l),a=_e();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(s=>{for(const l of s)l.keys().forEach(u=>{const c=n.get(u);if(c===null)return;let f=i.get(u)||dn.empty();f=l.applyToLocalView(c,f),i.set(u,f);const m=(r.get(l.batchId)||_e()).add(u);r=r.insert(l.batchId,m)})}).next(()=>{const s=[],l=r.getReverseIterator();for(;l.hasNext();){const u=l.getNext(),c=u.key,f=u.value,m=PA();f.forEach(g=>{if(!a.has(g)){const y=BA(n.get(g),i.get(g));y!==null&&m.set(g,y),a=a.add(g)}}),s.push(this.documentOverlayCache.saveOverlays(e,c,m))}return k.waitFor(s)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,n,i,r){return function(s){return ne.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):UO(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,i,r):this.getDocumentsMatchingCollectionQuery(e,n,i,r)}getNextDocuments(e,n,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,i,r).next(a=>{const s=r-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,i.largestBatchId,r-a.size):k.resolve(oa());let l=Il,u=a;return s.next(c=>k.forEach(c,(f,m)=>(l<m.largestBatchId&&(l=m.largestBatchId),a.get(f)?k.resolve():this.remoteDocumentCache.getEntry(e,f).next(g=>{u=u.insert(f,g)}))).next(()=>this.populateOverlays(e,c,a)).next(()=>this.computeViews(e,u,c,_e())).next(f=>({batchId:l,changes:VA(f)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ne(n)).next(i=>{let r=Bo();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}getDocumentsMatchingCollectionGroupQuery(e,n,i,r){const a=n.collectionGroup;let s=Bo();return this.indexManager.getCollectionParents(e,a).next(l=>k.forEach(l,u=>{const c=function(m,g){return new qh(g,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt)}(n,u.child(a));return this.getDocumentsMatchingCollectionQuery(e,c,i,r).next(f=>{f.forEach((m,g)=>{s=s.insert(m,g)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,n,i,r){let a;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,i.largestBatchId).next(s=>(a=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,i,a,r))).next(s=>{a.forEach((u,c)=>{const f=c.getKey();s.get(f)===null&&(s=s.insert(f,zt.newInvalidDocument(f)))});let l=Bo();return s.forEach((u,c)=>{const f=a.get(u);f!==void 0&&ll(f.mutation,c,dn.empty(),_t.now()),Kh(n,c)&&(l=l.insert(u,c))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PN{constructor(e){this.serializer=e,this.Fr=new Map,this.Mr=new Map}getBundleMetadata(e,n){return k.resolve(this.Fr.get(n))}saveBundleMetadata(e,n){return this.Fr.set(n.id,function(r){return{id:r.id,version:r.version,createTime:ri(r.createTime)}}(n)),k.resolve()}getNamedQuery(e,n){return k.resolve(this.Mr.get(n))}saveNamedQuery(e,n){return this.Mr.set(n.name,function(r){return{name:r.name,query:bN(r.bundledQuery),readTime:ri(r.readTime)}}(n)),k.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LN{constructor(){this.overlays=new Je(ne.comparator),this.Or=new Map}getOverlay(e,n){return k.resolve(this.overlays.get(n))}getOverlays(e,n){const i=oa();return k.forEach(n,r=>this.getOverlay(e,r).next(a=>{a!==null&&i.set(r,a)})).next(()=>i)}saveOverlays(e,n,i){return i.forEach((r,a)=>{this.St(e,n,a)}),k.resolve()}removeOverlaysForBatchId(e,n,i){const r=this.Or.get(i);return r!==void 0&&(r.forEach(a=>this.overlays=this.overlays.remove(a)),this.Or.delete(i)),k.resolve()}getOverlaysForCollection(e,n,i){const r=oa(),a=n.length+1,s=new ne(n.child("")),l=this.overlays.getIteratorFrom(s);for(;l.hasNext();){const u=l.getNext().value,c=u.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===a&&u.largestBatchId>i&&r.set(u.getKey(),u)}return k.resolve(r)}getOverlaysForCollectionGroup(e,n,i,r){let a=new Je((c,f)=>c-f);const s=this.overlays.getIterator();for(;s.hasNext();){const c=s.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>i){let f=a.get(c.largestBatchId);f===null&&(f=oa(),a=a.insert(c.largestBatchId,f)),f.set(c.getKey(),c)}}const l=oa(),u=a.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((c,f)=>l.set(c,f)),!(l.size()>=r)););return k.resolve(l)}St(e,n,i){const r=this.overlays.get(i.key);if(r!==null){const s=this.Or.get(r.largestBatchId).delete(i.key);this.Or.set(r.largestBatchId,s)}this.overlays=this.overlays.insert(i.key,new tN(n,i));let a=this.Or.get(n);a===void 0&&(a=_e(),this.Or.set(n,a)),this.Or.set(n,a.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UN{constructor(){this.sessionToken=Vt.EMPTY_BYTE_STRING}getSessionToken(e){return k.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,k.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sp{constructor(){this.Nr=new Et(St.Br),this.Lr=new Et(St.kr)}isEmpty(){return this.Nr.isEmpty()}addReference(e,n){const i=new St(e,n);this.Nr=this.Nr.add(i),this.Lr=this.Lr.add(i)}qr(e,n){e.forEach(i=>this.addReference(i,n))}removeReference(e,n){this.Qr(new St(e,n))}$r(e,n){e.forEach(i=>this.removeReference(i,n))}Ur(e){const n=new ne(new Ye([])),i=new St(n,e),r=new St(n,e+1),a=[];return this.Lr.forEachInRange([i,r],s=>{this.Qr(s),a.push(s.key)}),a}Kr(){this.Nr.forEach(e=>this.Qr(e))}Qr(e){this.Nr=this.Nr.delete(e),this.Lr=this.Lr.delete(e)}Wr(e){const n=new ne(new Ye([])),i=new St(n,e),r=new St(n,e+1);let a=_e();return this.Lr.forEachInRange([i,r],s=>{a=a.add(s.key)}),a}containsKey(e){const n=new St(e,0),i=this.Nr.firstAfterOrEqual(n);return i!==null&&e.isEqual(i.key)}}class St{constructor(e,n){this.key=e,this.Gr=n}static Br(e,n){return ne.comparator(e.key,n.key)||de(e.Gr,n.Gr)}static kr(e,n){return de(e.Gr,n.Gr)||ne.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kN{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Jn=1,this.zr=new Et(St.Br)}checkEmpty(e){return k.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,i,r){const a=this.Jn;this.Jn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new eN(a,n,i,r);this.mutationQueue.push(s);for(const l of r)this.zr=this.zr.add(new St(l.key,a)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return k.resolve(s)}lookupMutationBatch(e,n){return k.resolve(this.jr(n))}getNextMutationBatchAfterBatchId(e,n){const i=n+1,r=this.Hr(i),a=r<0?0:r;return k.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return k.resolve(this.mutationQueue.length===0?Xg:this.Jn-1)}getAllMutationBatches(e){return k.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const i=new St(n,0),r=new St(n,Number.POSITIVE_INFINITY),a=[];return this.zr.forEachInRange([i,r],s=>{const l=this.jr(s.Gr);a.push(l)}),k.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new Et(de);return n.forEach(r=>{const a=new St(r,0),s=new St(r,Number.POSITIVE_INFINITY);this.zr.forEachInRange([a,s],l=>{i=i.add(l.Gr)})}),k.resolve(this.Jr(i))}getAllMutationBatchesAffectingQuery(e,n){const i=n.path,r=i.length+1;let a=i;ne.isDocumentKey(a)||(a=a.child(""));const s=new St(new ne(a),0);let l=new Et(de);return this.zr.forEachWhile(u=>{const c=u.key.path;return!!i.isPrefixOf(c)&&(c.length===r&&(l=l.add(u.Gr)),!0)},s),k.resolve(this.Jr(l))}Jr(e){const n=[];return e.forEach(i=>{const r=this.jr(i);r!==null&&n.push(r)}),n}removeMutationBatch(e,n){Ce(this.Yr(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.zr;return k.forEach(n.mutations,r=>{const a=new St(r.key,n.batchId);return i=i.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.zr=i})}Xn(e){}containsKey(e,n){const i=new St(n,0),r=this.zr.firstAfterOrEqual(i);return k.resolve(n.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,k.resolve()}Yr(e,n){return this.Hr(e)}Hr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}jr(e){const n=this.Hr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zN{constructor(e){this.Zr=e,this.docs=function(){return new Je(ne.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const i=n.key,r=this.docs.get(i),a=r?r.size:0,s=this.Zr(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:s}),this.size+=s-a,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const i=this.docs.get(n);return k.resolve(i?i.document.mutableCopy():zt.newInvalidDocument(n))}getEntries(e,n){let i=ji();return n.forEach(r=>{const a=this.docs.get(r);i=i.insert(r,a?a.document.mutableCopy():zt.newInvalidDocument(r))}),k.resolve(i)}getDocumentsMatchingQuery(e,n,i,r){let a=ji();const s=n.path,l=new ne(s.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(l);for(;u.hasNext();){const{key:c,value:{document:f}}=u.getNext();if(!s.isPrefixOf(c.path))break;c.path.length>s.length+1||mO(dO(f),i)<=0||(r.has(f.key)||Kh(n,f))&&(a=a.insert(f.key,f.mutableCopy()))}return k.resolve(a)}getAllFromCollectionGroup(e,n,i,r){ie(9500)}Xr(e,n){return k.forEach(this.docs,i=>n(i))}newChangeBuffer(e){return new jN(this)}getSize(e){return k.resolve(this.size)}}class jN extends MN{constructor(e){super(),this.vr=e}applyChanges(e){const n=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?n.push(this.vr.addEntry(e,r)):this.vr.removeEntry(i)}),k.waitFor(n)}getFromCache(e,n){return this.vr.getEntry(e,n)}getAllFromCache(e,n){return this.vr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BN{constructor(e){this.persistence=e,this.ei=new Na(n=>Wg(n),Jg),this.lastRemoteSnapshotVersion=ue.min(),this.highestTargetId=0,this.ti=0,this.ni=new sp,this.targetCount=0,this.ri=Fs.rr()}forEachTarget(e,n){return this.ei.forEach((i,r)=>n(r)),k.resolve()}getLastRemoteSnapshotVersion(e){return k.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return k.resolve(this.ti)}allocateTargetId(e){return this.highestTargetId=this.ri.next(),k.resolve(this.highestTargetId)}setTargetsMetadata(e,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.ti&&(this.ti=n),k.resolve()}ar(e){this.ei.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ri=new Fs(n),this.highestTargetId=n),e.sequenceNumber>this.ti&&(this.ti=e.sequenceNumber)}addTargetData(e,n){return this.ar(n),this.targetCount+=1,k.resolve()}updateTargetData(e,n){return this.ar(n),k.resolve()}removeTargetData(e,n){return this.ei.delete(n.target),this.ni.Ur(n.targetId),this.targetCount-=1,k.resolve()}removeTargets(e,n,i){let r=0;const a=[];return this.ei.forEach((s,l)=>{l.sequenceNumber<=n&&i.get(l.targetId)===null&&(this.ei.delete(s),a.push(this.removeMatchingKeysForTargetId(e,l.targetId)),r++)}),k.waitFor(a).next(()=>r)}getTargetCount(e){return k.resolve(this.targetCount)}getTargetData(e,n){const i=this.ei.get(n)||null;return k.resolve(i)}addMatchingKeys(e,n,i){return this.ni.qr(n,i),k.resolve()}removeMatchingKeys(e,n,i){this.ni.$r(n,i);const r=this.persistence.referenceDelegate,a=[];return r&&n.forEach(s=>{a.push(r.markPotentiallyOrphaned(e,s))}),k.waitFor(a)}removeMatchingKeysForTargetId(e,n){return this.ni.Ur(n),k.resolve()}getMatchingKeysForTargetId(e,n){const i=this.ni.Wr(n);return k.resolve(i)}containsKey(e,n){return k.resolve(this.ni.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eb{constructor(e,n){this.ii={},this.overlays={},this.si=new Bh(0),this.oi=!1,this.oi=!0,this._i=new UN,this.referenceDelegate=e(this),this.ai=new BN(this),this.indexManager=new wN,this.remoteDocumentCache=function(r){return new zN(r)}(i=>this.referenceDelegate.ui(i)),this.serializer=new AN(n),this.ci=new PN(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.oi=!1,Promise.resolve()}get started(){return this.oi}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new LN,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let i=this.ii[e.toKey()];return i||(i=new kN(n,this.referenceDelegate),this.ii[e.toKey()]=i),i}getGlobalsCache(){return this._i}getTargetCache(){return this.ai}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.ci}runTransaction(e,n,i){Y("MemoryPersistence","Starting transaction:",e);const r=new HN(this.si.next());return this.referenceDelegate.li(),i(r).next(a=>this.referenceDelegate.hi(r).next(()=>a)).toPromise().then(a=>(r.raiseOnCommittedEvent(),a))}Pi(e,n){return k.or(Object.values(this.ii).map(i=>()=>i.containsKey(e,n)))}}class HN extends pO{constructor(e){super(),this.currentSequenceNumber=e}}class op{constructor(e){this.persistence=e,this.Ti=new sp,this.Ii=null}static Ei(e){return new op(e)}get di(){if(this.Ii)return this.Ii;throw ie(60996)}addReference(e,n,i){return this.Ti.addReference(i,n),this.di.delete(i.toString()),k.resolve()}removeReference(e,n,i){return this.Ti.removeReference(i,n),this.di.add(i.toString()),k.resolve()}markPotentiallyOrphaned(e,n){return this.di.add(n.toString()),k.resolve()}removeTarget(e,n){this.Ti.Ur(n.targetId).forEach(r=>this.di.add(r.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,n.targetId).next(r=>{r.forEach(a=>this.di.add(a.toString()))}).next(()=>i.removeTargetData(e,n))}li(){this.Ii=new Set}hi(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return k.forEach(this.di,i=>{const r=ne.fromPath(i);return this.Ai(e,r).next(a=>{a||n.removeEntry(r,ue.min())})}).next(()=>(this.Ii=null,n.apply(e)))}updateLimboDocument(e,n){return this.Ai(e,n).next(i=>{i?this.di.delete(n.toString()):this.di.add(n.toString())})}ui(e){return 0}Ai(e,n){return k.or([()=>k.resolve(this.Ti.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Pi(e,n)])}}class ch{constructor(e,n){this.persistence=e,this.Ri=new Na(i=>_O(i.path),(i,r)=>i.isEqual(r)),this.garbageCollector=NN(this,n)}static Ei(e,n){return new ch(e,n)}li(){}hi(e){return k.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}dr(e){const n=this.Vr(e);return this.persistence.getTargetCache().getTargetCount(e).next(i=>n.next(r=>i+r))}Vr(e){let n=0;return this.Ar(e,i=>{n++}).next(()=>n)}Ar(e,n){return k.forEach(this.Ri,(i,r)=>this.gr(e,i,r).next(a=>a?k.resolve():n(r)))}removeTargets(e,n,i){return this.persistence.getTargetCache().removeTargets(e,n,i)}removeOrphanedDocuments(e,n){let i=0;const r=this.persistence.getRemoteDocumentCache(),a=r.newChangeBuffer();return r.Xr(e,s=>this.gr(e,s,n).next(l=>{l||(i++,a.removeEntry(s,ue.min()))})).next(()=>a.apply(e)).next(()=>i)}markPotentiallyOrphaned(e,n){return this.Ri.set(n,e.currentSequenceNumber),k.resolve()}removeTarget(e,n){const i=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,n,i){return this.Ri.set(i,e.currentSequenceNumber),k.resolve()}removeReference(e,n,i){return this.Ri.set(i,e.currentSequenceNumber),k.resolve()}updateLimboDocument(e,n){return this.Ri.set(n,e.currentSequenceNumber),k.resolve()}ui(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=hc(e.data.value)),n}gr(e,n,i){return k.or([()=>this.persistence.Pi(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const r=this.Ri.get(n);return k.resolve(r!==void 0&&r>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lp{constructor(e,n,i,r){this.targetId=e,this.fromCache=n,this.ls=i,this.hs=r}static Ps(e,n){let i=_e(),r=_e();for(const a of n.docChanges)switch(a.type){case 0:i=i.add(a.doc.key);break;case 1:r=r.add(a.doc.key)}return new lp(e,n.fromCache,i,r)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FN{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qN{constructor(){this.Ts=!1,this.Is=!1,this.Es=100,this.ds=function(){return zD()?8:yO(Ht())>0?6:4}()}initialize(e,n){this.As=e,this.indexManager=n,this.Ts=!0}getDocumentsMatchingQuery(e,n,i,r){const a={result:null};return this.Rs(e,n).next(s=>{a.result=s}).next(()=>{if(!a.result)return this.Vs(e,n,r,i).next(s=>{a.result=s})}).next(()=>{if(a.result)return;const s=new FN;return this.fs(e,n,s).next(l=>{if(a.result=l,this.Is)return this.gs(e,n,s,l.size)})}).next(()=>a.result)}gs(e,n,i,r){return i.documentReadCount<this.Es?(Za()<=ve.DEBUG&&Y("QueryEngine","SDK will not create cache indexes for query:",Wa(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Es,"documents"),k.resolve()):(Za()<=ve.DEBUG&&Y("QueryEngine","Query:",Wa(n),"scans",i.documentReadCount,"local documents and returns",r,"documents as results."),i.documentReadCount>this.ds*r?(Za()<=ve.DEBUG&&Y("QueryEngine","The SDK decides to create cache indexes for query:",Wa(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ii(n))):k.resolve())}Rs(e,n){if(V_(n))return k.resolve(null);let i=ii(n);return this.indexManager.getIndexType(e,i).next(r=>r===0?null:(n.limit!==null&&r===1&&(n=Am(n,null,"F"),i=ii(n)),this.indexManager.getDocumentsMatchingTarget(e,i).next(a=>{const s=_e(...a);return this.As.getDocuments(e,s).next(l=>this.indexManager.getMinOffset(e,i).next(u=>{const c=this.ps(n,l);return this.ys(n,c,s,u.readTime)?this.Rs(e,Am(n,null,"F")):this.ws(e,c,n,u)}))})))}Vs(e,n,i,r){return V_(n)||r.isEqual(ue.min())?k.resolve(null):this.As.getDocuments(e,i).next(a=>{const s=this.ps(n,a);return this.ys(n,s,i,r)?k.resolve(null):(Za()<=ve.DEBUG&&Y("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Wa(n)),this.ws(e,s,n,fO(r,Il)).next(l=>l))})}ps(e,n){let i=new Et(MA(e));return n.forEach((r,a)=>{Kh(e,a)&&(i=i.add(a))}),i}ys(e,n,i,r){if(e.limit===null)return!1;if(i.size!==n.size)return!0;const a=e.limitType==="F"?n.last():n.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(r)>0)}fs(e,n,i){return Za()<=ve.DEBUG&&Y("QueryEngine","Using full collection scan to execute query:",Wa(n)),this.As.getDocumentsMatchingQuery(e,n,Vr.min(),i)}ws(e,n,i,r){return this.As.getDocumentsMatchingQuery(e,i,r).next(a=>(n.forEach(s=>{a=a.insert(s.key,s)}),a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const up="LocalStore",GN=3e8;class KN{constructor(e,n,i,r){this.persistence=e,this.bs=n,this.serializer=r,this.Ss=new Je(de),this.Ds=new Na(a=>Wg(a),Jg),this.vs=new Map,this.Cs=e.getRemoteDocumentCache(),this.ai=e.getTargetCache(),this.ci=e.getBundleCache(),this.Fs(i)}Fs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new VN(this.Cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Cs.setIndexManager(this.indexManager),this.bs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ss))}}function QN(t,e,n,i){return new KN(t,e,n,i)}async function tb(t,e){const n=ce(t);return await n.persistence.runTransaction("Handle user change","readonly",i=>{let r;return n.mutationQueue.getAllMutationBatches(i).next(a=>(r=a,n.Fs(e),n.mutationQueue.getAllMutationBatches(i))).next(a=>{const s=[],l=[];let u=_e();for(const c of r){s.push(c.batchId);for(const f of c.mutations)u=u.add(f.key)}for(const c of a){l.push(c.batchId);for(const f of c.mutations)u=u.add(f.key)}return n.localDocuments.getDocuments(i,u).next(c=>({Ms:c,removedBatchIds:s,addedBatchIds:l}))})})}function YN(t,e){const n=ce(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const r=e.batch.keys(),a=n.Cs.newChangeBuffer({trackRemovals:!0});return function(l,u,c,f){const m=c.batch,g=m.keys();let y=k.resolve();return g.forEach(C=>{y=y.next(()=>f.getEntry(u,C)).next(O=>{const M=c.docVersions.get(C);Ce(M!==null,48541),O.version.compareTo(M)<0&&(m.applyToRemoteDocument(O,c),O.isValidDocument()&&(O.setReadTime(c.commitVersion),f.addEntry(O)))})}),y.next(()=>l.mutationQueue.removeMutationBatch(u,m))}(n,i,e,a).next(()=>a.apply(i)).next(()=>n.mutationQueue.performConsistencyCheck(i)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(i,r,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(l){let u=_e();for(let c=0;c<l.mutationResults.length;++c)l.mutationResults[c].transformResults.length>0&&(u=u.add(l.batch.mutations[c].key));return u}(e))).next(()=>n.localDocuments.getDocuments(i,r))})}function nb(t){const e=ce(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.ai.getLastRemoteSnapshotVersion(n))}function XN(t,e){const n=ce(t),i=e.snapshotVersion;let r=n.Ss;return n.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const s=n.Cs.newChangeBuffer({trackRemovals:!0});r=n.Ss;const l=[];e.targetChanges.forEach((f,m)=>{const g=r.get(m);if(!g)return;l.push(n.ai.removeMatchingKeys(a,f.removedDocuments,m).next(()=>n.ai.addMatchingKeys(a,f.addedDocuments,m)));let y=g.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(m)!==null?y=y.withResumeToken(Vt.EMPTY_BYTE_STRING,ue.min()).withLastLimboFreeSnapshotVersion(ue.min()):f.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(f.resumeToken,i)),r=r.insert(m,y),function(O,M,T){return O.resumeToken.approximateByteSize()===0||M.snapshotVersion.toMicroseconds()-O.snapshotVersion.toMicroseconds()>=GN?!0:T.addedDocuments.size+T.modifiedDocuments.size+T.removedDocuments.size>0}(g,y,f)&&l.push(n.ai.updateTargetData(a,y))});let u=ji(),c=_e();if(e.documentUpdates.forEach(f=>{e.resolvedLimboDocuments.has(f)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(a,f))}),l.push($N(a,s,e.documentUpdates).next(f=>{u=f.xs,c=f.Os})),!i.isEqual(ue.min())){const f=n.ai.getLastRemoteSnapshotVersion(a).next(m=>n.ai.setTargetsMetadata(a,a.currentSequenceNumber,i));l.push(f)}return k.waitFor(l).next(()=>s.apply(a)).next(()=>n.localDocuments.getLocalViewOfDocuments(a,u,c)).next(()=>u)}).then(a=>(n.Ss=r,a))}function $N(t,e,n){let i=_e(),r=_e();return n.forEach(a=>i=i.add(a)),e.getEntries(t,i).next(a=>{let s=ji();return n.forEach((l,u)=>{const c=a.get(l);u.isFoundDocument()!==c.isFoundDocument()&&(r=r.add(l)),u.isNoDocument()&&u.version.isEqual(ue.min())?(e.removeEntry(l,u.readTime),s=s.insert(l,u)):!c.isValidDocument()||u.version.compareTo(c.version)>0||u.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(u),s=s.insert(l,u)):Y(up,"Ignoring outdated watch update for ",l,". Current version:",c.version," Watch version:",u.version)}),{xs:s,Os:r}})}function ZN(t,e){const n=ce(t);return n.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=Xg),n.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function WN(t,e){const n=ce(t);return n.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return n.ai.getTargetData(i,e).next(a=>a?(r=a,k.resolve(r)):n.ai.allocateTargetId(i).next(s=>(r=new yr(e,s,"TargetPurposeListen",i.currentSequenceNumber),n.ai.addTargetData(i,r).next(()=>r))))}).then(i=>{const r=n.Ss.get(i.targetId);return(r===null||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ss=n.Ss.insert(i.targetId,i),n.Ds.set(e,i.targetId)),i})}async function Cm(t,e,n){const i=ce(t),r=i.Ss.get(e),a=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",a,s=>i.persistence.referenceDelegate.removeTarget(s,r))}catch(s){if(!io(s))throw s;Y(up,`Failed to update sequence numbers for target ${e}: ${s}`)}i.Ss=i.Ss.remove(e),i.Ds.delete(r.target)}function Q_(t,e,n){const i=ce(t);let r=ue.min(),a=_e();return i.persistence.runTransaction("Execute query","readwrite",s=>function(u,c,f){const m=ce(u),g=m.Ds.get(f);return g!==void 0?k.resolve(m.Ss.get(g)):m.ai.getTargetData(c,f)}(i,s,ii(e)).next(l=>{if(l)return r=l.lastLimboFreeSnapshotVersion,i.ai.getMatchingKeysForTargetId(s,l.targetId).next(u=>{a=u})}).next(()=>i.bs.getDocumentsMatchingQuery(s,e,n?r:ue.min(),n?a:_e())).next(l=>(JN(i,zO(e),l),{documents:l,Ns:a})))}function JN(t,e,n){let i=t.vs.get(e)||ue.min();n.forEach((r,a)=>{a.readTime.compareTo(i)>0&&(i=a.readTime)}),t.vs.set(e,i)}class Y_{constructor(){this.activeTargetIds=GO()}$s(e){this.activeTargetIds=this.activeTargetIds.add(e)}Us(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Qs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class eM{constructor(){this.So=new Y_,this.Do={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,i){}addLocalQueryTarget(e,n=!0){return n&&this.So.$s(e),this.Do[e]||"not-current"}updateQueryState(e,n,i){this.Do[e]=n}removeLocalQueryTarget(e){this.So.Us(e)}isLocalQueryTarget(e){return this.So.activeTargetIds.has(e)}clearQueryState(e){delete this.Do[e]}getAllActiveQueryTargets(){return this.So.activeTargetIds}isActiveQueryTarget(e){return this.So.activeTargetIds.has(e)}start(){return this.So=new Y_,Promise.resolve()}handleUserChange(e,n,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tM{vo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X_="ConnectivityMonitor";class $_{constructor(){this.Co=()=>this.Fo(),this.Mo=()=>this.xo(),this.Oo=[],this.No()}vo(e){this.Oo.push(e)}shutdown(){window.removeEventListener("online",this.Co),window.removeEventListener("offline",this.Mo)}No(){window.addEventListener("online",this.Co),window.addEventListener("offline",this.Mo)}Fo(){Y(X_,"Network connectivity changed: AVAILABLE");for(const e of this.Oo)e(0)}xo(){Y(X_,"Network connectivity changed: UNAVAILABLE");for(const e of this.Oo)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Yu=null;function Dm(){return Yu===null?Yu=function(){return 268435456+Math.round(2147483648*Math.random())}():Yu++,"0x"+Yu.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ld="RestConnection",nM={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class iM{get Bo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Lo=n+"://"+e.host,this.ko=`projects/${i}/databases/${r}`,this.qo=this.databaseId.database===ih?`project_id=${i}`:`project_id=${i}&database_id=${r}`}Qo(e,n,i,r,a){const s=Dm(),l=this.$o(e,n.toUriEncodedString());Y(ld,`Sending RPC '${e}' ${s}:`,l,i);const u={"google-cloud-resource-prefix":this.ko,"x-goog-request-params":this.qo};return this.Uo(u,r,a),this.Ko(e,l,u,i).then(c=>(Y(ld,`Received RPC '${e}' ${s}: `,c),c),c=>{throw zs(ld,`RPC '${e}' ${s} failed with error: `,c,"url: ",l,"request:",i),c})}Wo(e,n,i,r,a,s){return this.Qo(e,n,i,r,a)}Uo(e,n,i){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+to}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((r,a)=>e[a]=r),i&&i.headers.forEach((r,a)=>e[a]=r)}$o(e,n){const i=nM[e];return`${this.Lo}/v1/${n}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rM{constructor(e){this.Go=e.Go,this.zo=e.zo}jo(e){this.Ho=e}Jo(e){this.Yo=e}Zo(e){this.Xo=e}onMessage(e){this.e_=e}close(){this.zo()}send(e){this.Go(e)}t_(){this.Ho()}n_(){this.Yo()}r_(e){this.Xo(e)}i_(e){this.e_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ut="WebChannelConnection";class aM extends iM{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Ko(e,n,i,r){const a=Dm();return new Promise((s,l)=>{const u=new sA;u.setWithCredentials(!0),u.listenOnce(oA.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case cc.NO_ERROR:const f=u.getResponseJson();Y(Ut,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(f)),s(f);break;case cc.TIMEOUT:Y(Ut,`RPC '${e}' ${a} timed out`),l(new te(F.DEADLINE_EXCEEDED,"Request time out"));break;case cc.HTTP_ERROR:const m=u.getStatus();if(Y(Ut,`RPC '${e}' ${a} failed with status:`,m,"response text:",u.getResponseText()),m>0){let g=u.getResponseJson();Array.isArray(g)&&(g=g[0]);const y=g==null?void 0:g.error;if(y&&y.status&&y.message){const C=function(M){const T=M.toLowerCase().replace(/_/g,"-");return Object.values(F).indexOf(T)>=0?T:F.UNKNOWN}(y.status);l(new te(C,y.message))}else l(new te(F.UNKNOWN,"Server responded with status "+u.getStatus()))}else l(new te(F.UNAVAILABLE,"Connection failed."));break;default:ie(9055,{s_:e,streamId:a,o_:u.getLastErrorCode(),__:u.getLastError()})}}finally{Y(Ut,`RPC '${e}' ${a} completed.`)}});const c=JSON.stringify(r);Y(Ut,`RPC '${e}' ${a} sending request:`,r),u.send(n,"POST",c,i,15)})}a_(e,n,i){const r=Dm(),a=[this.Lo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=cA(),l=uA(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(u.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Uo(u.initMessageHeaders,n,i),u.encodeInitMessageHeaders=!0;const f=a.join("");Y(Ut,`Creating RPC '${e}' stream ${r}: ${f}`,u);const m=s.createWebChannel(f,u);let g=!1,y=!1;const C=new rM({Go:M=>{y?Y(Ut,`Not sending because RPC '${e}' stream ${r} is closed:`,M):(g||(Y(Ut,`Opening RPC '${e}' stream ${r} transport.`),m.open(),g=!0),Y(Ut,`RPC '${e}' stream ${r} sending:`,M),m.send(M))},zo:()=>m.close()}),O=(M,T,E)=>{M.listen(T,b=>{try{E(b)}catch(N){setTimeout(()=>{throw N},0)}})};return O(m,jo.EventType.OPEN,()=>{y||(Y(Ut,`RPC '${e}' stream ${r} transport opened.`),C.t_())}),O(m,jo.EventType.CLOSE,()=>{y||(y=!0,Y(Ut,`RPC '${e}' stream ${r} transport closed`),C.r_())}),O(m,jo.EventType.ERROR,M=>{y||(y=!0,zs(Ut,`RPC '${e}' stream ${r} transport errored. Name:`,M.name,"Message:",M.message),C.r_(new te(F.UNAVAILABLE,"The operation could not be completed")))}),O(m,jo.EventType.MESSAGE,M=>{var T;if(!y){const E=M.data[0];Ce(!!E,16349);const b=E,N=(b==null?void 0:b.error)||((T=b[0])===null||T===void 0?void 0:T.error);if(N){Y(Ut,`RPC '${e}' stream ${r} received error:`,N);const j=N.status;let q=function(S){const A=lt[S];if(A!==void 0)return FA(A)}(j),p=N.message;q===void 0&&(q=F.INTERNAL,p="Unknown error status: "+j+" with message "+N.message),y=!0,C.r_(new te(q,p)),m.close()}else Y(Ut,`RPC '${e}' stream ${r} received:`,E),C.i_(E)}}),O(l,lA.STAT_EVENT,M=>{M.stat===ym.PROXY?Y(Ut,`RPC '${e}' stream ${r} detected buffering proxy`):M.stat===ym.NOPROXY&&Y(Ut,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{C.n_()},0),C}}function ud(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $h(t){return new uN(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ib{constructor(e,n,i=1e3,r=1.5,a=6e4){this.bi=e,this.timerId=n,this.u_=i,this.c_=r,this.l_=a,this.h_=0,this.P_=null,this.T_=Date.now(),this.reset()}reset(){this.h_=0}I_(){this.h_=this.l_}E_(e){this.cancel();const n=Math.floor(this.h_+this.d_()),i=Math.max(0,Date.now()-this.T_),r=Math.max(0,n-i);r>0&&Y("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.h_} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.P_=this.bi.enqueueAfterDelay(this.timerId,r,()=>(this.T_=Date.now(),e())),this.h_*=this.c_,this.h_<this.u_&&(this.h_=this.u_),this.h_>this.l_&&(this.h_=this.l_)}A_(){this.P_!==null&&(this.P_.skipDelay(),this.P_=null)}cancel(){this.P_!==null&&(this.P_.cancel(),this.P_=null)}d_(){return(Math.random()-.5)*this.h_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z_="PersistentStream";class rb{constructor(e,n,i,r,a,s,l,u){this.bi=e,this.R_=i,this.V_=r,this.connection=a,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=l,this.listener=u,this.state=0,this.m_=0,this.f_=null,this.g_=null,this.stream=null,this.p_=0,this.y_=new ib(e,n)}w_(){return this.state===1||this.state===5||this.b_()}b_(){return this.state===2||this.state===3}start(){this.p_=0,this.state!==4?this.auth():this.S_()}async stop(){this.w_()&&await this.close(0)}D_(){this.state=0,this.y_.reset()}v_(){this.b_()&&this.f_===null&&(this.f_=this.bi.enqueueAfterDelay(this.R_,6e4,()=>this.C_()))}F_(e){this.M_(),this.stream.send(e)}async C_(){if(this.b_())return this.close(0)}M_(){this.f_&&(this.f_.cancel(),this.f_=null)}x_(){this.g_&&(this.g_.cancel(),this.g_=null)}async close(e,n){this.M_(),this.x_(),this.y_.cancel(),this.m_++,e!==4?this.y_.reset():n&&n.code===F.RESOURCE_EXHAUSTED?(zi(n.toString()),zi("Using maximum backoff delay to prevent overloading the backend."),this.y_.I_()):n&&n.code===F.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.O_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Zo(n)}O_(){}auth(){this.state=1;const e=this.N_(this.m_),n=this.m_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.m_===n&&this.B_(i,r)},i=>{e(()=>{const r=new te(F.UNKNOWN,"Fetching auth token failed: "+i.message);return this.L_(r)})})}B_(e,n){const i=this.N_(this.m_);this.stream=this.k_(e,n),this.stream.jo(()=>{i(()=>this.listener.jo())}),this.stream.Jo(()=>{i(()=>(this.state=2,this.g_=this.bi.enqueueAfterDelay(this.V_,1e4,()=>(this.b_()&&(this.state=3),Promise.resolve())),this.listener.Jo()))}),this.stream.Zo(r=>{i(()=>this.L_(r))}),this.stream.onMessage(r=>{i(()=>++this.p_==1?this.q_(r):this.onNext(r))})}S_(){this.state=5,this.y_.E_(async()=>{this.state=0,this.start()})}L_(e){return Y(Z_,`close with error: ${e}`),this.stream=null,this.close(4,e)}N_(e){return n=>{this.bi.enqueueAndForget(()=>this.m_===e?n():(Y(Z_,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class sM extends rb{constructor(e,n,i,r,a,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,r,s),this.serializer=a}k_(e,n){return this.connection.a_("Listen",e,n)}q_(e){return this.onNext(e)}onNext(e){this.y_.reset();const n=fN(this.serializer,e),i=function(a){if(!("targetChange"in a))return ue.min();const s=a.targetChange;return s.targetIds&&s.targetIds.length?ue.min():s.readTime?ri(s.readTime):ue.min()}(e);return this.listener.Q_(n,i)}U_(e){const n={};n.database=Im(this.serializer),n.addTarget=function(a,s){let l;const u=s.target;if(l=Sm(u)?{documents:gN(a,u)}:{query:pN(a,u).gt},l.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){l.resumeToken=KA(a,s.resumeToken);const c=bm(a,s.expectedCount);c!==null&&(l.expectedCount=c)}else if(s.snapshotVersion.compareTo(ue.min())>0){l.readTime=uh(a,s.snapshotVersion.toTimestamp());const c=bm(a,s.expectedCount);c!==null&&(l.expectedCount=c)}return l}(this.serializer,e);const i=vN(this.serializer,e);i&&(n.labels=i),this.F_(n)}K_(e){const n={};n.database=Im(this.serializer),n.removeTarget=e,this.F_(n)}}class oM extends rb{constructor(e,n,i,r,a,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,r,s),this.serializer=a}get W_(){return this.p_>0}start(){this.lastStreamToken=void 0,super.start()}O_(){this.W_&&this.G_([])}k_(e,n){return this.connection.a_("Write",e,n)}q_(e){return Ce(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ce(!e.writeResults||e.writeResults.length===0,55816),this.listener.z_()}onNext(e){Ce(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.y_.reset();const n=mN(e.writeResults,e.commitTime),i=ri(e.commitTime);return this.listener.j_(i,n)}H_(){const e={};e.database=Im(this.serializer),this.F_(e)}G_(e){const n={streamToken:this.lastStreamToken,writes:e.map(i=>dN(this.serializer,i))};this.F_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lM{}class uM extends lM{constructor(e,n,i,r){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=i,this.serializer=r,this.J_=!1}Y_(){if(this.J_)throw new te(F.FAILED_PRECONDITION,"The client has already been terminated.")}Qo(e,n,i,r){return this.Y_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,s])=>this.connection.Qo(e,wm(n,i),r,a,s)).catch(a=>{throw a.name==="FirebaseError"?(a.code===F.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new te(F.UNKNOWN,a.toString())})}Wo(e,n,i,r,a){return this.Y_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,l])=>this.connection.Wo(e,wm(n,i),r,s,l,a)).catch(s=>{throw s.name==="FirebaseError"?(s.code===F.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new te(F.UNKNOWN,s.toString())})}terminate(){this.J_=!0,this.connection.terminate()}}class cM{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.Z_=0,this.X_=null,this.ea=!0}ta(){this.Z_===0&&(this.na("Unknown"),this.X_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.X_=null,this.ra("Backend didn't respond within 10 seconds."),this.na("Offline"),Promise.resolve())))}ia(e){this.state==="Online"?this.na("Unknown"):(this.Z_++,this.Z_>=1&&(this.sa(),this.ra(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.na("Offline")))}set(e){this.sa(),this.Z_=0,e==="Online"&&(this.ea=!1),this.na(e)}na(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ra(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ea?(zi(n),this.ea=!1):Y("OnlineStateTracker",n)}sa(){this.X_!==null&&(this.X_.cancel(),this.X_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wa="RemoteStore";class hM{constructor(e,n,i,r,a){this.localStore=e,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.oa=[],this._a=new Map,this.aa=new Set,this.ua=[],this.ca=a,this.ca.vo(s=>{i.enqueueAndForget(async()=>{Ma(this)&&(Y(wa,"Restarting streams for network reachability change."),await async function(u){const c=ce(u);c.aa.add(4),await au(c),c.la.set("Unknown"),c.aa.delete(4),await Zh(c)}(this))})}),this.la=new cM(i,r)}}async function Zh(t){if(Ma(t))for(const e of t.ua)await e(!0)}async function au(t){for(const e of t.ua)await e(!1)}function ab(t,e){const n=ce(t);n._a.has(e.targetId)||(n._a.set(e.targetId,e),dp(n)?fp(n):ro(n).b_()&&hp(n,e))}function cp(t,e){const n=ce(t),i=ro(n);n._a.delete(e),i.b_()&&sb(n,e),n._a.size===0&&(i.b_()?i.v_():Ma(n)&&n.la.set("Unknown"))}function hp(t,e){if(t.ha.Ke(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ue.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}ro(t).U_(e)}function sb(t,e){t.ha.Ke(e),ro(t).K_(e)}function fp(t){t.ha=new aN({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),Rt:e=>t._a.get(e)||null,Pt:()=>t.datastore.serializer.databaseId}),ro(t).start(),t.la.ta()}function dp(t){return Ma(t)&&!ro(t).w_()&&t._a.size>0}function Ma(t){return ce(t).aa.size===0}function ob(t){t.ha=void 0}async function fM(t){t.la.set("Online")}async function dM(t){t._a.forEach((e,n)=>{hp(t,e)})}async function mM(t,e){ob(t),dp(t)?(t.la.ia(e),fp(t)):t.la.set("Unknown")}async function gM(t,e,n){if(t.la.set("Online"),e instanceof GA&&e.state===2&&e.cause)try{await async function(r,a){const s=a.cause;for(const l of a.targetIds)r._a.has(l)&&(await r.remoteSyncer.rejectListen(l,s),r._a.delete(l),r.ha.removeTarget(l))}(t,e)}catch(i){Y(wa,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await hh(t,i)}else if(e instanceof mc?t.ha.Xe(e):e instanceof qA?t.ha.ot(e):t.ha.nt(e),!n.isEqual(ue.min()))try{const i=await nb(t.localStore);n.compareTo(i)>=0&&await function(a,s){const l=a.ha.It(s);return l.targetChanges.forEach((u,c)=>{if(u.resumeToken.approximateByteSize()>0){const f=a._a.get(c);f&&a._a.set(c,f.withResumeToken(u.resumeToken,s))}}),l.targetMismatches.forEach((u,c)=>{const f=a._a.get(u);if(!f)return;a._a.set(u,f.withResumeToken(Vt.EMPTY_BYTE_STRING,f.snapshotVersion)),sb(a,u);const m=new yr(f.target,u,c,f.sequenceNumber);hp(a,m)}),a.remoteSyncer.applyRemoteEvent(l)}(t,n)}catch(i){Y(wa,"Failed to raise snapshot:",i),await hh(t,i)}}async function hh(t,e,n){if(!io(e))throw e;t.aa.add(1),await au(t),t.la.set("Offline"),n||(n=()=>nb(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{Y(wa,"Retrying IndexedDB access"),await n(),t.aa.delete(1),await Zh(t)})}function lb(t,e){return e().catch(n=>hh(t,n,e))}async function Wh(t){const e=ce(t),n=kr(e);let i=e.oa.length>0?e.oa[e.oa.length-1].batchId:Xg;for(;pM(e);)try{const r=await ZN(e.localStore,i);if(r===null){e.oa.length===0&&n.v_();break}i=r.batchId,yM(e,r)}catch(r){await hh(e,r)}ub(e)&&cb(e)}function pM(t){return Ma(t)&&t.oa.length<10}function yM(t,e){t.oa.push(e);const n=kr(t);n.b_()&&n.W_&&n.G_(e.mutations)}function ub(t){return Ma(t)&&!kr(t).w_()&&t.oa.length>0}function cb(t){kr(t).start()}async function vM(t){kr(t).H_()}async function _M(t){const e=kr(t);for(const n of t.oa)e.G_(n.mutations)}async function EM(t,e,n){const i=t.oa.shift(),r=ip.from(i,e,n);await lb(t,()=>t.remoteSyncer.applySuccessfulWrite(r)),await Wh(t)}async function TM(t,e){e&&kr(t).W_&&await async function(i,r){if(function(s){return iN(s)&&s!==F.ABORTED}(r.code)){const a=i.oa.shift();kr(i).D_(),await lb(i,()=>i.remoteSyncer.rejectFailedWrite(a.batchId,r)),await Wh(i)}}(t,e),ub(t)&&cb(t)}async function W_(t,e){const n=ce(t);n.asyncQueue.verifyOperationInProgress(),Y(wa,"RemoteStore received new credentials");const i=Ma(n);n.aa.add(3),await au(n),i&&n.la.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.aa.delete(3),await Zh(n)}async function SM(t,e){const n=ce(t);e?(n.aa.delete(2),await Zh(n)):e||(n.aa.add(2),await au(n),n.la.set("Unknown"))}function ro(t){return t.Pa||(t.Pa=function(n,i,r){const a=ce(n);return a.Y_(),new sM(i,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,r)}(t.datastore,t.asyncQueue,{jo:fM.bind(null,t),Jo:dM.bind(null,t),Zo:mM.bind(null,t),Q_:gM.bind(null,t)}),t.ua.push(async e=>{e?(t.Pa.D_(),dp(t)?fp(t):t.la.set("Unknown")):(await t.Pa.stop(),ob(t))})),t.Pa}function kr(t){return t.Ta||(t.Ta=function(n,i,r){const a=ce(n);return a.Y_(),new oM(i,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,r)}(t.datastore,t.asyncQueue,{jo:()=>Promise.resolve(),Jo:vM.bind(null,t),Zo:TM.bind(null,t),z_:_M.bind(null,t),j_:EM.bind(null,t)}),t.ua.push(async e=>{e?(t.Ta.D_(),await Wh(t)):(await t.Ta.stop(),t.oa.length>0&&(Y(wa,`Stopping write stream with ${t.oa.length} pending writes`),t.oa=[]))})),t.Ta}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mp{constructor(e,n,i,r,a){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=i,this.op=r,this.removalCallback=a,this.deferred=new Mi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,i,r,a){const s=Date.now()+i,l=new mp(e,n,s,r,a);return l.start(i),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new te(F.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function gp(t,e){if(zi("AsyncQueue",`${e}: ${t}`),io(t))return new te(F.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ts{static emptySet(e){return new Ts(e.comparator)}constructor(e){this.comparator=e?(n,i)=>e(n,i)||ne.comparator(n.key,i.key):(n,i)=>ne.comparator(n.key,i.key),this.keyedMap=Bo(),this.sortedSet=new Je(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,i)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Ts)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;n.hasNext();){const r=n.getNext().key,a=i.getNext().key;if(!r.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const i=new Ts;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=n,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J_{constructor(){this.Ia=new Je(ne.comparator)}track(e){const n=e.doc.key,i=this.Ia.get(n);i?e.type!==0&&i.type===3?this.Ia=this.Ia.insert(n,e):e.type===3&&i.type!==1?this.Ia=this.Ia.insert(n,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.Ia=this.Ia.insert(n,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.Ia=this.Ia.insert(n,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.Ia=this.Ia.remove(n):e.type===1&&i.type===2?this.Ia=this.Ia.insert(n,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.Ia=this.Ia.insert(n,{type:2,doc:e.doc}):ie(63341,{Vt:e,Ea:i}):this.Ia=this.Ia.insert(n,e)}da(){const e=[];return this.Ia.inorderTraversal((n,i)=>{e.push(i)}),e}}class qs{constructor(e,n,i,r,a,s,l,u,c){this.query=e,this.docs=n,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=a,this.fromCache=s,this.syncStateChanged=l,this.excludesMetadataChanges=u,this.hasCachedResults=c}static fromInitialDocuments(e,n,i,r,a){const s=[];return n.forEach(l=>{s.push({type:0,doc:l})}),new qs(e,n,Ts.emptySet(n),s,i,r,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Gh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,i=e.docChanges;if(n.length!==i.length)return!1;for(let r=0;r<n.length;r++)if(n[r].type!==i[r].type||!n[r].doc.isEqual(i[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AM{constructor(){this.Aa=void 0,this.Ra=[]}Va(){return this.Ra.some(e=>e.ma())}}class bM{constructor(){this.queries=eE(),this.onlineState="Unknown",this.fa=new Set}terminate(){(function(n,i){const r=ce(n),a=r.queries;r.queries=eE(),a.forEach((s,l)=>{for(const u of l.Ra)u.onError(i)})})(this,new te(F.ABORTED,"Firestore shutting down"))}}function eE(){return new Na(t=>NA(t),Gh)}async function hb(t,e){const n=ce(t);let i=3;const r=e.query;let a=n.queries.get(r);a?!a.Va()&&e.ma()&&(i=2):(a=new AM,i=e.ma()?0:1);try{switch(i){case 0:a.Aa=await n.onListen(r,!0);break;case 1:a.Aa=await n.onListen(r,!1);break;case 2:await n.onFirstRemoteStoreListen(r)}}catch(s){const l=gp(s,`Initialization of query '${Wa(e.query)}' failed`);return void e.onError(l)}n.queries.set(r,a),a.Ra.push(e),e.ga(n.onlineState),a.Aa&&e.pa(a.Aa)&&pp(n)}async function fb(t,e){const n=ce(t),i=e.query;let r=3;const a=n.queries.get(i);if(a){const s=a.Ra.indexOf(e);s>=0&&(a.Ra.splice(s,1),a.Ra.length===0?r=e.ma()?0:1:!a.Va()&&e.ma()&&(r=2))}switch(r){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}}function wM(t,e){const n=ce(t);let i=!1;for(const r of e){const a=r.query,s=n.queries.get(a);if(s){for(const l of s.Ra)l.pa(r)&&(i=!0);s.Aa=r}}i&&pp(n)}function RM(t,e,n){const i=ce(t),r=i.queries.get(e);if(r)for(const a of r.Ra)a.onError(n);i.queries.delete(e)}function pp(t){t.fa.forEach(e=>{e.next()})}var Om,tE;(tE=Om||(Om={})).ya="default",tE.Cache="cache";class db{constructor(e,n,i){this.query=e,this.wa=n,this.ba=!1,this.Sa=null,this.onlineState="Unknown",this.options=i||{}}pa(e){if(!this.options.includeMetadataChanges){const i=[];for(const r of e.docChanges)r.type!==3&&i.push(r);e=new qs(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.ba?this.Da(e)&&(this.wa.next(e),n=!0):this.va(e,this.onlineState)&&(this.Ca(e),n=!0),this.Sa=e,n}onError(e){this.wa.error(e)}ga(e){this.onlineState=e;let n=!1;return this.Sa&&!this.ba&&this.va(this.Sa,e)&&(this.Ca(this.Sa),n=!0),n}va(e,n){if(!e.fromCache||!this.ma())return!0;const i=n!=="Offline";return(!this.options.Fa||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Da(e){if(e.docChanges.length>0)return!0;const n=this.Sa&&this.Sa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}Ca(e){e=qs.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ba=!0,this.wa.next(e)}ma(){return this.options.source!==Om.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mb{constructor(e){this.key=e}}class gb{constructor(e){this.key=e}}class IM{constructor(e,n){this.query=e,this.qa=n,this.Qa=null,this.hasCachedResults=!1,this.current=!1,this.$a=_e(),this.mutatedKeys=_e(),this.Ua=MA(e),this.Ka=new Ts(this.Ua)}get Wa(){return this.qa}Ga(e,n){const i=n?n.za:new J_,r=n?n.Ka:this.Ka;let a=n?n.mutatedKeys:this.mutatedKeys,s=r,l=!1;const u=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,c=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((f,m)=>{const g=r.get(f),y=Kh(this.query,m)?m:null,C=!!g&&this.mutatedKeys.has(g.key),O=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations);let M=!1;g&&y?g.data.isEqual(y.data)?C!==O&&(i.track({type:3,doc:y}),M=!0):this.ja(g,y)||(i.track({type:2,doc:y}),M=!0,(u&&this.Ua(y,u)>0||c&&this.Ua(y,c)<0)&&(l=!0)):!g&&y?(i.track({type:0,doc:y}),M=!0):g&&!y&&(i.track({type:1,doc:g}),M=!0,(u||c)&&(l=!0)),M&&(y?(s=s.add(y),a=O?a.add(f):a.delete(f)):(s=s.delete(f),a=a.delete(f)))}),this.query.limit!==null)for(;s.size>this.query.limit;){const f=this.query.limitType==="F"?s.last():s.first();s=s.delete(f.key),a=a.delete(f.key),i.track({type:1,doc:f})}return{Ka:s,za:i,ys:l,mutatedKeys:a}}ja(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,i,r){const a=this.Ka;this.Ka=e.Ka,this.mutatedKeys=e.mutatedKeys;const s=e.za.da();s.sort((f,m)=>function(y,C){const O=M=>{switch(M){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ie(20277,{Vt:M})}};return O(y)-O(C)}(f.type,m.type)||this.Ua(f.doc,m.doc)),this.Ha(i),r=r!=null&&r;const l=n&&!r?this.Ja():[],u=this.$a.size===0&&this.current&&!r?1:0,c=u!==this.Qa;return this.Qa=u,s.length!==0||c?{snapshot:new qs(this.query,e.Ka,a,s,e.mutatedKeys,u===0,c,!1,!!i&&i.resumeToken.approximateByteSize()>0),Ya:l}:{Ya:l}}ga(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ka:this.Ka,za:new J_,mutatedKeys:this.mutatedKeys,ys:!1},!1)):{Ya:[]}}Za(e){return!this.qa.has(e)&&!!this.Ka.has(e)&&!this.Ka.get(e).hasLocalMutations}Ha(e){e&&(e.addedDocuments.forEach(n=>this.qa=this.qa.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.qa=this.qa.delete(n)),this.current=e.current)}Ja(){if(!this.current)return[];const e=this.$a;this.$a=_e(),this.Ka.forEach(i=>{this.Za(i.key)&&(this.$a=this.$a.add(i.key))});const n=[];return e.forEach(i=>{this.$a.has(i)||n.push(new gb(i))}),this.$a.forEach(i=>{e.has(i)||n.push(new mb(i))}),n}Xa(e){this.qa=e.Ns,this.$a=_e();const n=this.Ga(e.documents);return this.applyChanges(n,!0)}eu(){return qs.fromInitialDocuments(this.query,this.Ka,this.mutatedKeys,this.Qa===0,this.hasCachedResults)}}const yp="SyncEngine";class CM{constructor(e,n,i){this.query=e,this.targetId=n,this.view=i}}class DM{constructor(e){this.key=e,this.tu=!1}}class OM{constructor(e,n,i,r,a,s){this.localStore=e,this.remoteStore=n,this.eventManager=i,this.sharedClientState=r,this.currentUser=a,this.maxConcurrentLimboResolutions=s,this.nu={},this.ru=new Na(l=>NA(l),Gh),this.iu=new Map,this.su=new Set,this.ou=new Je(ne.comparator),this._u=new Map,this.au=new sp,this.uu={},this.cu=new Map,this.lu=Fs.ir(),this.onlineState="Unknown",this.hu=void 0}get isPrimaryClient(){return this.hu===!0}}async function NM(t,e,n=!0){const i=Tb(t);let r;const a=i.ru.get(e);return a?(i.sharedClientState.addLocalQueryTarget(a.targetId),r=a.view.eu()):r=await pb(i,e,n,!0),r}async function MM(t,e){const n=Tb(t);await pb(n,e,!0,!1)}async function pb(t,e,n,i){const r=await WN(t.localStore,ii(e)),a=r.targetId,s=t.sharedClientState.addLocalQueryTarget(a,n);let l;return i&&(l=await xM(t,e,a,s==="current",r.resumeToken)),t.isPrimaryClient&&n&&ab(t.remoteStore,r),l}async function xM(t,e,n,i,r){t.Pu=(m,g,y)=>async function(O,M,T,E){let b=M.view.Ga(T);b.ys&&(b=await Q_(O.localStore,M.query,!1).then(({documents:p})=>M.view.Ga(p,b)));const N=E&&E.targetChanges.get(M.targetId),j=E&&E.targetMismatches.get(M.targetId)!=null,q=M.view.applyChanges(b,O.isPrimaryClient,N,j);return iE(O,M.targetId,q.Ya),q.snapshot}(t,m,g,y);const a=await Q_(t.localStore,e,!0),s=new IM(e,a.Ns),l=s.Ga(a.documents),u=ru.createSynthesizedTargetChangeForCurrentChange(n,i&&t.onlineState!=="Offline",r),c=s.applyChanges(l,t.isPrimaryClient,u);iE(t,n,c.Ya);const f=new CM(e,n,s);return t.ru.set(e,f),t.iu.has(n)?t.iu.get(n).push(e):t.iu.set(n,[e]),c.snapshot}async function VM(t,e,n){const i=ce(t),r=i.ru.get(e),a=i.iu.get(r.targetId);if(a.length>1)return i.iu.set(r.targetId,a.filter(s=>!Gh(s,e))),void i.ru.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(r.targetId),i.sharedClientState.isActiveQueryTarget(r.targetId)||await Cm(i.localStore,r.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(r.targetId),n&&cp(i.remoteStore,r.targetId),Nm(i,r.targetId)}).catch(no)):(Nm(i,r.targetId),await Cm(i.localStore,r.targetId,!0))}async function PM(t,e){const n=ce(t),i=n.ru.get(e),r=n.iu.get(i.targetId);n.isPrimaryClient&&r.length===1&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),cp(n.remoteStore,i.targetId))}async function LM(t,e,n){const i=FM(t);try{const r=await function(s,l){const u=ce(s),c=_t.now(),f=l.reduce((y,C)=>y.add(C.key),_e());let m,g;return u.persistence.runTransaction("Locally write mutations","readwrite",y=>{let C=ji(),O=_e();return u.Cs.getEntries(y,f).next(M=>{C=M,C.forEach((T,E)=>{E.isValidDocument()||(O=O.add(T))})}).next(()=>u.localDocuments.getOverlayedDocuments(y,C)).next(M=>{m=M;const T=[];for(const E of l){const b=WO(E,m.get(E.key).overlayedDocument);b!=null&&T.push(new Gr(E.key,b,bA(b.value.mapValue),Bn.exists(!0)))}return u.mutationQueue.addMutationBatch(y,c,T,l)}).next(M=>{g=M;const T=M.applyToLocalDocumentSet(m,O);return u.documentOverlayCache.saveOverlays(y,M.batchId,T)})}).then(()=>({batchId:g.batchId,changes:VA(m)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(r.batchId),function(s,l,u){let c=s.uu[s.currentUser.toKey()];c||(c=new Je(de)),c=c.insert(l,u),s.uu[s.currentUser.toKey()]=c}(i,r.batchId,n),await su(i,r.changes),await Wh(i.remoteStore)}catch(r){const a=gp(r,"Failed to persist write");n.reject(a)}}async function yb(t,e){const n=ce(t);try{const i=await XN(n.localStore,e);e.targetChanges.forEach((r,a)=>{const s=n._u.get(a);s&&(Ce(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1,22616),r.addedDocuments.size>0?s.tu=!0:r.modifiedDocuments.size>0?Ce(s.tu,14607):r.removedDocuments.size>0&&(Ce(s.tu,42227),s.tu=!1))}),await su(n,i,e)}catch(i){await no(i)}}function nE(t,e,n){const i=ce(t);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){const r=[];i.ru.forEach((a,s)=>{const l=s.view.ga(e);l.snapshot&&r.push(l.snapshot)}),function(s,l){const u=ce(s);u.onlineState=l;let c=!1;u.queries.forEach((f,m)=>{for(const g of m.Ra)g.ga(l)&&(c=!0)}),c&&pp(u)}(i.eventManager,e),r.length&&i.nu.Q_(r),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function UM(t,e,n){const i=ce(t);i.sharedClientState.updateQueryState(e,"rejected",n);const r=i._u.get(e),a=r&&r.key;if(a){let s=new Je(ne.comparator);s=s.insert(a,zt.newNoDocument(a,ue.min()));const l=_e().add(a),u=new Xh(ue.min(),new Map,new Je(de),s,l);await yb(i,u),i.ou=i.ou.remove(a),i._u.delete(e),vp(i)}else await Cm(i.localStore,e,!1).then(()=>Nm(i,e,n)).catch(no)}async function kM(t,e){const n=ce(t),i=e.batch.batchId;try{const r=await YN(n.localStore,e);_b(n,i,null),vb(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await su(n,r)}catch(r){await no(r)}}async function zM(t,e,n){const i=ce(t);try{const r=await function(s,l){const u=ce(s);return u.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let f;return u.mutationQueue.lookupMutationBatch(c,l).next(m=>(Ce(m!==null,37113),f=m.keys(),u.mutationQueue.removeMutationBatch(c,m))).next(()=>u.mutationQueue.performConsistencyCheck(c)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(c,f,l)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,f)).next(()=>u.localDocuments.getDocuments(c,f))})}(i.localStore,e);_b(i,e,n),vb(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),await su(i,r)}catch(r){await no(r)}}function vb(t,e){(t.cu.get(e)||[]).forEach(n=>{n.resolve()}),t.cu.delete(e)}function _b(t,e,n){const i=ce(t);let r=i.uu[i.currentUser.toKey()];if(r){const a=r.get(e);a&&(n?a.reject(n):a.resolve(),r=r.remove(e)),i.uu[i.currentUser.toKey()]=r}}function Nm(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const i of t.iu.get(e))t.ru.delete(i),n&&t.nu.Tu(i,n);t.iu.delete(e),t.isPrimaryClient&&t.au.Ur(e).forEach(i=>{t.au.containsKey(i)||Eb(t,i)})}function Eb(t,e){t.su.delete(e.path.canonicalString());const n=t.ou.get(e);n!==null&&(cp(t.remoteStore,n),t.ou=t.ou.remove(e),t._u.delete(n),vp(t))}function iE(t,e,n){for(const i of n)i instanceof mb?(t.au.addReference(i.key,e),jM(t,i)):i instanceof gb?(Y(yp,"Document no longer in limbo: "+i.key),t.au.removeReference(i.key,e),t.au.containsKey(i.key)||Eb(t,i.key)):ie(19791,{Iu:i})}function jM(t,e){const n=e.key,i=n.path.canonicalString();t.ou.get(n)||t.su.has(i)||(Y(yp,"New document in limbo: "+n),t.su.add(i),vp(t))}function vp(t){for(;t.su.size>0&&t.ou.size<t.maxConcurrentLimboResolutions;){const e=t.su.values().next().value;t.su.delete(e);const n=new ne(Ye.fromString(e)),i=t.lu.next();t._u.set(i,new DM(n)),t.ou=t.ou.insert(n,i),ab(t.remoteStore,new yr(ii(ep(n.path)),i,"TargetPurposeLimboResolution",Bh.le))}}async function su(t,e,n){const i=ce(t),r=[],a=[],s=[];i.ru.isEmpty()||(i.ru.forEach((l,u)=>{s.push(i.Pu(u,e,n).then(c=>{var f;if((c||n)&&i.isPrimaryClient){const m=c?!c.fromCache:(f=n==null?void 0:n.targetChanges.get(u.targetId))===null||f===void 0?void 0:f.current;i.sharedClientState.updateQueryState(u.targetId,m?"current":"not-current")}if(c){r.push(c);const m=lp.Ps(u.targetId,c);a.push(m)}}))}),await Promise.all(s),i.nu.Q_(r),await async function(u,c){const f=ce(u);try{await f.persistence.runTransaction("notifyLocalViewChanges","readwrite",m=>k.forEach(c,g=>k.forEach(g.ls,y=>f.persistence.referenceDelegate.addReference(m,g.targetId,y)).next(()=>k.forEach(g.hs,y=>f.persistence.referenceDelegate.removeReference(m,g.targetId,y)))))}catch(m){if(!io(m))throw m;Y(up,"Failed to update sequence numbers: "+m)}for(const m of c){const g=m.targetId;if(!m.fromCache){const y=f.Ss.get(g),C=y.snapshotVersion,O=y.withLastLimboFreeSnapshotVersion(C);f.Ss=f.Ss.insert(g,O)}}}(i.localStore,a))}async function BM(t,e){const n=ce(t);if(!n.currentUser.isEqual(e)){Y(yp,"User change. New user:",e.toKey());const i=await tb(n.localStore,e);n.currentUser=e,function(a,s){a.cu.forEach(l=>{l.forEach(u=>{u.reject(new te(F.CANCELLED,s))})}),a.cu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await su(n,i.Ms)}}function HM(t,e){const n=ce(t),i=n._u.get(e);if(i&&i.tu)return _e().add(i.key);{let r=_e();const a=n.iu.get(e);if(!a)return r;for(const s of a){const l=n.ru.get(s);r=r.unionWith(l.view.Wa)}return r}}function Tb(t){const e=ce(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=yb.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=HM.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=UM.bind(null,e),e.nu.Q_=wM.bind(null,e.eventManager),e.nu.Tu=RM.bind(null,e.eventManager),e}function FM(t){const e=ce(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=kM.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=zM.bind(null,e),e}class fh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=$h(e.databaseInfo.databaseId),this.sharedClientState=this.Au(e),this.persistence=this.Ru(e),await this.persistence.start(),this.localStore=this.Vu(e),this.gcScheduler=this.mu(e,this.localStore),this.indexBackfillerScheduler=this.fu(e,this.localStore)}mu(e,n){return null}fu(e,n){return null}Vu(e){return QN(this.persistence,new qN,e.initialUser,this.serializer)}Ru(e){return new eb(op.Ei,this.serializer)}Au(e){return new eM}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}fh.provider={build:()=>new fh};class qM extends fh{constructor(e){super(),this.cacheSizeBytes=e}mu(e,n){Ce(this.persistence.referenceDelegate instanceof ch,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new DN(i,e.asyncQueue,n)}Ru(e){const n=this.cacheSizeBytes!==void 0?Jt.withCacheSize(this.cacheSizeBytes):Jt.DEFAULT;return new eb(i=>ch.Ei(i,n),this.serializer)}}class Mm{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>nE(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=BM.bind(null,this.syncEngine),await SM(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new bM}()}createDatastore(e){const n=$h(e.databaseInfo.databaseId),i=function(a){return new aM(a)}(e.databaseInfo);return function(a,s,l,u){return new uM(a,s,l,u)}(e.authCredentials,e.appCheckCredentials,i,n)}createRemoteStore(e){return function(i,r,a,s,l){return new hM(i,r,a,s,l)}(this.localStore,this.datastore,e.asyncQueue,n=>nE(this.syncEngine,n,0),function(){return $_.C()?new $_:new tM}())}createSyncEngine(e,n){return function(r,a,s,l,u,c,f){const m=new OM(r,a,s,l,u,c);return f&&(m.hu=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(r){const a=ce(r);Y(wa,"RemoteStore shutting down."),a.aa.add(5),await au(a),a.ca.shutdown(),a.la.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Mm.provider={build:()=>new Mm};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sb{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.pu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.pu(this.observer.error,e):zi("Uncaught Error in snapshot listener:",e.toString()))}yu(){this.muted=!0}pu(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zr="FirestoreClient";class GM{constructor(e,n,i,r,a){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=r,this.user=kt.UNAUTHENTICATED,this.clientId=mA.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(i,async s=>{Y(zr,"Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(i,s=>(Y(zr,"Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Mi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const i=gp(n,"Failed to shutdown persistence");e.reject(i)}}),e.promise}}async function cd(t,e){t.asyncQueue.verifyOperationInProgress(),Y(zr,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let i=n.initialUser;t.setCredentialChangeListener(async r=>{i.isEqual(r)||(await tb(e.localStore,r),i=r)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function rE(t,e){t.asyncQueue.verifyOperationInProgress();const n=await KM(t);Y(zr,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(i=>W_(e.remoteStore,i)),t.setAppCheckTokenChangeListener((i,r)=>W_(e.remoteStore,r)),t._onlineComponents=e}async function KM(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Y(zr,"Using user provided OfflineComponentProvider");try{await cd(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(r){return r.name==="FirebaseError"?r.code===F.FAILED_PRECONDITION||r.code===F.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11}(n))throw n;zs("Error using user provided cache. Falling back to memory cache: "+n),await cd(t,new fh)}}else Y(zr,"Using default OfflineComponentProvider"),await cd(t,new qM(void 0));return t._offlineComponents}async function Ab(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Y(zr,"Using user provided OnlineComponentProvider"),await rE(t,t._uninitializedComponentsProvider._online)):(Y(zr,"Using default OnlineComponentProvider"),await rE(t,new Mm))),t._onlineComponents}function QM(t){return Ab(t).then(e=>e.syncEngine)}async function bb(t){const e=await Ab(t),n=e.eventManager;return n.onListen=NM.bind(null,e.syncEngine),n.onUnlisten=VM.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=MM.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=PM.bind(null,e.syncEngine),n}function YM(t,e,n={}){const i=new Mi;return t.asyncQueue.enqueueAndForget(async()=>function(a,s,l,u,c){const f=new Sb({next:g=>{f.yu(),s.enqueueAndForget(()=>fb(a,m));const y=g.docs.has(l);!y&&g.fromCache?c.reject(new te(F.UNAVAILABLE,"Failed to get document because the client is offline.")):y&&g.fromCache&&u&&u.source==="server"?c.reject(new te(F.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(g)},error:g=>c.reject(g)}),m=new db(ep(l.path),f,{includeMetadataChanges:!0,Fa:!0});return hb(a,m)}(await bb(t),t.asyncQueue,e,n,i)),i.promise}function XM(t,e,n={}){const i=new Mi;return t.asyncQueue.enqueueAndForget(async()=>function(a,s,l,u,c){const f=new Sb({next:g=>{f.yu(),s.enqueueAndForget(()=>fb(a,m)),g.fromCache&&u.source==="server"?c.reject(new te(F.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(g)},error:g=>c.reject(g)}),m=new db(l,f,{includeMetadataChanges:!0,Fa:!0});return hb(a,m)}(await bb(t),t.asyncQueue,e,n,i)),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wb(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aE=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rb(t,e,n){if(!n)throw new te(F.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function $M(t,e,n,i){if(e===!0&&i===!0)throw new te(F.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function sE(t){if(!ne.isDocumentKey(t))throw new te(F.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function oE(t){if(ne.isDocumentKey(t))throw new te(F.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function _p(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(i){return i.constructor?i.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ie(12329,{type:typeof t})}function Bi(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new te(F.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=_p(t);throw new te(F.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ib="firestore.googleapis.com",lE=!0;class uE{constructor(e){var n,i;if(e.host===void 0){if(e.ssl!==void 0)throw new te(F.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Ib,this.ssl=lE}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:lE;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=JA;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<IN)throw new te(F.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}$M("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=wb((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(a){if(a.timeoutSeconds!==void 0){if(isNaN(a.timeoutSeconds))throw new te(F.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new te(F.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new te(F.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(i,r){return i.timeoutSeconds===r.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Jh{constructor(e,n,i,r){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new uE({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new te(F.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new te(F.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new uE(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new iO;switch(i.type){case"firstParty":return new oO(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new te(F.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const i=aE.get(n);i&&(Y("ComponentProvider","Removing Datastore"),aE.delete(n),i.terminate())}(this),Promise.resolve()}}function ZM(t,e,n,i={}){var r;const a=(t=Bi(t,Jh))._getSettings(),s=Object.assign(Object.assign({},a),{emulatorOptions:t._getEmulatorOptions()}),l=`${e}:${n}`;a.host!==Ib&&a.host!==l&&zs("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const u=Object.assign(Object.assign({},a),{host:l,ssl:!1,emulatorOptions:i});if(!Sa(u,s)&&(t._setSettings(u),i.mockUserToken)){let c,f;if(typeof i.mockUserToken=="string")c=i.mockUserToken,f=kt.MOCK_USER;else{c=MD(i.mockUserToken,(r=t._app)===null||r===void 0?void 0:r.options.projectId);const m=i.mockUserToken.sub||i.mockUserToken.user_id;if(!m)throw new te(F.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new kt(m)}t._authCredentials=new rO(new fA(c,f))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ef{constructor(e,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new ef(this.firestore,e,this._query)}}class vn{constructor(e,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Or(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new vn(this.firestore,e,this._key)}}class Or extends ef{constructor(e,n,i){super(e,n,ep(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new vn(this.firestore,null,new ne(e))}withConverter(e){return new Or(this.firestore,e,this._path)}}function Cb(t,e,...n){if(t=Ft(t),Rb("collection","path",e),t instanceof Jh){const i=Ye.fromString(e,...n);return oE(i),new Or(t,null,i)}{if(!(t instanceof vn||t instanceof Or))throw new te(F.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(Ye.fromString(e,...n));return oE(i),new Or(t.firestore,null,i)}}function dh(t,e,...n){if(t=Ft(t),arguments.length===1&&(e=mA.newId()),Rb("doc","path",e),t instanceof Jh){const i=Ye.fromString(e,...n);return sE(i),new vn(t,null,new ne(i))}{if(!(t instanceof vn||t instanceof Or))throw new te(F.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(Ye.fromString(e,...n));return sE(i),new vn(t.firestore,t instanceof Or?t.converter:null,new ne(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cE="AsyncQueue";class hE{constructor(e=Promise.resolve()){this.Qu=[],this.$u=!1,this.Uu=[],this.Ku=null,this.Wu=!1,this.Gu=!1,this.zu=[],this.y_=new ib(this,"async_queue_retry"),this.ju=()=>{const i=ud();i&&Y(cE,"Visibility state changed to "+i.visibilityState),this.y_.A_()},this.Hu=e;const n=ud();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.ju)}get isShuttingDown(){return this.$u}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Ju(),this.Yu(e)}enterRestrictedMode(e){if(!this.$u){this.$u=!0,this.Gu=e||!1;const n=ud();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.ju)}}enqueue(e){if(this.Ju(),this.$u)return new Promise(()=>{});const n=new Mi;return this.Yu(()=>this.$u&&this.Gu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Qu.push(e),this.Zu()))}async Zu(){if(this.Qu.length!==0){try{await this.Qu[0](),this.Qu.shift(),this.y_.reset()}catch(e){if(!io(e))throw e;Y(cE,"Operation failed with retryable error: "+e)}this.Qu.length>0&&this.y_.E_(()=>this.Zu())}}Yu(e){const n=this.Hu.then(()=>(this.Wu=!0,e().catch(i=>{throw this.Ku=i,this.Wu=!1,zi("INTERNAL UNHANDLED ERROR: ",fE(i)),i}).then(i=>(this.Wu=!1,i))));return this.Hu=n,n}enqueueAfterDelay(e,n,i){this.Ju(),this.zu.indexOf(e)>-1&&(n=0);const r=mp.createAndSchedule(this,e,n,i,a=>this.Xu(a));return this.Uu.push(r),r}Ju(){this.Ku&&ie(47125,{ec:fE(this.Ku)})}verifyOperationInProgress(){}async tc(){let e;do e=this.Hu,await e;while(e!==this.Hu)}nc(e){for(const n of this.Uu)if(n.timerId===e)return!0;return!1}rc(e){return this.tc().then(()=>{this.Uu.sort((n,i)=>n.targetTimeMs-i.targetTimeMs);for(const n of this.Uu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.tc()})}sc(e){this.zu.push(e)}Xu(e){const n=this.Uu.indexOf(e);this.Uu.splice(n,1)}}function fE(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class ao extends Jh{constructor(e,n,i,r){super(e,n,i,r),this.type="firestore",this._queue=new hE,this._persistenceKey=(r==null?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new hE(e),this._firestoreClient=void 0,await e}}}function WM(t,e){const n=typeof t=="object"?t:nA(),i=typeof t=="string"?t:ih,r=Qg(n,"firestore").getImmediate({identifier:i});if(!r._initialized){const a=OD("firestore");a&&ZM(r,...a)}return r}function Ep(t){if(t._terminated)throw new te(F.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||JM(t),t._firestoreClient}function JM(t){var e,n,i;const r=t._freezeSettings(),a=function(l,u,c,f){return new SO(l,u,c,f.host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,wb(f.experimentalLongPollingOptions),f.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,r);t._componentsProvider||!((n=r.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((i=r.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(t._componentsProvider={_offline:r.localCache._offlineComponentProvider,_online:r.localCache._onlineComponentProvider}),t._firestoreClient=new GM(t._authCredentials,t._appCheckCredentials,t._queue,a,t._componentsProvider&&function(l){const u=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(u),_online:u}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gs{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Gs(Vt.fromBase64String(e))}catch(n){throw new te(F.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Gs(Vt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tf{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new te(F.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Mt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tp{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sp{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new te(F.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new te(F.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return de(this._lat,e._lat)||de(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ap{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(i,r){if(i.length!==r.length)return!1;for(let a=0;a<i.length;++a)if(i[a]!==r[a])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ex=/^__.*__$/;class tx{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return this.fieldMask!==null?new Gr(e,this.data,this.fieldMask,n,this.fieldTransforms):new iu(e,this.data,n,this.fieldTransforms)}}class Db{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return new Gr(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function Ob(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ie(40011,{oc:t})}}class bp{constructor(e,n,i,r,a,s){this.settings=e,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=r,a===void 0&&this._c(),this.fieldTransforms=a||[],this.fieldMask=s||[]}get path(){return this.settings.path}get oc(){return this.settings.oc}ac(e){return new bp(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}uc(e){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(e),r=this.ac({path:i,cc:!1});return r.lc(e),r}hc(e){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(e),r=this.ac({path:i,cc:!1});return r._c(),r}Pc(e){return this.ac({path:void 0,cc:!0})}Tc(e){return mh(e,this.settings.methodName,this.settings.Ic||!1,this.path,this.settings.Ec)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}_c(){if(this.path)for(let e=0;e<this.path.length;e++)this.lc(this.path.get(e))}lc(e){if(e.length===0)throw this.Tc("Document fields must not be empty");if(Ob(this.oc)&&ex.test(e))throw this.Tc('Document fields cannot begin and end with "__"')}}class nx{constructor(e,n,i){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=i||$h(e)}dc(e,n,i,r=!1){return new bp({oc:e,methodName:n,Ec:i,path:Mt.emptyPath(),cc:!1,Ic:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Nb(t){const e=t._freezeSettings(),n=$h(t._databaseId);return new nx(t._databaseId,!!e.ignoreUndefinedProperties,n)}function ix(t,e,n,i,r,a={}){const s=t.dc(a.merge||a.mergeFields?2:0,e,n,r);wp("Data must be an object, but it was:",s,i);const l=Mb(i,s);let u,c;if(a.merge)u=new dn(s.fieldMask),c=s.fieldTransforms;else if(a.mergeFields){const f=[];for(const m of a.mergeFields){const g=xm(e,m,n);if(!s.contains(g))throw new te(F.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);Vb(f,g)||f.push(g)}u=new dn(f),c=s.fieldTransforms.filter(m=>u.covers(m.field))}else u=null,c=s.fieldTransforms;return new tx(new en(l),u,c)}class nf extends Tp{_toFieldTransform(e){if(e.oc!==2)throw e.oc===1?e.Tc(`${this._methodName}() can only appear at the top level of your update data`):e.Tc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof nf}}function rx(t,e,n,i){const r=t.dc(1,e,n);wp("Data must be an object, but it was:",r,i);const a=[],s=en.empty();qr(i,(u,c)=>{const f=Rp(e,u,n);c=Ft(c);const m=r.hc(f);if(c instanceof nf)a.push(f);else{const g=rf(c,m);g!=null&&(a.push(f),s.set(f,g))}});const l=new dn(a);return new Db(s,l,r.fieldTransforms)}function ax(t,e,n,i,r,a){const s=t.dc(1,e,n),l=[xm(e,i,n)],u=[r];if(a.length%2!=0)throw new te(F.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<a.length;g+=2)l.push(xm(e,a[g])),u.push(a[g+1]);const c=[],f=en.empty();for(let g=l.length-1;g>=0;--g)if(!Vb(c,l[g])){const y=l[g];let C=u[g];C=Ft(C);const O=s.hc(y);if(C instanceof nf)c.push(y);else{const M=rf(C,O);M!=null&&(c.push(y),f.set(y,M))}}const m=new dn(c);return new Db(f,m,s.fieldTransforms)}function rf(t,e){if(xb(t=Ft(t)))return wp("Unsupported field value:",e,t),Mb(t,e);if(t instanceof Tp)return function(i,r){if(!Ob(r.oc))throw r.Tc(`${i._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Tc(`${i._methodName}() is not currently supported inside arrays`);const a=i._toFieldTransform(r);a&&r.fieldTransforms.push(a)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.cc&&e.oc!==4)throw e.Tc("Nested arrays are not supported");return function(i,r){const a=[];let s=0;for(const l of i){let u=rf(l,r.Pc(s));u==null&&(u={nullValue:"NULL_VALUE"}),a.push(u),s++}return{arrayValue:{values:a}}}(t,e)}return function(i,r){if((i=Ft(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return KO(r.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const a=_t.fromDate(i);return{timestampValue:uh(r.serializer,a)}}if(i instanceof _t){const a=new _t(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:uh(r.serializer,a)}}if(i instanceof Sp)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Gs)return{bytesValue:KA(r.serializer,i._byteString)};if(i instanceof vn){const a=r.databaseId,s=i.firestore._databaseId;if(!s.isEqual(a))throw r.Tc(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:ap(i.firestore._databaseId||r.databaseId,i._key.path)}}if(i instanceof Ap)return function(s,l){return{mapValue:{fields:{[SA]:{stringValue:AA},[rh]:{arrayValue:{values:s.toArray().map(c=>{if(typeof c!="number")throw l.Tc("VectorValues must only contain numeric values.");return tp(l.serializer,c)})}}}}}}(i,r);throw r.Tc(`Unsupported field value: ${_p(i)}`)}(t,e)}function Mb(t,e){const n={};return pA(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):qr(t,(i,r)=>{const a=rf(r,e.uc(i));a!=null&&(n[i]=a)}),{mapValue:{fields:n}}}function xb(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof _t||t instanceof Sp||t instanceof Gs||t instanceof vn||t instanceof Tp||t instanceof Ap)}function wp(t,e,n){if(!xb(n)||!function(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}(n)){const i=_p(n);throw i==="an object"?e.Tc(t+" a custom object"):e.Tc(t+" "+i)}}function xm(t,e,n){if((e=Ft(e))instanceof tf)return e._internalPath;if(typeof e=="string")return Rp(t,e);throw mh("Field path arguments must be of type string or ",t,!1,void 0,n)}const sx=new RegExp("[~\\*/\\[\\]]");function Rp(t,e,n){if(e.search(sx)>=0)throw mh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new tf(...e.split("."))._internalPath}catch{throw mh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function mh(t,e,n,i,r){const a=i&&!i.isEmpty(),s=r!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let u="";return(a||s)&&(u+=" (found",a&&(u+=` in field ${i}`),s&&(u+=` in document ${r}`),u+=")"),new te(F.INVALID_ARGUMENT,l+t+u)}function Vb(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pb{constructor(e,n,i,r,a){this._firestore=e,this._userDataWriter=n,this._key=i,this._document=r,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new vn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new ox(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Lb("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class ox extends Pb{data(){return super.data()}}function Lb(t,e){return typeof e=="string"?Rp(t,e):e instanceof tf?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lx(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new te(F.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class ux{convertValue(e,n="none"){switch(Ur(e)){case 0:return null;case 1:return e.booleanValue;case 2:return st(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Lr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw ie(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const i={};return qr(e,(r,a)=>{i[r]=this.convertValue(a,n)}),i}convertVectorValue(e){var n,i,r;const a=(r=(i=(n=e.fields)===null||n===void 0?void 0:n[rh].arrayValue)===null||i===void 0?void 0:i.values)===null||r===void 0?void 0:r.map(s=>st(s.doubleValue));return new Ap(a)}convertGeoPoint(e){return new Sp(st(e.latitude),st(e.longitude))}convertArray(e,n){return(e.values||[]).map(i=>this.convertValue(i,n))}convertServerTimestamp(e,n){switch(n){case"previous":const i=Fh(e);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(Cl(e));default:return null}}convertTimestamp(e){const n=Pr(e);return new _t(n.seconds,n.nanos)}convertDocumentKey(e,n){const i=Ye.fromString(e);Ce(WA(i),9688,{name:e});const r=new Dl(i.get(1),i.get(3)),a=new ne(i.popFirst(5));return r.isEqual(n)||zi(`Document ${a} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cx(t,e,n){let i;return i=t?t.toFirestore(e):e,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fo{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ub extends Pb{constructor(e,n,i,r,a,s){super(e,n,i,r,s),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new gc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const i=this._document.data.field(Lb("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}}class gc extends Ub{data(e={}){return super.data(e)}}class hx{constructor(e,n,i,r){this._firestore=e,this._userDataWriter=n,this._snapshot=r,this.metadata=new Fo(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(i=>{e.call(n,new gc(this._firestore,this._userDataWriter,i.key,i,new Fo(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new te(F.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(r,a){if(r._snapshot.oldDocs.isEmpty()){let s=0;return r._snapshot.docChanges.map(l=>{const u=new gc(r._firestore,r._userDataWriter,l.doc.key,l.doc,new Fo(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);return l.doc,{type:"added",doc:u,oldIndex:-1,newIndex:s++}})}{let s=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(l=>a||l.type!==3).map(l=>{const u=new gc(r._firestore,r._userDataWriter,l.doc.key,l.doc,new Fo(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);let c=-1,f=-1;return l.type!==0&&(c=s.indexOf(l.doc.key),s=s.delete(l.doc.key)),l.type!==1&&(s=s.add(l.doc),f=s.indexOf(l.doc.key)),{type:fx(l.type),doc:u,oldIndex:c,newIndex:f}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function fx(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ie(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dx(t){t=Bi(t,vn);const e=Bi(t.firestore,ao);return YM(Ep(e),t._key).then(n=>vx(e,t,n))}class kb extends ux{constructor(e){super(),this.firestore=e}convertBytes(e){return new Gs(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new vn(this.firestore,null,n)}}function mx(t){t=Bi(t,ef);const e=Bi(t.firestore,ao),n=Ep(e),i=new kb(e);return lx(t._query),XM(n,t._query).then(r=>new hx(e,i,t,r))}function gx(t,e,n,...i){t=Bi(t,vn);const r=Bi(t.firestore,ao),a=Nb(r);let s;return s=typeof(e=Ft(e))=="string"||e instanceof tf?ax(a,"updateDoc",t._key,e,n,i):rx(a,"updateDoc",t._key,e),Ip(r,[s.toMutation(t._key,Bn.exists(!0))])}function px(t){return Ip(Bi(t.firestore,ao),[new np(t._key,Bn.none())])}function yx(t,e){const n=Bi(t.firestore,ao),i=dh(t),r=cx(t.converter,e);return Ip(n,[ix(Nb(t.firestore),"addDoc",i._key,r,t.converter!==null,{}).toMutation(i._key,Bn.exists(!1))]).then(()=>i)}function Ip(t,e){return function(i,r){const a=new Mi;return i.asyncQueue.enqueueAndForget(async()=>LM(await QM(i),r,a)),a.promise}(Ep(t),e)}function vx(t,e,n){const i=n.docs.get(e._key),r=new kb(t);return new Ub(t,r,e._key,i,new Fo(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(r){to=r})(eo),ks(new Aa("firestore",(i,{instanceIdentifier:r,options:a})=>{const s=i.getProvider("app").getImmediate(),l=new ao(new aO(i.getProvider("auth-internal")),new lO(s,i.getProvider("app-check-internal")),function(c,f){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new te(F.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Dl(c.options.projectId,f)}(s,r),s);return a=Object.assign({useFetchStreams:n},a),l._setSettings(a),l},"PUBLIC").setMultipleInstances(!0)),Cr(y_,v_,e),Cr(y_,v_,"esm2017")})();function Cp(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]]);return n}function zb(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const _x=zb,jb=new tu("auth","Firebase",zb());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gh=new Gg("@firebase/auth");function Ex(t,...e){gh.logLevel<=ve.WARN&&gh.warn(`Auth (${eo}): ${t}`,...e)}function pc(t,...e){gh.logLevel<=ve.ERROR&&gh.error(`Auth (${eo}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function li(t,...e){throw Op(t,...e)}function Hn(t,...e){return Op(t,...e)}function Dp(t,e,n){const i=Object.assign(Object.assign({},_x()),{[e]:n});return new tu("auth","Firebase",i).create(e,{appName:t.name})}function pa(t){return Dp(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Tx(t,e,n){const i=n;if(!(e instanceof i))throw i.name!==e.constructor.name&&li(t,"argument-error"),Dp(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Op(t,...e){if(typeof t!="string"){const n=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=t.name),t._errorFactory.create(n,...i)}return jb.create(t,...e)}function oe(t,e,...n){if(!t)throw Op(e,...n)}function Ii(t){const e="INTERNAL ASSERTION FAILED: "+t;throw pc(e),new Error(e)}function Hi(t,e){t||Ii(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vm(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function Sx(){return dE()==="http:"||dE()==="https:"}function dE(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ax(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Sx()||LD()||"connection"in navigator)?navigator.onLine:!0}function bx(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ou{constructor(e,n){this.shortDelay=e,this.longDelay=n,Hi(n>e,"Short delay should be less than long delay!"),this.isMobile=xD()||UD()}get(){return Ax()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Np(t,e){Hi(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bb{static initialize(e,n,i){this.fetchImpl=e,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ii("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ii("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ii("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wx={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rx=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],Ix=new ou(3e4,6e4);function Mp(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function so(t,e,n,i,r={}){return Hb(t,r,async()=>{let a={},s={};i&&(e==="GET"?s=i:a={body:JSON.stringify(i)});const l=nu(Object.assign({key:t.config.apiKey},s)).slice(1),u=await t._getAdditionalHeaders();u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode);const c=Object.assign({method:e,headers:u},a);return PD()||(c.referrerPolicy="no-referrer"),Bb.fetch()(await Fb(t,t.config.apiHost,n,l),c)})}async function Hb(t,e,n){t._canInitEmulator=!1;const i=Object.assign(Object.assign({},wx),e);try{const r=new Dx(t),a=await Promise.race([n(),r.promise]);r.clearNetworkTimeout();const s=await a.json();if("needConfirmation"in s)throw Xu(t,"account-exists-with-different-credential",s);if(a.ok&&!("errorMessage"in s))return s;{const l=a.ok?s.errorMessage:s.error.message,[u,c]=l.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw Xu(t,"credential-already-in-use",s);if(u==="EMAIL_EXISTS")throw Xu(t,"email-already-in-use",s);if(u==="USER_DISABLED")throw Xu(t,"user-disabled",s);const f=i[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw Dp(t,f,c);li(t,f)}}catch(r){if(r instanceof Gi)throw r;li(t,"network-request-failed",{message:String(r)})}}async function Cx(t,e,n,i,r={}){const a=await so(t,e,n,i,r);return"mfaPendingCredential"in a&&li(t,"multi-factor-auth-required",{_serverResponse:a}),a}async function Fb(t,e,n,i){const r=`${e}${n}?${i}`,a=t,s=a.config.emulator?Np(t.config,r):`${t.config.apiScheme}://${r}`;return Rx.includes(n)&&(await a._persistenceManagerAvailable,a._getPersistenceType()==="COOKIE")?a._getPersistence()._getFinalTarget(s).toString():s}class Dx{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(Hn(this.auth,"network-request-failed")),Ix.get())})}}function Xu(t,e,n){const i={appName:t.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const r=Hn(t,e,i);return r.customData._tokenResponse=n,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ox(t,e){return so(t,"POST","/v1/accounts:delete",e)}async function ph(t,e){return so(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ul(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function Nx(t,e=!1){const n=Ft(t),i=await n.getIdToken(e),r=xp(i);oe(r&&r.exp&&r.auth_time&&r.iat,n.auth,"internal-error");const a=typeof r.firebase=="object"?r.firebase:void 0,s=a==null?void 0:a.sign_in_provider;return{claims:r,token:i,authTime:ul(hd(r.auth_time)),issuedAtTime:ul(hd(r.iat)),expirationTime:ul(hd(r.exp)),signInProvider:s||null,signInSecondFactor:(a==null?void 0:a.sign_in_second_factor)||null}}function hd(t){return Number(t)*1e3}function xp(t){const[e,n,i]=t.split(".");if(e===void 0||n===void 0||i===void 0)return pc("JWT malformed, contained fewer than 3 sections"),null;try{const r=XS(n);return r?JSON.parse(r):(pc("Failed to decode base64 JWT payload"),null)}catch(r){return pc("Caught error parsing JWT payload as JSON",r==null?void 0:r.toString()),null}}function mE(t){const e=xp(t);return oe(e,"internal-error"),oe(typeof e.exp<"u","internal-error"),oe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xl(t,e,n=!1){if(n)return e;try{return await e}catch(i){throw i instanceof Gi&&Mx(i)&&t.auth.currentUser===t&&await t.auth.signOut(),i}}function Mx({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xx{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const r=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pm{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=ul(this.lastLoginAt),this.creationTime=ul(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yh(t){var e;const n=t.auth,i=await t.getIdToken(),r=await xl(t,ph(n,{idToken:i}));oe(r==null?void 0:r.users.length,n,"internal-error");const a=r.users[0];t._notifyReloadListener(a);const s=!((e=a.providerUserInfo)===null||e===void 0)&&e.length?qb(a.providerUserInfo):[],l=Px(t.providerData,s),u=t.isAnonymous,c=!(t.email&&a.passwordHash)&&!(l!=null&&l.length),f=u?c:!1,m={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:l,metadata:new Pm(a.createdAt,a.lastLoginAt),isAnonymous:f};Object.assign(t,m)}async function Vx(t){const e=Ft(t);await yh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function Px(t,e){return[...t.filter(i=>!e.some(r=>r.providerId===i.providerId)),...e]}function qb(t){return t.map(e=>{var{providerId:n}=e,i=Cp(e,["providerId"]);return{providerId:n,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Lx(t,e){const n=await Hb(t,{},async()=>{const i=nu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:a}=t.config,s=await Fb(t,r,"/v1/token",`key=${a}`),l=await t._getAdditionalHeaders();return l["Content-Type"]="application/x-www-form-urlencoded",Bb.fetch()(s,{method:"POST",headers:l,body:i})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function Ux(t,e){return so(t,"POST","/v2/accounts:revokeToken",Mp(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ss{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){oe(e.idToken,"internal-error"),oe(typeof e.idToken<"u","internal-error"),oe(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):mE(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){oe(e.length!==0,"internal-error");const n=mE(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(oe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:i,refreshToken:r,expiresIn:a}=await Lx(e,n);this.updateTokensAndExpiration(i,r,Number(a))}updateTokensAndExpiration(e,n,i){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,n){const{refreshToken:i,accessToken:r,expirationTime:a}=n,s=new Ss;return i&&(oe(typeof i=="string","internal-error",{appName:e}),s.refreshToken=i),r&&(oe(typeof r=="string","internal-error",{appName:e}),s.accessToken=r),a&&(oe(typeof a=="number","internal-error",{appName:e}),s.expirationTime=a),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ss,this.toJSON())}_performRefresh(){return Ii("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function er(t,e){oe(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class zn{constructor(e){var{uid:n,auth:i,stsTokenManager:r}=e,a=Cp(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new xx(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=i,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new Pm(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const n=await xl(this,this.stsTokenManager.getToken(this.auth,e));return oe(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return Nx(this,e)}reload(){return Vx(this)}_assign(e){this!==e&&(oe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new zn(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){oe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),n&&await yh(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(kn(this.auth.app))return Promise.reject(pa(this.auth));const e=await this.getIdToken();return await xl(this,Ox(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var i,r,a,s,l,u,c,f;const m=(i=n.displayName)!==null&&i!==void 0?i:void 0,g=(r=n.email)!==null&&r!==void 0?r:void 0,y=(a=n.phoneNumber)!==null&&a!==void 0?a:void 0,C=(s=n.photoURL)!==null&&s!==void 0?s:void 0,O=(l=n.tenantId)!==null&&l!==void 0?l:void 0,M=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,T=(c=n.createdAt)!==null&&c!==void 0?c:void 0,E=(f=n.lastLoginAt)!==null&&f!==void 0?f:void 0,{uid:b,emailVerified:N,isAnonymous:j,providerData:q,stsTokenManager:p}=n;oe(b&&p,e,"internal-error");const v=Ss.fromJSON(this.name,p);oe(typeof b=="string",e,"internal-error"),er(m,e.name),er(g,e.name),oe(typeof N=="boolean",e,"internal-error"),oe(typeof j=="boolean",e,"internal-error"),er(y,e.name),er(C,e.name),er(O,e.name),er(M,e.name),er(T,e.name),er(E,e.name);const S=new zn({uid:b,auth:e,email:g,emailVerified:N,displayName:m,isAnonymous:j,photoURL:C,phoneNumber:y,tenantId:O,stsTokenManager:v,createdAt:T,lastLoginAt:E});return q&&Array.isArray(q)&&(S.providerData=q.map(A=>Object.assign({},A))),M&&(S._redirectEventId=M),S}static async _fromIdTokenResponse(e,n,i=!1){const r=new Ss;r.updateFromServerResponse(n);const a=new zn({uid:n.localId,auth:e,stsTokenManager:r,isAnonymous:i});return await yh(a),a}static async _fromGetAccountInfoResponse(e,n,i){const r=n.users[0];oe(r.localId!==void 0,"internal-error");const a=r.providerUserInfo!==void 0?qb(r.providerUserInfo):[],s=!(r.email&&r.passwordHash)&&!(a!=null&&a.length),l=new Ss;l.updateFromIdToken(i);const u=new zn({uid:r.localId,auth:e,stsTokenManager:l,isAnonymous:s}),c={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:a,metadata:new Pm(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(a!=null&&a.length)};return Object.assign(u,c),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gE=new Map;function Ci(t){Hi(t instanceof Function,"Expected a class definition");let e=gE.get(t);return e?(Hi(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,gE.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gb{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}Gb.type="NONE";const pE=Gb;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yc(t,e,n){return`firebase:${t}:${e}:${n}`}class As{constructor(e,n,i){this.persistence=e,this.auth=n,this.userKey=i;const{config:r,name:a}=this.auth;this.fullUserKey=yc(this.userKey,r.apiKey,a),this.fullPersistenceKey=yc("persistence",r.apiKey,a),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await ph(this.auth,{idToken:e}).catch(()=>{});return n?zn._fromGetAccountInfoResponse(this.auth,n,e):null}return zn._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,i="authUser"){if(!n.length)return new As(Ci(pE),e,i);const r=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let a=r[0]||Ci(pE);const s=yc(i,e.config.apiKey,e.name);let l=null;for(const c of n)try{const f=await c._get(s);if(f){let m;if(typeof f=="string"){const g=await ph(e,{idToken:f}).catch(()=>{});if(!g)break;m=await zn._fromGetAccountInfoResponse(e,g,f)}else m=zn._fromJSON(e,f);c!==a&&(l=m),a=c;break}}catch{}const u=r.filter(c=>c._shouldAllowMigration);return!a._shouldAllowMigration||!u.length?new As(a,e,i):(a=u[0],l&&await a._set(s,l.toJSON()),await Promise.all(n.map(async c=>{if(c!==a)try{await c._remove(s)}catch{}})),new As(a,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yE(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Xb(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Kb(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Zb(e))return"Blackberry";if(Wb(e))return"Webos";if(Qb(e))return"Safari";if((e.includes("chrome/")||Yb(e))&&!e.includes("edge/"))return"Chrome";if($b(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=t.match(n);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function Kb(t=Ht()){return/firefox\//i.test(t)}function Qb(t=Ht()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Yb(t=Ht()){return/crios\//i.test(t)}function Xb(t=Ht()){return/iemobile/i.test(t)}function $b(t=Ht()){return/android/i.test(t)}function Zb(t=Ht()){return/blackberry/i.test(t)}function Wb(t=Ht()){return/webos/i.test(t)}function Vp(t=Ht()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function kx(t=Ht()){var e;return Vp(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function zx(){return kD()&&document.documentMode===10}function Jb(t=Ht()){return Vp(t)||$b(t)||Wb(t)||Zb(t)||/windows phone/i.test(t)||Xb(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ew(t,e=[]){let n;switch(t){case"Browser":n=yE(Ht());break;case"Worker":n=`${yE(Ht())}-${t}`;break;default:n=t}const i=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${eo}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jx{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const i=a=>new Promise((s,l)=>{try{const u=e(a);s(u)}catch(u){l(u)}});i.onAbort=n,this.queue.push(i);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const i of this.queue)await i(e),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(const r of n)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Bx(t,e={}){return so(t,"GET","/v2/passwordPolicy",Mp(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hx=6;class Fx{constructor(e){var n,i,r,a;const s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=s.minPasswordLength)!==null&&n!==void 0?n:Hx,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),s.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),s.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),s.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),s.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(r=(i=e.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&r!==void 0?r:"",this.forceUpgradeOnSignin=(a=e.forceUpgradeOnSignin)!==null&&a!==void 0?a:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,i,r,a,s,l;const u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(n=u.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(i=u.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(r=u.containsLowercaseLetter)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(a=u.containsUppercaseLetter)!==null&&a!==void 0?a:!0),u.isValid&&(u.isValid=(s=u.containsNumericCharacter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(l=u.containsNonAlphanumericCharacter)!==null&&l!==void 0?l:!0),u}validatePasswordLengthOptions(e,n){const i=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;i&&(n.meetsMinPasswordLength=e.length>=i),r&&(n.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let i;for(let r=0;r<e.length;r++)i=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(n,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,n,i,r,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qx{constructor(e,n,i,r){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=i,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new vE(this),this.idTokenSubscription=new vE(this),this.beforeStateQueue=new jx(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=jb,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(a=>this._resolvePersistenceManagerAvailable=a)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Ci(n)),this._initializationPromise=this.queue(async()=>{var i,r,a;if(!this._deleted&&(this.persistenceManager=await As.create(this,e),(i=this._resolvePersistenceManagerAvailable)===null||i===void 0||i.call(this),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((a=this.currentUser)===null||a===void 0?void 0:a.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await ph(this,{idToken:e}),i=await zn._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(i)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(kn(this.app)){const s=this.app.settings.authIdToken;return s?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(l,l))}):this.directlySetCurrentUser(null)}const i=await this.assertedPersistence.getCurrentUser();let r=i,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const s=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,l=r==null?void 0:r._redirectEventId,u=await this.tryRedirectSignIn(e);(!s||s===l)&&(u!=null&&u.user)&&(r=u.user,a=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(r)}catch(s){r=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return oe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await yh(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=bx()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(kn(this.app))return Promise.reject(pa(this));const n=e?Ft(e):null;return n&&oe(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&oe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return kn(this.app)?Promise.reject(pa(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return kn(this.app)?Promise.reject(pa(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ci(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await Bx(this),n=new Fx(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new tu("auth","Firebase",e())}onAuthStateChanged(e,n,i){return this.registerStateListener(this.authStateSubscription,e,n,i)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,i){return this.registerStateListener(this.idTokenSubscription,e,n,i)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(i.tenantId=this.tenantId),await Ux(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const i=await this.getOrInitRedirectPersistenceManager(n);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Ci(e)||this._popupRedirectResolver;oe(n,this,"argument-error"),this.redirectPersistenceManager=await As.create(this,[Ci(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,i;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,i,r){if(this._deleted)return()=>{};const a=typeof n=="function"?n:n.next.bind(n);let s=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(oe(l,this,"internal-error"),l.then(()=>{s||a(this.currentUser)}),typeof n=="function"){const u=e.addObserver(n,i,r);return()=>{s=!0,u()}}else{const u=e.addObserver(n);return()=>{s=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return oe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=ew(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const i=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());i&&(n["X-Firebase-Client"]=i);const r=await this._getAppCheckToken();return r&&(n["X-Firebase-AppCheck"]=r),n}async _getAppCheckToken(){var e;if(kn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&Ex(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function af(t){return Ft(t)}class vE{constructor(e){this.auth=e,this.observer=null,this.addObserver=KD(n=>this.observer=n)}get next(){return oe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Pp={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Gx(t){Pp=t}function Kx(t){return Pp.loadJS(t)}function Qx(){return Pp.gapiScript}function Yx(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xx(t,e){const n=Qg(t,"auth");if(n.isInitialized()){const r=n.getImmediate(),a=n.getOptions();if(Sa(a,e??{}))return r;li(r,"already-initialized")}return n.initialize({options:e})}function $x(t,e){const n=(e==null?void 0:e.persistence)||[],i=(Array.isArray(n)?n:[n]).map(Ci);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function Zx(t,e,n){const i=af(t);oe(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const r=!1,a=tw(e),{host:s,port:l}=Wx(e),u=l===null?"":`:${l}`,c={url:`${a}//${s}${u}/`},f=Object.freeze({host:s,port:l,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:r})});if(!i._canInitEmulator){oe(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),oe(Sa(c,i.config.emulator)&&Sa(f,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=c,i.emulatorConfig=f,i.settings.appVerificationDisabledForTesting=!0,Jx()}function tw(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function Wx(t){const e=tw(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(i);if(r){const a=r[1];return{host:a,port:_E(i.substr(a.length+1))}}else{const[a,s]=i.split(":");return{host:a,port:_E(s)}}}function _E(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function Jx(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nw{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Ii("not implemented")}_getIdTokenResponse(e){return Ii("not implemented")}_linkToIdToken(e,n){return Ii("not implemented")}_getReauthenticationResolver(e){return Ii("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bs(t,e){return Cx(t,"POST","/v1/accounts:signInWithIdp",Mp(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eV="http://localhost";class Ra extends nw{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Ra(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):li("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:r}=n,a=Cp(n,["providerId","signInMethod"]);if(!i||!r)return null;const s=new Ra(i,r);return s.idToken=a.idToken||void 0,s.accessToken=a.accessToken||void 0,s.secret=a.secret,s.nonce=a.nonce,s.pendingToken=a.pendingToken||null,s}_getIdTokenResponse(e){const n=this.buildRequest();return bs(e,n)}_linkToIdToken(e,n){const i=this.buildRequest();return i.idToken=n,bs(e,i)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,bs(e,n)}buildRequest(){const e={requestUri:eV,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=nu(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lp{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lu extends Lp{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ur extends lu{constructor(){super("facebook.com")}static credential(e){return Ra._fromParams({providerId:ur.PROVIDER_ID,signInMethod:ur.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ur.credentialFromTaggedObject(e)}static credentialFromError(e){return ur.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ur.credential(e.oauthAccessToken)}catch{return null}}}ur.FACEBOOK_SIGN_IN_METHOD="facebook.com";ur.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wn extends lu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Ra._fromParams({providerId:Wn.PROVIDER_ID,signInMethod:Wn.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Wn.credentialFromTaggedObject(e)}static credentialFromError(e){return Wn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:i}=e;if(!n&&!i)return null;try{return Wn.credential(n,i)}catch{return null}}}Wn.GOOGLE_SIGN_IN_METHOD="google.com";Wn.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cr extends lu{constructor(){super("github.com")}static credential(e){return Ra._fromParams({providerId:cr.PROVIDER_ID,signInMethod:cr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return cr.credentialFromTaggedObject(e)}static credentialFromError(e){return cr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return cr.credential(e.oauthAccessToken)}catch{return null}}}cr.GITHUB_SIGN_IN_METHOD="github.com";cr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hr extends lu{constructor(){super("twitter.com")}static credential(e,n){return Ra._fromParams({providerId:hr.PROVIDER_ID,signInMethod:hr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return hr.credentialFromTaggedObject(e)}static credentialFromError(e){return hr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=e;if(!n||!i)return null;try{return hr.credential(n,i)}catch{return null}}}hr.TWITTER_SIGN_IN_METHOD="twitter.com";hr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ks{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,i,r=!1){const a=await zn._fromIdTokenResponse(e,i,r),s=EE(i);return new Ks({user:a,providerId:s,_tokenResponse:i,operationType:n})}static async _forOperation(e,n,i){await e._updateTokensIfNecessary(i,!0);const r=EE(i);return new Ks({user:e,providerId:r,_tokenResponse:i,operationType:n})}}function EE(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vh extends Gi{constructor(e,n,i,r){var a;super(n.code,n.message),this.operationType=i,this.user=r,Object.setPrototypeOf(this,vh.prototype),this.customData={appName:e.name,tenantId:(a=e.tenantId)!==null&&a!==void 0?a:void 0,_serverResponse:n.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,n,i,r){return new vh(e,n,i,r)}}function iw(t,e,n,i){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?vh._fromErrorAndOperation(t,a,e,i):a})}async function tV(t,e,n=!1){const i=await xl(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Ks._forOperation(t,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nV(t,e,n=!1){const{auth:i}=t;if(kn(i.app))return Promise.reject(pa(i));const r="reauthenticate";try{const a=await xl(t,iw(i,r,e,t),n);oe(a.idToken,i,"internal-error");const s=xp(a.idToken);oe(s,i,"internal-error");const{sub:l}=s;return oe(t.uid===l,i,"user-mismatch"),Ks._forOperation(t,r,a)}catch(a){throw(a==null?void 0:a.code)==="auth/user-not-found"&&li(i,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iV(t,e,n=!1){if(kn(t.app))return Promise.reject(pa(t));const i="signIn",r=await iw(t,i,e),a=await Ks._fromIdTokenResponse(t,i,r);return n||await t._updateCurrentUser(a.user),a}function rV(t,e,n,i){return Ft(t).onIdTokenChanged(e,n,i)}function aV(t,e,n){return Ft(t).beforeAuthStateChanged(e,n)}function sV(t,e,n,i){return Ft(t).onAuthStateChanged(e,n,i)}function oV(t){return Ft(t).signOut()}const _h="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rw{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(_h,"1"),this.storage.removeItem(_h),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lV=1e3,uV=10;class aw extends rw{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Jb(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const i=this.storage.getItem(n),r=this.localCache[n];i!==r&&e(n,r,i)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((s,l,u)=>{this.notifyListeners(s,u)});return}const i=e.key;n?this.detachListener():this.stopPolling();const r=()=>{const s=this.storage.getItem(i);!n&&this.localCache[i]===s||this.notifyListeners(i,s)},a=this.storage.getItem(i);zx()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,uV):r()}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:i}),!0)})},lV)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}aw.type="LOCAL";const cV=aw;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sw extends rw{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}sw.type="SESSION";const ow=sw;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hV(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sf{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(r=>r.isListeningto(e));if(n)return n;const i=new sf(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:i,eventType:r,data:a}=n.data,s=this.handlersMap[r];if(!(s!=null&&s.size))return;n.ports[0].postMessage({status:"ack",eventId:i,eventType:r});const l=Array.from(s).map(async c=>c(n.origin,a)),u=await hV(l);n.ports[0].postMessage({status:"done",eventId:i,eventType:r,response:u})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}sf.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Up(t="",e=10){let n="";for(let i=0;i<e;i++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fV{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,i=50){const r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let a,s;return new Promise((l,u)=>{const c=Up("",20);r.port1.start();const f=setTimeout(()=>{u(new Error("unsupported_event"))},i);s={messageChannel:r,onMessage(m){const g=m;if(g.data.eventId===c)switch(g.data.status){case"ack":clearTimeout(f),a=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),l(g.data.response);break;default:clearTimeout(f),clearTimeout(a),u(new Error("invalid_response"));break}}},this.handlers.add(s),r.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[r.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ai(){return window}function dV(t){ai().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lw(){return typeof ai().WorkerGlobalScope<"u"&&typeof ai().importScripts=="function"}async function mV(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function gV(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function pV(){return lw()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uw="firebaseLocalStorageDb",yV=1,Eh="firebaseLocalStorage",cw="fbase_key";class uu{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function of(t,e){return t.transaction([Eh],e?"readwrite":"readonly").objectStore(Eh)}function vV(){const t=indexedDB.deleteDatabase(uw);return new uu(t).toPromise()}function Lm(){const t=indexedDB.open(uw,yV);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const i=t.result;try{i.createObjectStore(Eh,{keyPath:cw})}catch(r){n(r)}}),t.addEventListener("success",async()=>{const i=t.result;i.objectStoreNames.contains(Eh)?e(i):(i.close(),await vV(),e(await Lm()))})})}async function TE(t,e,n){const i=of(t,!0).put({[cw]:e,value:n});return new uu(i).toPromise()}async function _V(t,e){const n=of(t,!1).get(e),i=await new uu(n).toPromise();return i===void 0?null:i.value}function SE(t,e){const n=of(t,!0).delete(e);return new uu(n).toPromise()}const EV=800,TV=3;class hw{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Lm(),this.db)}async _withRetries(e){let n=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(n++>TV)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return lw()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=sf._getInstance(pV()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await mV(),!this.activeServiceWorker)return;this.sender=new fV(this.activeServiceWorker);const i=await this.sender._send("ping",{},800);i&&!((e=i[0])===null||e===void 0)&&e.fulfilled&&!((n=i[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||gV()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Lm();return await TE(e,_h,"1"),await SE(e,_h),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(i=>TE(i,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(i=>_V(i,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>SE(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(r=>{const a=of(r,!1).getAll();return new uu(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],i=new Set;if(e.length!==0)for(const{fbase_key:r,value:a}of e)i.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(a)&&(this.notifyListeners(r,a),n.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!i.has(r)&&(this.notifyListeners(r,null),n.push(r));return n}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),EV)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}hw.type="LOCAL";const SV=hw;new ou(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fw(t,e){return e?Ci(e):(oe(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kp extends nw{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return bs(e,this._buildIdpRequest())}_linkToIdToken(e,n){return bs(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return bs(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function AV(t){return iV(t.auth,new kp(t),t.bypassAuthState)}function bV(t){const{auth:e,user:n}=t;return oe(n,e,"internal-error"),nV(n,new kp(t),t.bypassAuthState)}async function wV(t){const{auth:e,user:n}=t;return oe(n,e,"internal-error"),tV(n,new kp(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dw{constructor(e,n,i,r,a=!1){this.auth=e,this.resolver=i,this.user=r,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:i,postBody:r,tenantId:a,error:s,type:l}=e;if(s){this.reject(s);return}const u={auth:this.auth,requestUri:n,sessionId:i,tenantId:a||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(u))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return AV;case"linkViaPopup":case"linkViaRedirect":return wV;case"reauthViaPopup":case"reauthViaRedirect":return bV;default:li(this.auth,"internal-error")}}resolve(e){Hi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Hi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RV=new ou(2e3,1e4);async function IV(t,e,n){if(kn(t.app))return Promise.reject(Hn(t,"operation-not-supported-in-this-environment"));const i=af(t);Tx(t,e,Lp);const r=fw(i,n);return new la(i,"signInViaPopup",e,r).executeNotNull()}class la extends dw{constructor(e,n,i,r,a){super(e,n,r,a),this.provider=i,this.authWindow=null,this.pollId=null,la.currentPopupAction&&la.currentPopupAction.cancel(),la.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return oe(e,this.auth,"internal-error"),e}async onExecution(){Hi(this.filter.length===1,"Popup operations only handle one event");const e=Up();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Hn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Hn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,la.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,i;if(!((i=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Hn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,RV.get())};e()}}la.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CV="pendingRedirect",vc=new Map;class DV extends dw{constructor(e,n,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i),this.eventId=null}async execute(){let e=vc.get(this.auth._key());if(!e){try{const i=await OV(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(n){e=()=>Promise.reject(n)}vc.set(this.auth._key(),e)}return this.bypassAuthState||vc.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function OV(t,e){const n=xV(e),i=MV(t);if(!await i._isAvailable())return!1;const r=await i._get(n)==="true";return await i._remove(n),r}function NV(t,e){vc.set(t._key(),e)}function MV(t){return Ci(t._redirectPersistence)}function xV(t){return yc(CV,t.config.apiKey,t.name)}async function VV(t,e,n=!1){if(kn(t.app))return Promise.reject(pa(t));const i=af(t),r=fw(i,e),s=await new DV(i,r,n).execute();return s&&!n&&(delete s.user._redirectEventId,await i._persistUserIfCurrent(s.user),await i._setRedirectUser(null,e)),s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PV=10*60*1e3;class LV{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(n=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!UV(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var i;if(e.error&&!mw(e)){const r=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";n.onError(Hn(this.auth,r))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const i=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=PV&&this.cachedEventUids.clear(),this.cachedEventUids.has(AE(e))}saveEventToCache(e){this.cachedEventUids.add(AE(e)),this.lastProcessedEventTime=Date.now()}}function AE(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function mw({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function UV(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return mw(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kV(t,e={}){return so(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zV=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,jV=/^https?/;async function BV(t){if(t.config.emulator)return;const{authorizedDomains:e}=await kV(t);for(const n of e)try{if(HV(n))return}catch{}li(t,"unauthorized-domain")}function HV(t){const e=Vm(),{protocol:n,hostname:i}=new URL(e);if(t.startsWith("chrome-extension://")){const s=new URL(t);return s.hostname===""&&i===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&s.hostname===i}if(!jV.test(n))return!1;if(zV.test(t))return i===t;const r=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FV=new ou(3e4,6e4);function bE(){const t=ai().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function qV(t){return new Promise((e,n)=>{var i,r,a;function s(){bE(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{bE(),n(Hn(t,"network-request-failed"))},timeout:FV.get()})}if(!((r=(i=ai().gapi)===null||i===void 0?void 0:i.iframes)===null||r===void 0)&&r.Iframe)e(gapi.iframes.getContext());else if(!((a=ai().gapi)===null||a===void 0)&&a.load)s();else{const l=Yx("iframefcb");return ai()[l]=()=>{gapi.load?s():n(Hn(t,"network-request-failed"))},Kx(`${Qx()}?onload=${l}`).catch(u=>n(u))}}).catch(e=>{throw _c=null,e})}let _c=null;function GV(t){return _c=_c||qV(t),_c}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KV=new ou(5e3,15e3),QV="__/auth/iframe",YV="emulator/auth/iframe",XV={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},$V=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function ZV(t){const e=t.config;oe(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Np(e,YV):`https://${t.config.authDomain}/${QV}`,i={apiKey:e.apiKey,appName:t.name,v:eo},r=$V.get(t.config.apiHost);r&&(i.eid=r);const a=t._getFrameworks();return a.length&&(i.fw=a.join(",")),`${n}?${nu(i).slice(1)}`}async function WV(t){const e=await GV(t),n=ai().gapi;return oe(n,t,"internal-error"),e.open({where:document.body,url:ZV(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:XV,dontclear:!0},i=>new Promise(async(r,a)=>{await i.restyle({setHideOnLeave:!1});const s=Hn(t,"network-request-failed"),l=ai().setTimeout(()=>{a(s)},KV.get());function u(){ai().clearTimeout(l),r(i)}i.ping(u).then(u,()=>{a(s)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JV={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},eP=500,tP=600,nP="_blank",iP="http://localhost";class wE{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function rP(t,e,n,i=eP,r=tP){const a=Math.max((window.screen.availHeight-r)/2,0).toString(),s=Math.max((window.screen.availWidth-i)/2,0).toString();let l="";const u=Object.assign(Object.assign({},JV),{width:i.toString(),height:r.toString(),top:a,left:s}),c=Ht().toLowerCase();n&&(l=Yb(c)?nP:n),Kb(c)&&(e=e||iP,u.scrollbars="yes");const f=Object.entries(u).reduce((g,[y,C])=>`${g}${y}=${C},`,"");if(kx(c)&&l!=="_self")return aP(e||"",l),new wE(null);const m=window.open(e||"",l,f);oe(m,t,"popup-blocked");try{m.focus()}catch{}return new wE(m)}function aP(t,e){const n=document.createElement("a");n.href=t,n.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sP="__/auth/handler",oP="emulator/auth/handler",lP=encodeURIComponent("fac");async function RE(t,e,n,i,r,a){oe(t.config.authDomain,t,"auth-domain-config-required"),oe(t.config.apiKey,t,"invalid-api-key");const s={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:i,v:eo,eventId:r};if(e instanceof Lp){e.setDefaultLanguage(t.languageCode),s.providerId=e.providerId||"",GD(e.getCustomParameters())||(s.customParameters=JSON.stringify(e.getCustomParameters()));for(const[f,m]of Object.entries({}))s[f]=m}if(e instanceof lu){const f=e.getScopes().filter(m=>m!=="");f.length>0&&(s.scopes=f.join(","))}t.tenantId&&(s.tid=t.tenantId);const l=s;for(const f of Object.keys(l))l[f]===void 0&&delete l[f];const u=await t._getAppCheckToken(),c=u?`#${lP}=${encodeURIComponent(u)}`:"";return`${uP(t)}?${nu(l).slice(1)}${c}`}function uP({config:t}){return t.emulator?Np(t,oP):`https://${t.authDomain}/${sP}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fd="webStorageSupport";class cP{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ow,this._completeRedirectFn=VV,this._overrideRedirectResult=NV}async _openPopup(e,n,i,r){var a;Hi((a=this.eventManagers[e._key()])===null||a===void 0?void 0:a.manager,"_initialize() not called before _openPopup()");const s=await RE(e,n,i,Vm(),r);return rP(e,s,Up())}async _openRedirect(e,n,i,r){await this._originValidation(e);const a=await RE(e,n,i,Vm(),r);return dV(a),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:r,promise:a}=this.eventManagers[n];return r?Promise.resolve(r):(Hi(a,"If manager is not set, promise should be"),a)}const i=this.initAndGetManager(e);return this.eventManagers[n]={promise:i},i.catch(()=>{delete this.eventManagers[n]}),i}async initAndGetManager(e){const n=await WV(e),i=new LV(e);return n.register("authEvent",r=>(oe(r==null?void 0:r.authEvent,e,"invalid-auth-event"),{status:i.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=n,i}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(fd,{type:fd},r=>{var a;const s=(a=r==null?void 0:r[0])===null||a===void 0?void 0:a[fd];s!==void 0&&n(!!s),li(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=BV(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return Jb()||Qb()||Vp()}}const hP=cP;var IE="@firebase/auth",CE="1.10.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fP{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){oe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dP(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function mP(t){ks(new Aa("auth",(e,{options:n})=>{const i=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:s,authDomain:l}=i.options;oe(s&&!s.includes(":"),"invalid-api-key",{appName:i.name});const u={apiKey:s,authDomain:l,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:ew(t)},c=new qx(i,r,a,u);return $x(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,i)=>{e.getProvider("auth-internal").initialize()})),ks(new Aa("auth-internal",e=>{const n=af(e.getProvider("auth").getImmediate());return(i=>new fP(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Cr(IE,CE,dP(t)),Cr(IE,CE,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gP=5*60,pP=WS("authIdTokenMaxAge")||gP;let DE=null;const yP=t=>async e=>{const n=e&&await e.getIdTokenResult(),i=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(i&&i>pP)return;const r=n==null?void 0:n.token;DE!==r&&(DE=r,await fetch(t,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))};function gw(t=nA()){const e=Qg(t,"auth");if(e.isInitialized())return e.getImmediate();const n=Xx(t,{popupRedirectResolver:hP,persistence:[SV,cV,ow]}),i=WS("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(i,location.origin);if(location.origin===a.origin){const s=yP(a.toString());aV(n,s,()=>s(n.currentUser)),rV(n,l=>s(l))}}const r=$S("auth");return r&&Zx(n,`http://${r}`),n}function vP(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}Gx({loadJS(t){return new Promise((e,n)=>{const i=document.createElement("script");i.setAttribute("src",t),i.onload=e,i.onerror=r=>{const a=Hn("internal-error");a.customData=r,n(a)},i.type="text/javascript",i.charset="UTF-8",vP().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});mP("Browser");var _P="firebase",EP="11.6.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Cr(_P,EP,"app");const TP={apiKey:"AIzaSyDMzcJXkV228PInQSx5fQeakoFUqiHW-1k",authDomain:"piw-lab3-project.firebaseapp.com",projectId:"piw-lab3-project",storageBucket:"piw-lab3-project.appspot.com",messagingSenderId:"536355846799",appId:"1:536355846799:web:c513f81c1db143a29d24efa"},zp=tA(TP),Vl=WM(zp),jp=gw(zp);new Wn;const cu=U.createContext(),SP=({children:t})=>{const[e,n]=U.useState([]),[i,r]=U.useState(""),[a,s]=U.useState(""),[l,u]=U.useState(!1),[c,f]=U.useState(!1),[m,g]=U.useState(""),[y,C]=U.useState(""),[O,M]=U.useState(""),[T,E]=U.useState(!1),[b,N]=U.useState(null);U.useEffect(()=>{const p=sV(jp,v=>{N(v)});return()=>p()},[]),U.useEffect(()=>{j()},[]);const j=async()=>{try{const v=(await mx(Cb(Vl,"books"))).docs.map(S=>({id:S.id,...S.data()}));n(v)}catch(p){console.error("Error fetching books from Firestore:",p)}},q=e.filter(p=>!(T&&b&&p.owner!==b.uid||i&&!p.title.toLowerCase().includes(i.toLowerCase())||a&&!p.author.toLowerCase().includes(a.toLowerCase())||l&&!c&&p.cover!=="hard"||c&&!l&&p.cover!=="soft"||m&&p.pages<parseInt(m,10)||y&&p.pages>parseInt(y,10)||O&&!p.description.toLowerCase().includes(O.toLowerCase())));return B.jsx(cu.Provider,{value:{bookList:q,setBookList:n,refreshBooks:j,titleFilter:i,setTitleFilter:r,authorFilter:a,setAuthorFilter:s,hardCoverFilter:l,setHardCoverFilter:u,softCoverFilter:c,setSoftCoverFilter:f,minPagesFilter:m,setMinPagesFilter:g,maxPagesFilter:y,setMaxPagesFilter:C,descFilter:O,setDescFilter:M,showOnlyMine:T,setShowOnlyMine:E,currentUser:b},children:t})};function AP(){return B.jsx(SP,{children:B.jsxs(_D,{children:[B.jsx(ED,{}),B.jsx("main",{className:"pt-16 p-4 container mx-auto",children:B.jsx(KC,{})}),B.jsx(TD,{})]})})}function bP(){const{titleFilter:t,setTitleFilter:e,authorFilter:n,setAuthorFilter:i,hardCoverFilter:r,setHardCoverFilter:a,softCoverFilter:s,setSoftCoverFilter:l,minPagesFilter:u,setMinPagesFilter:c,maxPagesFilter:f,setMaxPagesFilter:m,descFilter:g,setDescFilter:y,showOnlyMine:C,setShowOnlyMine:O,currentUser:M}=U.useContext(cu);return B.jsxs("form",{className:"book-filters",children:[B.jsxs("div",{children:[B.jsx("label",{htmlFor:"titleFilter",children:"Title:"}),B.jsx("input",{id:"titleFilter",type:"text",value:t,placeholder:"Search by title",onChange:T=>e(T.target.value)})]}),B.jsxs("div",{children:[B.jsx("label",{htmlFor:"authorFilter",children:"Author:"}),B.jsx("input",{id:"authorFilter",type:"text",value:n,placeholder:"Search by author",onChange:T=>i(T.target.value)})]}),B.jsxs("div",{children:[B.jsxs("label",{children:[B.jsx("input",{type:"checkbox",checked:r,onChange:T=>a(T.target.checked)}),"Hard Cover"]}),B.jsxs("label",{children:[B.jsx("input",{type:"checkbox",checked:s,onChange:T=>l(T.target.checked)}),"Soft Cover"]})]}),B.jsxs("div",{children:[B.jsx("label",{htmlFor:"minPages",children:"Min Pages:"}),B.jsx("input",{id:"minPages",type:"number",value:u,onChange:T=>c(T.target.value)})]}),B.jsxs("div",{children:[B.jsx("label",{htmlFor:"maxPages",children:"Max Pages:"}),B.jsx("input",{id:"maxPages",type:"number",value:f,onChange:T=>m(T.target.value)})]}),B.jsxs("div",{children:[B.jsx("label",{htmlFor:"descFilter",children:"Word in Description:"}),B.jsx("input",{id:"descFilter",type:"text",value:g,placeholder:"Search text in description",onChange:T=>y(T.target.value)})]}),M&&B.jsx("div",{children:B.jsxs("label",{children:[B.jsx("input",{type:"checkbox",checked:C,onChange:T=>O(T.target.checked)}),"Only my books"]})})]})}function wP(){const{bookList:t,setBookList:e}=U.useContext(cu),{favorites:n,addFavorite:i}=KS(),r=eu(),a=jp.currentUser;if(t.length===0)return B.jsx("p",{children:"No books found"});const s=c=>{if(!a||c.owner!==a.uid){alert("You can only edit your own books.");return}r(`/edit/${c.id}`)},l=async c=>{if(!a||c.owner!==a.uid){alert("You are not allowed to delete this book.");return}try{await px(dh(Vl,"books",c.id)),e(f=>f.filter(m=>m.id!==c.id))}catch(f){console.error("Error deleting book:",f),alert("Failed to delete book.")}},u=c=>{n.some(m=>m.id===c.id)||i(c)};return B.jsx("ul",{children:t.map(c=>B.jsxs("li",{style:{marginBottom:"8px"},children:[B.jsx("strong",{children:c.title})," – ",c.author," (",c.pages," pages)",B.jsx("button",{style:{marginLeft:"12px",marginRight:"8px"},onClick:()=>u(c),disabled:n.some(f=>f.id===c.id),children:n.some(f=>f.id===c.id)?"Added":"Add to Favorites"}),a&&c.owner===a.uid&&B.jsxs(B.Fragment,{children:[B.jsx("button",{style:{marginRight:"8px"},onClick:()=>s(c),children:"Edit"}),B.jsx("button",{onClick:()=>l(c),children:"Delete"})]})]},c.id))})}function RP(){return B.jsxs("div",{children:[B.jsx("h1",{children:"Apple Worm 2.0 - Library"}),B.jsx(bP,{}),B.jsx(wP,{})]})}function IP(){const{refreshBooks:t}=U.useContext(cu),[e,n]=U.useState(""),[i,r]=U.useState(""),[a,s]=U.useState("hard"),[l,u]=U.useState(""),[c,f]=U.useState(""),m=eu(),g=async y=>{y.preventDefault();const C=jp.currentUser;if(!C){alert("You must be logged in to add a book.");return}const O={title:e,author:i,cover:a,pages:parseInt(l,10)||0,description:c,owner:C.uid};try{await yx(Cb(Vl,"books"),O),await t(),m("/")}catch(M){console.error("Error adding book:",M),alert("Failed to add book. Check console for details.")}};return B.jsxs("div",{children:[B.jsx("h1",{children:"Add a New Book"}),B.jsxs("form",{onSubmit:g,className:"new-book-form",children:[B.jsxs("div",{children:[B.jsx("label",{htmlFor:"title",children:"Title:"}),B.jsx("input",{id:"title",type:"text",value:e,placeholder:"Book title",onChange:y=>n(y.target.value),required:!0})]}),B.jsxs("div",{children:[B.jsx("label",{htmlFor:"author",children:"Author:"}),B.jsx("input",{id:"author",type:"text",value:i,placeholder:"Author name",onChange:y=>r(y.target.value),required:!0})]}),B.jsxs("div",{children:[B.jsx("label",{children:"Cover Type:"}),B.jsxs("div",{children:[B.jsxs("label",{children:[B.jsx("input",{type:"radio",name:"cover",value:"hard",checked:a==="hard",onChange:()=>s("hard")}),"Hard Cover"]}),B.jsxs("label",{children:[B.jsx("input",{type:"radio",name:"cover",value:"soft",checked:a==="soft",onChange:()=>s("soft")}),"Soft Cover"]})]})]}),B.jsxs("div",{children:[B.jsx("label",{htmlFor:"pages",children:"Number of Pages:"}),B.jsx("input",{id:"pages",type:"number",value:l,onChange:y=>u(y.target.value),required:!0})]}),B.jsxs("div",{children:[B.jsx("label",{htmlFor:"description",children:"Description:"}),B.jsx("textarea",{id:"description",rows:"3",value:c,placeholder:"Brief description of the book",onChange:y=>f(y.target.value)})]}),B.jsx("button",{type:"submit",children:"Add Book"})]})]})}function CP(){const[t,e]=U.useState(null),n=gw(zp),i=new Wn,r=eu();U.useEffect(()=>{const l=n.onAuthStateChanged(u=>{e(u)});return()=>l()},[]);const a=async()=>{try{await IV(n,i),r("/")}catch(l){console.error("Login error:",l)}},s=async()=>{try{await oV(n),e(null)}catch(l){console.error("Logout error:",l)}};return B.jsxs("div",{className:"p-4",children:[B.jsx("h1",{children:"Login"}),t?B.jsxs("div",{children:[B.jsxs("p",{children:["Welcome, ",t.displayName]}),B.jsx("button",{onClick:s,children:"Logout"})]}):B.jsx("button",{onClick:a,children:"Login with Google"})]})}function DP(){const{id:t}=MC(),e=eu(),{refreshBooks:n}=U.useContext(cu),[i,r]=U.useState(null);U.useEffect(()=>{(async()=>{const u=dh(Vl,"books",t),c=await dx(u);c.exists()?r(c.data()):(alert("Book not found."),e("/"))})()},[t,e]);const a=l=>{r(u=>({...u,[l.target.name]:l.target.value}))},s=async l=>{l.preventDefault(),await gx(dh(Vl,"books",t),{...i,pages:parseInt(i.pages,10)}),await n(),e("/")};return i?B.jsxs("form",{onSubmit:s,children:[B.jsx("h2",{children:"Edit Book"}),B.jsxs("label",{children:["Title:",B.jsx("input",{name:"title",value:i.title,onChange:a,required:!0})]}),B.jsxs("label",{children:["Author:",B.jsx("input",{name:"author",value:i.author,onChange:a,required:!0})]}),B.jsxs("label",{children:["Description:",B.jsx("textarea",{name:"description",value:i.description,onChange:a})]}),B.jsxs("label",{children:["Cover:",B.jsxs("select",{name:"cover",value:i.cover,onChange:a,children:[B.jsx("option",{value:"hard",children:"Hard"}),B.jsx("option",{value:"soft",children:"Soft"})]})]}),B.jsxs("label",{children:["Pages:",B.jsx("input",{name:"pages",type:"number",value:i.pages,onChange:a})]}),B.jsx("button",{type:"submit",children:"Update Book"})]}):B.jsx("p",{children:"Loading..."})}const OP=eD([{path:"/",element:B.jsx(AP,{}),children:[{index:!0,element:B.jsx(RP,{})},{path:"new",element:B.jsx(IP,{})},{path:"login",element:B.jsx(CP,{})},{path:"edit/:id",element:B.jsx(DP,{})}]}]);NI.createRoot(document.getElementById("root")).render(B.jsx(jE.StrictMode,{children:B.jsx(lD,{router:OP})}));
